!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=31)}([function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return s}));var n=r(6),a=r(5);function o(e,t){if(!Object(n.a)(e,t))throw new Error(`${e} != ${t}`)}r.d(t,"d",(function(){return a.b})),r.d(t,"a",(function(){return a.a}));new Promise((e,t)=>{window.addEventListener("load",()=>{setTimeout(()=>{e()},1)})});function s(e){function t(...r){if(t.nCalls++,"function"==typeof e)return e(...r)}return t.nCalls=0,t}},function(e,t,r){"use strict";r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return u}));var n=r(0),a=r(3);class o{constructor(e,t,r){this.parent=e,this.fcn=t,this.args=r,this.prevArgs=void 0,this.new=!0,this.rendering=!1,this.deleted=!1,this.focusedElem=void 0===e?{elem:void 0}:e.focusedElem,this.states=[],this.rootStore=new s(this),this.values=new Map}reset(){Object(n.a)(this.rendering),this.stateI=0,this.cmds=[],this.events=new Map}delete(){this.events&&this.events.has("delete")&&a.a.flip(this.events.get("delete")).forEach(e=>{e()}),this.deleted=!0}_render(e,t){Object(n.a)(!this.rendering),this.rendering=!0,this.reset(),this.setSize(e,t);let r=this.fcn(this,...this.args);if(void 0===r)r={};else if(r instanceof o)r=r._render(this.w,this.h),this.setSize(r.w,r.h),this.place(0,0,r);else if("object"!=typeof r)throw new Error("res has to be undefined or an object, not "+typeof r);if(r.w=this.w,r.h=this.h,r.cmds=this.cmds,r.element=this,r=new i(r),this.stateI!==this.states.length)throw new Error("Must call UI.state the same number of times");return this.rendering=!1,this.prevArgs=this.args,r}getSize(){return Object(n.a)(this.rendering),{w:this.w,h:this.h}}setSize(e,t){Object(n.a)(this.rendering),Object(n.a)("number"==typeof e&&"number"==typeof t),this.w=e,this.h=t}useState(e){if(Object(n.a)(this.rendering),this.stateI>this.states.length)throw new Error("should not be reached");this.stateI===this.states.length&&this.states.push("function"==typeof e?e():e);const t=this.stateI,r=this.states[this.stateI];return this.stateI++,[r,e=>{this.states[t]=e}]}store(e){if(void 0!==e)return this.rootStore.store(e);const[t]=this.useState(new s(this));return this.addEvent("delete",()=>{t.reset()}),t}addEvent(e,t){this.events.has(e)||this.events.set(e,[]),this.events.get(e).push(t)}runEvent(e,...t){this.events.has(e)&&this.events.get(e).forEach(e=>{e(...t)})}provideValue(e,t){Object(n.a)(this.rendering),this.values.set(e,t)}getValue(e){if(void 0===this.parent)throw Error("Unable to find value for id="+e);return this.parent.values.has(e)?this.parent.values.get(e):this.parent.getValue(e)}getElementsAt(e,t,r){if(void 0===r&&(r=[]),e<0||e>=this.w||t<0||t>=this.h)return r;for(const n of a.a.flip(this.cmds.filter(e=>"place"===e.type)))n.element.getElementsAt(e-n.x,t-n.y,r);return r.push({x:e,y:t,element:this}),r}getElementMapAt(e,t){const r=this.getElementsAt(e,t);return new Map(r.map(({x:e,y:t,element:r})=>[r,{x:e,y:t}]))}getElementStackAt(e,t,r){if(void 0===r&&(r=[]),e<0||e>=this.w||t<0||t>=this.h)return[];for(const n of a.a.flip(this.cmds.filter(e=>"place"===e.type))){if(n.element.getElementStackAt(e-n.x,t-n.y,r).length>0)break}return r.push({x:e,y:t,element:this}),r}getTopElementAt(e,t,r){const n=this.getElementStackAt(e,t);for(const e of n)if(e.element.events.has(r))return e}focus(){Object(n.a)(!this.rendering),this.focusedElem.elem=this}isFocused(){return this.focusedElem.elem===this}addCmd(e){Object(n.a)(this.rendering),this.cmds.push(e)}strokeRect(e,t,r,n,a,o=1){this.addCmd({type:"strokeRect",x:e,y:t,w:r,h:n,color:a,thickness:o})}fillRect(e,t,r,n,a){this.addCmd({type:"fillRect",x:e,y:t,w:r,h:n,color:a})}strokeRoundedRect(e,t,r,n,a,o){this.addCmd({type:"strokeRoundedRect",x:e,y:t,w:r,h:n,r:a,color:o})}fillRoundedRect(e,t,r,n,a,o){this.addCmd({type:"fillRoundedRect",x:e,y:t,w:r,h:n,r:a,color:o})}strokeCircle(e,t,r,n){this.addCmd({type:"strokeCircle",x:e,y:t,r:r,color:n})}fillCircle(e,t,r,n){this.addCmd({type:"fillCircle",x:e,y:t,r:r,color:n})}line(e,t,r,n,a){this.addCmd({type:"line",x0:e,y0:t,x1:r,y1:n,color:a})}dashedLine(e,t,r,n,a,o){this.addCmd({type:"dashedLine",x0:e,y0:t,x1:r,y1:n,color:a,segments:o})}text(e,t,r,n,a){this.addCmd({type:"text",x:e,y:t,text:r,font:n,color:a})}cropRect(e,t,r,n,a){this.addCmd({type:"cropStart",x:e,y:t,w:r,h:n}),a(),this.addCmd({type:"cropEnd"})}place(e,t,{element:r}){this.addCmd({type:"place",x:e,y:t,element:r})}drawCustom(e){this.addCmd({type:"custom",fcn:e})}paint(e,t,r){for(const n of this.cmds)switch(n.type){case"strokeRect":r.fillStyle(n.color),r.strokeRect(e+n.x,t+n.y,n.w,n.h,n.thickness);break;case"fillRect":r.fillStyle(n.color),r.fillRect(e+n.x,t+n.y,n.w,n.h);break;case"strokeRoundedRect":r.strokeStyle(n.color),r.strokeRoundedRect(e+n.x,t+n.y,n.w,n.h,n.r,n.color);break;case"fillRoundedRect":r.fillStyle(n.color),r.fillRoundedRect(e+n.x,t+n.y,n.w,n.h,n.r,n.color);break;case"strokeCircle":r.strokeStyle(n.color),r.strokeCircle(e+n.x,t+n.y,n.r);break;case"fillCircle":r.fillStyle(n.color),r.fillCircle(e+n.x,t+n.y,n.r);break;case"line":r.strokeStyle(n.color),r.line(e+n.x0,t+n.y0,e+n.x1,t+n.y1);break;case"dashedLine":r.strokeStyle(n.color),r.dashedLine(e+n.x0,t+n.y0,e+n.x1,t+n.y1,n.segments);break;case"text":r.font(n.font),r.fillStyle(n.color),r.fillText(e+n.x,t+n.y,n.text);break;case"cropStart":r.save(),r.clipRect(e+n.x,t+n.y,n.w,n.h);break;case"cropEnd":r.restore();break;case"place":n.element.paint(e+n.x,t+n.y,r);break;case"custom":n.fcn(e,t,r.ctx);break;default:throw new Error(`Unknown render command: "${n.type}"`)}this.runEvent("paint"),this.new&&(this.runEvent("firstPaint"),this.new=!1)}}class s{constructor(e){this.parent=e,this.element=void 0,this.storeMap=new Map}reset(){Object(n.a)(!this.parent.rendering),this.element&&this.element.delete(),this.element=void 0;for(const e of this.storeMap.values())e.reset()}store(e){return Object(n.a)(void 0!==e),this.storeMap.has(e)||this.storeMap.set(e,new s(this.parent)),this.storeMap.get(e)}}class i{constructor(e){for(const t in e)this[t]=e[t]}}function c(e){return(t,...r)=>{if(t instanceof s){if(void 0===t.element&&(t.element=new o(t.parent,e,r)),t.element.fcn!==e)throw new Error("Storing different types of components");return t.element.args=r,t.element}return Object(n.a)(void 0===t||t instanceof o),new o(t,e,r)}}function u(e,t,r){if(e instanceof i)return e;if(e instanceof o)return e._render(t,r);throw new Error("render can only be called on an Element or a RenderedElem")}},function(e,t,r){"use strict";function n(...e){let t,r;return 1===e.length?(t=0,[r]=e):2===e.length&&([t,r]=e),Array.from(new Array(r-t),(e,r)=>t+r)}function a(e,t){const r=e/t;let a=0,o=0;const s=new Array(t);for(const e of n(t)){a+=r;const t=Math.round(a);s[e]=t-o,o=t}return s}function o(e){return e.reduce((e,t)=>e+t,0)}function s(e){return e.reduce((e,t)=>Math.min(e,t),1/0)}function i(e){return e.reduce((e,t)=>Math.max(e,t),-1/0)}function c(e,t,r){return Math.max(t,Math.min(r,e))}function u(e){let t=void 0,r=1/0;for(const[n,a]of e.entries())a<r&&(r=a,t=n);return t}function l(e){let t=void 0,r=-1/0;for(const[n,a]of e.entries())a>r&&(r=a,t=n);return t}function h(e,t=0){const r=Math.pow(10,t);return Math.round(r*e)/r}function f(e,t){const r=new Array(2*e.length-1);for(let t=0;t<e.length;t++)r[2*t]=e[t];for(let n=0;n<e.length-1;n++)r[2*n+1]=t;return r}function p(e,t){void 0===t&&(t=[]);for(const n of e)null!=(r=n)&&"function"==typeof r[Symbol.iterator]?p(n,t):t.push(n);var r;return t}function d(e){const t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=e[e.length-r-1];return t}function g(e){for(let t=0;t<e.length-1;t++){const r=e.length-t-1,n=Math.floor((e.length-t)*Math.random()),a=e[n];e[n]=e[r],e[r]=a}}function v(e){const t=[...e];return g(t),t}function m(e){if(1===e.length)return new Array(e[0]);const t=e.slice(1);return n(e[0]).map(()=>m(t))}r.r(t),r.d(t,"range",(function(){return n})),r.d(t,"intSplit",(function(){return a})),r.d(t,"sum",(function(){return o})),r.d(t,"min",(function(){return s})),r.d(t,"max",(function(){return i})),r.d(t,"clamp",(function(){return c})),r.d(t,"getMin",(function(){return u})),r.d(t,"getMax",(function(){return l})),r.d(t,"round",(function(){return h})),r.d(t,"listJoin",(function(){return f})),r.d(t,"flatten",(function(){return p})),r.d(t,"flip",(function(){return d})),r.d(t,"shuffleListInPlace",(function(){return g})),r.d(t,"shuffle",(function(){return v})),r.d(t,"makeTensor",(function(){return m}))},function(e,t,r){"use strict";r.d(t,"b",(function(){return a}));var n=r(2);r.d(t,"a",(function(){return n}));const a=()=>{r(23),r(24),r(25),r(32),r(33),r(34),r(26),r(27),r(35)}},function(e,t,r){"use strict";r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return l})),r.d(t,"f",(function(){return h})),r.d(t,"g",(function(){return f})),r.d(t,"e",(function(){return p})),r.d(t,"h",(function(){return d})),r.d(t,"a",(function(){return g})),r.d(t,"d",(function(){return v}));var n=r(2);let a=void 0,o=void 0,s=void 0;class i{constructor(e,t,r){this.fcn=e,this.args=t,this.parent=r,this.remembered=void 0===r,this.states=[],this.memory=[],this.values=new Map,this.new=!0,this.deleted=!1,this.reset()}reset(){this.stateI=0,this.memoryI=0,this.events=new Map,this.deleteFcns=[],this.render=[]}delete(){s===this&&(s=void 0),n.flip(this.memory).forEach(e=>{e.delete()}),n.flip(this.deleteFcns).forEach(e=>{e()}),this.deleted=!0}size(e,t){if(this.deleted)throw new Error("Trying to size a deleted element");this.reset(),this.w=e,this.h=t;const r=a;a=this;let n=this.fcn(...this.args);if(n instanceof i&&(n=n.size(this.w,this.h),h(n.w,n.h),v(0,0,n)),void 0===n&&(n={}),"object"!=typeof n)throw new Error("res has to be an object, not a "+typeof n);if(n.w=this.w,n.h=this.h,n.element=this,this.new=!1,this.stateI!==this.states.length)throw new Error("Must call UI.state the same number of times");return this.memoryI<this.memory.length&&(this.memory.slice(this.memoryI,this.memory.length).forEach(e=>{e.delete()}),this.memory=this.memory.slice(0,this.memoryI)),a=r,n=new c(n),n}addEvent(e,t){this.events.has(e)||this.events.set(e,[]),this.events.get(e).push(t)}runEvent(e,...t){if(!this.events.has(e))return;const r=o;o=this,this.events.get(e).forEach(e=>{e(...t)}),o=r}setValue(e,t){if(void 0===this.parent)throw Error("Unable to set value for id="+e);this.parent.values.has(e)?this.parent.values.set(e,t):this.parent.setValue(e,t)}getValue(e){if(void 0===this.parent)throw Error("Unable to find value for id="+e);return this.parent.values.has(e)?this.parent.values.get(e):this.parent.getValue(e)}provideValue(e,t){return this.values.has(e)||this.values.set(e,t),this.values.get(e)}getElementsAt(e,t,r){if(void 0===r&&(r=[]),e<0||e>=this.w||t<0||t>=this.h)return r;for(const n of this.render.filter(e=>"place"===e.type))n.element.getElementsAt(e-n.x,t-n.y,r);return r.push({x:e,y:t,element:this}),r}getElementMapAt(e,t){const r=this.getElementsAt(e,t);return new Map(r.map(({x:e,y:t,element:r})=>[r,{x:e,y:t}]))}getTopElementAt(e,t,r){if(!(e<0||e>=this.w||t<0||t>=this.h)){for(const a of n.flip(this.render).filter(e=>"place"===e.type)){const n=a.element.getTopElementAt(e-a.x,t-a.y,r);if(void 0!==n)return n}return this.events.has(r)?{x:e,y:t,element:this}:void 0}}paint(e,t,r){for(const n of this.render)switch(n.type){case"strokeRect":r.strokeStyle(n.color),r.strokeRect(e+n.x,t+n.y,n.w,n.h);break;case"fillRect":r.fillStyle(n.color),r.fillRect(e+n.x,t+n.y,n.w,n.h);break;case"strokeRoundedRect":r.strokeStyle(n.color),r.strokeRoundedRect(e+n.x,t+n.y,n.w,n.h,n.r,n.color);break;case"fillRoundedRect":r.fillStyle(n.color),r.fillRoundedRect(e+n.x,t+n.y,n.w,n.h,n.r,n.color);break;case"fillCircle":r.fillStyle(n.color),r.fillCircle(n.x,n.y,n.r);break;case"line":r.strokeStyle(n.color),r.line(e+n.x0,t+n.y0,e+n.x1,t+n.y1);break;case"text":r.font(n.font),r.fillStyle(n.color),r.fillText(e+n.x,t+n.y,n.text);break;case"cropStart":r.save(),r.clipRect(e+n.x,t+n.y,n.w,n.h);break;case"cropEnd":r.restore();break;case"place":n.element.paint(e+n.x,t+n.y,r);break;case"custom":n.fcn(e,t,r.ctx);break;default:throw new Error(`Unknown render command: "${n.type}"`)}this.runEvent("onDraw")}}class c{constructor(e){for(const t in e)this[t]=e[t]}}function u(e){return(...t)=>new i(e,t,a)}function l(){return{w:a.w,h:a.h}}function h(e,t){a.w=e,a.h=t}function f(e){if(!a.remembered)throw new Error("Element needs to be remembered to use UI.state");if(a.stateI>a.states.length)throw new Error("Should not be reached");if(a.stateI===a.states.length){if(!a.new)throw new Error("Must call UI.state the same number of times");a.states.push("function"==typeof e?e():e)}const t=a,r=a.stateI;a.states;const n=a.states[a.stateI];return a.stateI++,[n,function(e){if(void 0!==a)throw new Error("state cannot be set while creating an element");t.states[r]=e}]}function p(e){if(!a.remembered)throw new Error("Element needs to be remembered to use UI.remember");if(a.memoryI>a.memory.length)throw new Error("Should not be reached");if(!1!==e&&null!==e||(e=void 0),!(e instanceof i||void 0===e))throw new Error("element must be undefined or null or false or an Element");if(a.memoryI===a.memory.length)e.remembered=!0,a.memory.push(e);else{const t=a.memory[a.memoryI];void 0===e?t instanceof i&&(t.delete(),a.memory[a.memoryI]=void 0):t instanceof i&&e.fcn!==t.fcn&&(t.delete(),e.remembered=!0,a.memory[a.memoryI]=e)}return a.memory[a.memoryI].args=e.args,e=a.memory[a.memoryI],a.memoryI++,e}function d(e,t,r,n,o){a.render.push({type:"strokeRect",x:e,y:t,w:r,h:n,color:o})}function g(e,t,r,n,o){a.render.push({type:"fillRect",x:e,y:t,w:r,h:n,color:o})}function v(e,t,{element:r}){a.render.push({type:"place",x:e,y:t,element:r})}},function(e,t,r){"use strict";function n(e){if(!e)throw new Error("Assertion failed")}function a(e,t){Object.defineProperty(t,"name",{value:e});try{const r=t();r instanceof Promise&&r.then(()=>{}).catch(t=>{throw console.log("FAILED: "+e),t})}catch(t){throw console.log("FAILED: "+e),t}}r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}))},function(e,t,r){"use strict";function n(e,t,r=a){if("object"!=typeof e||"object"!=typeof t)return!1;const n=Object.keys(e).filter(t=>void 0!==e[t]),o=Object.keys(t).filter(e=>void 0!==t[e]);if(n.length!==o.length)return!1;for(const a of n)if(!r(e[a],t[a]))return!1;return!0}function a(e,t){return e===t||n(e,t)}r.d(t,"a",(function(){return a}))},function(e,t,r){
/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */
e.exports=function(){"use strict";for(var e=function(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=1),e<t?t:e>r?r:e},t={},r=0,n=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];r<n.length;r+=1){var a=n[r];t["[object "+a+"]"]=a.toLowerCase()}var o=function(e){return t[Object.prototype.toString.call(e)]||"object"},s=Math.PI,i={clip_rgb:function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var r=0;r<=3;r++)r<3?((t[r]<0||t[r]>255)&&(t._clipped=!0),t[r]=e(t[r],0,255)):3===r&&(t[r]=e(t[r],0,1));return t},limit:e,type:o,unpack:function(e,t){return void 0===t&&(t=null),e.length>=3?Array.prototype.slice.call(e):"object"==o(e[0])&&t?t.split("").filter((function(t){return void 0!==e[0][t]})).map((function(t){return e[0][t]})):e[0]},last:function(e){if(e.length<2)return null;var t=e.length-1;return"string"==o(e[t])?e[t].toLowerCase():null},PI:s,TWOPI:2*s,PITHIRD:s/3,DEG2RAD:s/180,RAD2DEG:180/s},c={format:{},autodetect:[]},u=i.last,l=i.clip_rgb,h=i.type,f=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=this;if("object"===h(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];var n=u(e),a=!1;if(!n){a=!0,c.sorted||(c.autodetect=c.autodetect.sort((function(e,t){return t.p-e.p})),c.sorted=!0);for(var o=0,s=c.autodetect;o<s.length;o+=1){var i=s[o];if(n=i.test.apply(i,e))break}}if(!c.format[n])throw new Error("unknown format: "+e);var f=c.format[n].apply(null,a?e:e.slice(0,-1));r._rgb=l(f),3===r._rgb.length&&r._rgb.push(1)};f.prototype.toString=function(){return"function"==h(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var p=f,d=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(d.Color,[null].concat(e)))};d.Color=p,d.version="2.1.0";var g=d,v=i.unpack,m=Math.max,b=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=v(e,"rgb"),n=r[0],a=r[1],o=r[2],s=1-m(n/=255,m(a/=255,o/=255)),i=s<1?1/(1-s):0,c=(1-n-s)*i,u=(1-a-s)*i,l=(1-o-s)*i;return[c,u,l,s]},y=i.unpack,w=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(e=y(e,"cmyk"))[0],n=e[1],a=e[2],o=e[3],s=e.length>4?e[4]:1;return 1===o?[0,0,0,s]:[r>=1?0:255*(1-r)*(1-o),n>=1?0:255*(1-n)*(1-o),a>=1?0:255*(1-a)*(1-o),s]},x=i.unpack,S=i.type;p.prototype.cmyk=function(){return b(this._rgb)},g.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["cmyk"])))},c.format.cmyk=w,c.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=x(e,"cmyk"),"array"===S(e)&&4===e.length)return"cmyk"}});var k=i.unpack,O=i.last,E=function(e){return Math.round(100*e)/100},T=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=k(e,"hsla"),n=O(e)||"lsa";return r[0]=E(r[0]||0),r[1]=E(100*r[1])+"%",r[2]=E(100*r[2])+"%","hsla"===n||r.length>3&&r[3]<1?(r[3]=r.length>3?r[3]:1,n="hsla"):r.length=3,n+"("+r.join(",")+")"},U=i.unpack,R=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(e=U(e,"rgba"))[0],n=e[1],a=e[2];r/=255,n/=255,a/=255;var o,s,i=Math.min(r,n,a),c=Math.max(r,n,a),u=(c+i)/2;return c===i?(o=0,s=Number.NaN):o=u<.5?(c-i)/(c+i):(c-i)/(2-c-i),r==c?s=(n-a)/(c-i):n==c?s=2+(a-r)/(c-i):a==c&&(s=4+(r-n)/(c-i)),(s*=60)<0&&(s+=360),e.length>3&&void 0!==e[3]?[s,o,u,e[3]]:[s,o,u]},M=i.unpack,C=i.last,L=Math.round,D=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=M(e,"rgba"),n=C(e)||"rgb";return"hsl"==n.substr(0,3)?T(R(r),n):(r[0]=L(r[0]),r[1]=L(r[1]),r[2]=L(r[2]),("rgba"===n||r.length>3&&r[3]<1)&&(r[3]=r.length>3?r[3]:1,n="rgba"),n+"("+r.slice(0,"rgb"===n?3:4).join(",")+")")},A=i.unpack,I=Math.round,j=function(){for(var e,t=[],r=arguments.length;r--;)t[r]=arguments[r];var n,a,o,s=(t=A(t,"hsl"))[0],i=t[1],c=t[2];if(0===i)n=a=o=255*c;else{var u=[0,0,0],l=[0,0,0],h=c<.5?c*(1+i):c+i-c*i,f=2*c-h,p=s/360;u[0]=p+1/3,u[1]=p,u[2]=p-1/3;for(var d=0;d<3;d++)u[d]<0&&(u[d]+=1),u[d]>1&&(u[d]-=1),6*u[d]<1?l[d]=f+6*(h-f)*u[d]:2*u[d]<1?l[d]=h:3*u[d]<2?l[d]=f+(h-f)*(2/3-u[d])*6:l[d]=f;n=(e=[I(255*l[0]),I(255*l[1]),I(255*l[2])])[0],a=e[1],o=e[2]}return t.length>3?[n,a,o,t[3]]:[n,a,o,1]},P=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,B=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,N=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,F=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,G=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,z=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,_=Math.round,H=function(e){var t;if(e=e.toLowerCase().trim(),c.format.named)try{return c.format.named(e)}catch(e){}if(t=e.match(P)){for(var r=t.slice(1,4),n=0;n<3;n++)r[n]=+r[n];return r[3]=1,r}if(t=e.match(B)){for(var a=t.slice(1,5),o=0;o<4;o++)a[o]=+a[o];return a}if(t=e.match(N)){for(var s=t.slice(1,4),i=0;i<3;i++)s[i]=_(2.55*s[i]);return s[3]=1,s}if(t=e.match(F)){for(var u=t.slice(1,5),l=0;l<3;l++)u[l]=_(2.55*u[l]);return u[3]=+u[3],u}if(t=e.match(G)){var h=t.slice(1,4);h[1]*=.01,h[2]*=.01;var f=j(h);return f[3]=1,f}if(t=e.match(z)){var p=t.slice(1,4);p[1]*=.01,p[2]*=.01;var d=j(p);return d[3]=+t[4],d}};H.test=function(e){return P.test(e)||B.test(e)||N.test(e)||F.test(e)||G.test(e)||z.test(e)};var V=H,q=i.type;p.prototype.css=function(e){return D(this._rgb,e)},g.css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["css"])))},c.format.css=V,c.autodetect.push({p:5,test:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if(!t.length&&"string"===q(e)&&V.test(e))return"css"}});var W=i.unpack;c.format.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=W(e,"rgba");return r[0]*=255,r[1]*=255,r[2]*=255,r},g.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["gl"])))},p.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};var Y=i.unpack,X=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,n=Y(e,"rgb"),a=n[0],o=n[1],s=n[2],i=Math.min(a,o,s),c=Math.max(a,o,s),u=c-i,l=100*u/255,h=i/(255-u)*100;return 0===u?r=Number.NaN:(a===c&&(r=(o-s)/u),o===c&&(r=2+(s-a)/u),s===c&&(r=4+(a-o)/u),(r*=60)<0&&(r+=360)),[r,l,h]},Z=i.unpack,$=Math.floor,K=function(){for(var e,t,r,n,a,o,s=[],i=arguments.length;i--;)s[i]=arguments[i];var c,u,l,h=(s=Z(s,"hcg"))[0],f=s[1],p=s[2];p*=255;var d=255*f;if(0===f)c=u=l=p;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var g=$(h/=60),v=h-g,m=p*(1-f),b=m+d*(1-v),y=m+d*v,w=m+d;switch(g){case 0:c=(e=[w,y,m])[0],u=e[1],l=e[2];break;case 1:c=(t=[b,w,m])[0],u=t[1],l=t[2];break;case 2:c=(r=[m,w,y])[0],u=r[1],l=r[2];break;case 3:c=(n=[m,b,w])[0],u=n[1],l=n[2];break;case 4:c=(a=[y,m,w])[0],u=a[1],l=a[2];break;case 5:c=(o=[w,m,b])[0],u=o[1],l=o[2]}}return[c,u,l,s.length>3?s[3]:1]},Q=i.unpack,J=i.type;p.prototype.hcg=function(){return X(this._rgb)},g.hcg=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hcg"])))},c.format.hcg=K,c.autodetect.push({p:1,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Q(e,"hcg"),"array"===J(e)&&3===e.length)return"hcg"}});var ee=i.unpack,te=i.last,re=Math.round,ne=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=ee(e,"rgba"),n=r[0],a=r[1],o=r[2],s=r[3],i=te(e)||"auto";void 0===s&&(s=1),"auto"===i&&(i=s<1?"rgba":"rgb");var c=(n=re(n))<<16|(a=re(a))<<8|(o=re(o)),u="000000"+c.toString(16);u=u.substr(u.length-6);var l="0"+re(255*s).toString(16);switch(l=l.substr(l.length-2),i.toLowerCase()){case"rgba":return"#"+u+l;case"argb":return"#"+l+u;default:return"#"+u}},ae=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,oe=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,se=function(e){if(e.match(ae)){4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e,16);return[t>>16,t>>8&255,255&t,1]}if(e.match(oe)){5!==e.length&&9!==e.length||(e=e.substr(1)),4===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);var r=parseInt(e,16);return[r>>24&255,r>>16&255,r>>8&255,Math.round((255&r)/255*100)/100]}throw new Error("unknown hex color: "+e)},ie=i.type;p.prototype.hex=function(e){return ne(this._rgb,e)},g.hex=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hex"])))},c.format.hex=se,c.autodetect.push({p:4,test:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if(!t.length&&"string"===ie(e)&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});var ce=i.unpack,ue=i.TWOPI,le=Math.min,he=Math.sqrt,fe=Math.acos,pe=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,n=ce(e,"rgb"),a=n[0],o=n[1],s=n[2],i=le(a/=255,o/=255,s/=255),c=(a+o+s)/3,u=c>0?1-i/c:0;return 0===u?r=NaN:(r=(a-o+(a-s))/2,r/=he((a-o)*(a-o)+(a-s)*(o-s)),r=fe(r),s>o&&(r=ue-r),r/=ue),[360*r,u,c]},de=i.unpack,ge=i.limit,ve=i.TWOPI,me=i.PITHIRD,be=Math.cos,ye=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,n,a,o=(e=de(e,"hsi"))[0],s=e[1],i=e[2];return isNaN(o)&&(o=0),isNaN(s)&&(s=0),o>360&&(o-=360),o<0&&(o+=360),(o/=360)<1/3?n=1-((a=(1-s)/3)+(r=(1+s*be(ve*o)/be(me-ve*o))/3)):o<2/3?a=1-((r=(1-s)/3)+(n=(1+s*be(ve*(o-=1/3))/be(me-ve*o))/3)):r=1-((n=(1-s)/3)+(a=(1+s*be(ve*(o-=2/3))/be(me-ve*o))/3)),[255*(r=ge(i*r*3)),255*(n=ge(i*n*3)),255*(a=ge(i*a*3)),e.length>3?e[3]:1]},we=i.unpack,xe=i.type;p.prototype.hsi=function(){return pe(this._rgb)},g.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hsi"])))},c.format.hsi=ye,c.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=we(e,"hsi"),"array"===xe(e)&&3===e.length)return"hsi"}});var Se=i.unpack,ke=i.type;p.prototype.hsl=function(){return R(this._rgb)},g.hsl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hsl"])))},c.format.hsl=j,c.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Se(e,"hsl"),"array"===ke(e)&&3===e.length)return"hsl"}});var Oe=i.unpack,Ee=Math.min,Te=Math.max,Ue=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,n,a,o=(e=Oe(e,"rgb"))[0],s=e[1],i=e[2],c=Ee(o,s,i),u=Te(o,s,i),l=u-c;return a=u/255,0===u?(r=Number.NaN,n=0):(n=l/u,o===u&&(r=(s-i)/l),s===u&&(r=2+(i-o)/l),i===u&&(r=4+(o-s)/l),(r*=60)<0&&(r+=360)),[r,n,a]},Re=i.unpack,Me=Math.floor,Ce=function(){for(var e,t,r,n,a,o,s=[],i=arguments.length;i--;)s[i]=arguments[i];var c,u,l,h=(s=Re(s,"hsv"))[0],f=s[1],p=s[2];if(p*=255,0===f)c=u=l=p;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var d=Me(h/=60),g=h-d,v=p*(1-f),m=p*(1-f*g),b=p*(1-f*(1-g));switch(d){case 0:c=(e=[p,b,v])[0],u=e[1],l=e[2];break;case 1:c=(t=[m,p,v])[0],u=t[1],l=t[2];break;case 2:c=(r=[v,p,b])[0],u=r[1],l=r[2];break;case 3:c=(n=[v,m,p])[0],u=n[1],l=n[2];break;case 4:c=(a=[b,v,p])[0],u=a[1],l=a[2];break;case 5:c=(o=[p,v,m])[0],u=o[1],l=o[2]}}return[c,u,l,s.length>3?s[3]:1]},Le=i.unpack,De=i.type;p.prototype.hsv=function(){return Ue(this._rgb)},g.hsv=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hsv"])))},c.format.hsv=Ce,c.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Le(e,"hsv"),"array"===De(e)&&3===e.length)return"hsv"}});var Ae=18,Ie=.95047,je=1,Pe=1.08883,Be=.137931034,Ne=.206896552,Fe=.12841855,Ge=.008856452,ze=i.unpack,_e=Math.pow,He=function(e){return(e/=255)<=.04045?e/12.92:_e((e+.055)/1.055,2.4)},Ve=function(e){return e>Ge?_e(e,1/3):e/Fe+Be},qe=function(e,t,r){return e=He(e),t=He(t),r=He(r),[Ve((.4124564*e+.3575761*t+.1804375*r)/Ie),Ve((.2126729*e+.7151522*t+.072175*r)/je),Ve((.0193339*e+.119192*t+.9503041*r)/Pe)]},We=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=ze(e,"rgb"),n=r[0],a=r[1],o=r[2],s=qe(n,a,o),i=s[0],c=s[1],u=s[2],l=116*c-16;return[l<0?0:l,500*(i-c),200*(c-u)]},Ye=i.unpack,Xe=Math.pow,Ze=function(e){return 255*(e<=.00304?12.92*e:1.055*Xe(e,1/2.4)-.055)},$e=function(e){return e>Ne?e*e*e:Fe*(e-Be)},Ke=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r,n,a,o=(e=Ye(e,"lab"))[0],s=e[1],i=e[2];return n=(o+16)/116,r=isNaN(s)?n:n+s/500,a=isNaN(i)?n:n-i/200,n=je*$e(n),r=Ie*$e(r),a=Pe*$e(a),[Ze(3.2404542*r-1.5371385*n-.4985314*a),Ze(-.969266*r+1.8760108*n+.041556*a),Ze(.0556434*r-.2040259*n+1.0572252*a),e.length>3?e[3]:1]},Qe=i.unpack,Je=i.type;p.prototype.lab=function(){return We(this._rgb)},g.lab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["lab"])))},c.format.lab=Ke,c.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Qe(e,"lab"),"array"===Je(e)&&3===e.length)return"lab"}});var et=i.unpack,tt=i.RAD2DEG,rt=Math.sqrt,nt=Math.atan2,at=Math.round,ot=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=et(e,"lab"),n=r[0],a=r[1],o=r[2],s=rt(a*a+o*o),i=(nt(o,a)*tt+360)%360;return 0===at(1e4*s)&&(i=Number.NaN),[n,s,i]},st=i.unpack,it=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=st(e,"rgb"),n=r[0],a=r[1],o=r[2],s=We(n,a,o),i=s[0],c=s[1],u=s[2];return ot(i,c,u)},ct=i.unpack,ut=i.DEG2RAD,lt=Math.sin,ht=Math.cos,ft=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=ct(e,"lch"),n=r[0],a=r[1],o=r[2];return isNaN(o)&&(o=0),[n,ht(o*=ut)*a,lt(o)*a]},pt=i.unpack,dt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=(e=pt(e,"lch"))[0],n=e[1],a=e[2],o=ft(r,n,a),s=o[0],i=o[1],c=o[2],u=Ke(s,i,c),l=u[0],h=u[1],f=u[2];return[l,h,f,e.length>3?e[3]:1]},gt=i.unpack,vt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=gt(e,"hcl").reverse();return dt.apply(void 0,r)},mt=i.unpack,bt=i.type;p.prototype.lch=function(){return it(this._rgb)},p.prototype.hcl=function(){return it(this._rgb).reverse()},g.lch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["lch"])))},g.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["hcl"])))},c.format.lch=dt,c.format.hcl=vt,["lch","hcl"].forEach((function(e){return c.autodetect.push({p:2,test:function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(t=mt(t,e),"array"===bt(t)&&3===t.length)return e}})}));var yt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},wt=i.type;p.prototype.name=function(){for(var e=ne(this._rgb,"rgb"),t=0,r=Object.keys(yt);t<r.length;t+=1){var n=r[t];if(yt[n]===e)return n.toLowerCase()}return e},c.format.named=function(e){if(e=e.toLowerCase(),yt[e])return se(yt[e]);throw new Error("unknown color name: "+e)},c.autodetect.push({p:5,test:function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];if(!t.length&&"string"===wt(e)&&yt[e.toLowerCase()])return"named"}});var xt=i.unpack,St=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=xt(e,"rgb"),n=r[0],a=r[1],o=r[2];return(n<<16)+(a<<8)+o},kt=i.type,Ot=function(e){if("number"==kt(e)&&e>=0&&e<=16777215)return[e>>16,e>>8&255,255&e,1];throw new Error("unknown num color: "+e)},Et=i.type;p.prototype.num=function(){return St(this._rgb)},g.num=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["num"])))},c.format.num=Ot,c.autodetect.push({p:5,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(1===e.length&&"number"===Et(e[0])&&e[0]>=0&&e[0]<=16777215)return"num"}});var Tt=i.unpack,Ut=i.type,Rt=Math.round;p.prototype.rgb=function(e){return void 0===e&&(e=!0),!1===e?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Rt)},p.prototype.rgba=function(e){return void 0===e&&(e=!0),this._rgb.slice(0,4).map((function(t,r){return r<3?!1===e?t:Rt(t):t}))},g.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["rgb"])))},c.format.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var r=Tt(e,"rgba");return void 0===r[3]&&(r[3]=1),r},c.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Tt(e,"rgba"),"array"===Ut(e)&&(3===e.length||4===e.length&&"number"==Ut(e[3])&&e[3]>=0&&e[3]<=1))return"rgb"}});var Mt=Math.log,Ct=function(e){var t,r,n,a=e/100;return a<66?(t=255,r=-155.25485562709179-.44596950469579133*(r=a-2)+104.49216199393888*Mt(r),n=a<20?0:.8274096064007395*(n=a-10)-254.76935184120902+115.67994401066147*Mt(n)):(t=351.97690566805693+.114206453784165*(t=a-55)-40.25366309332127*Mt(t),r=325.4494125711974+.07943456536662342*(r=a-50)-28.0852963507957*Mt(r),n=255),[t,r,n,1]},Lt=i.unpack,Dt=Math.round,At=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var r,n=Lt(e,"rgb"),a=n[0],o=n[2],s=1e3,i=4e4,c=.4;i-s>c;){var u=Ct(r=.5*(i+s));u[2]/u[0]>=o/a?i=r:s=r}return Dt(r)};p.prototype.temp=p.prototype.kelvin=p.prototype.temperature=function(){return At(this._rgb)},g.temp=g.kelvin=g.temperature=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p,[null].concat(e,["temp"])))},c.format.temp=c.format.kelvin=c.format.temperature=Ct;var It=i.type;p.prototype.alpha=function(e,t){return void 0===t&&(t=!1),void 0!==e&&"number"===It(e)?t?(this._rgb[3]=e,this):new p([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]},p.prototype.clipped=function(){return this._rgb._clipped||!1},p.prototype.darken=function(e){void 0===e&&(e=1);var t=this.lab();return t[0]-=Ae*e,new p(t,"lab").alpha(this.alpha(),!0)},p.prototype.brighten=function(e){return void 0===e&&(e=1),this.darken(-e)},p.prototype.darker=p.prototype.darken,p.prototype.brighter=p.prototype.brighten,p.prototype.get=function(e){var t=e.split("."),r=t[0],n=t[1],a=this[r]();if(n){var o=r.indexOf(n);if(o>-1)return a[o];throw new Error("unknown channel "+n+" in mode "+r)}return a};var jt=i.type,Pt=Math.pow;p.prototype.luminance=function(e){if(void 0!==e&&"number"===jt(e)){if(0===e)return new p([0,0,0,this._rgb[3]],"rgb");if(1===e)return new p([255,255,255,this._rgb[3]],"rgb");var t=this.luminance(),r=20,n=function(t,a){var o=t.interpolate(a,.5,"rgb"),s=o.luminance();return Math.abs(e-s)<1e-7||!r--?o:s>e?n(t,o):n(o,a)},a=(t>e?n(new p([0,0,0]),this):n(this,new p([255,255,255]))).rgb();return new p(a.concat([this._rgb[3]]))}return Bt.apply(void 0,this._rgb.slice(0,3))};var Bt=function(e,t,r){return.2126*(e=Nt(e))+.7152*(t=Nt(t))+.0722*(r=Nt(r))},Nt=function(e){return(e/=255)<=.03928?e/12.92:Pt((e+.055)/1.055,2.4)},Ft={},Gt=i.type,zt=function(e,t,r){void 0===r&&(r=.5);for(var n=[],a=arguments.length-3;a-- >0;)n[a]=arguments[a+3];var o=n[0]||"lrgb";if(Ft[o]||n.length||(o=Object.keys(Ft)[0]),!Ft[o])throw new Error("interpolation mode "+o+" is not defined");return"object"!==Gt(e)&&(e=new p(e)),"object"!==Gt(t)&&(t=new p(t)),Ft[o](e,t,r).alpha(e.alpha()+r*(t.alpha()-e.alpha()))};p.prototype.mix=p.prototype.interpolate=function(e,t){void 0===t&&(t=.5);for(var r=[],n=arguments.length-2;n-- >0;)r[n]=arguments[n+2];return zt.apply(void 0,[this,e,t].concat(r))},p.prototype.premultiply=function(e){void 0===e&&(e=!1);var t=this._rgb,r=t[3];return e?(this._rgb=[t[0]*r,t[1]*r,t[2]*r,r],this):new p([t[0]*r,t[1]*r,t[2]*r,r],"rgb")},p.prototype.saturate=function(e){void 0===e&&(e=1);var t=this.lch();return t[1]+=Ae*e,t[1]<0&&(t[1]=0),new p(t,"lch").alpha(this.alpha(),!0)},p.prototype.desaturate=function(e){return void 0===e&&(e=1),this.saturate(-e)};var _t=i.type;p.prototype.set=function(e,t,r){void 0===r&&(r=!1);var n=e.split("."),a=n[0],o=n[1],s=this[a]();if(o){var i=a.indexOf(o);if(i>-1){if("string"==_t(t))switch(t.charAt(0)){case"+":case"-":s[i]+=+t;break;case"*":s[i]*=+t.substr(1);break;case"/":s[i]/=+t.substr(1);break;default:s[i]=+t}else{if("number"!==_t(t))throw new Error("unsupported value for Color.set");s[i]=t}var c=new p(s,a);return r?(this._rgb=c._rgb,this):c}throw new Error("unknown channel "+o+" in mode "+a)}return s},Ft.rgb=function(e,t,r){var n=e._rgb,a=t._rgb;return new p(n[0]+r*(a[0]-n[0]),n[1]+r*(a[1]-n[1]),n[2]+r*(a[2]-n[2]),"rgb")};var Ht=Math.sqrt,Vt=Math.pow;Ft.lrgb=function(e,t,r){var n=e._rgb,a=n[0],o=n[1],s=n[2],i=t._rgb,c=i[0],u=i[1],l=i[2];return new p(Ht(Vt(a,2)*(1-r)+Vt(c,2)*r),Ht(Vt(o,2)*(1-r)+Vt(u,2)*r),Ht(Vt(s,2)*(1-r)+Vt(l,2)*r),"rgb")},Ft.lab=function(e,t,r){var n=e.lab(),a=t.lab();return new p(n[0]+r*(a[0]-n[0]),n[1]+r*(a[1]-n[1]),n[2]+r*(a[2]-n[2]),"lab")};var qt=function(e,t,r,n){var a,o,s,i,c,u,l,h,f,d,g,v;return"hsl"===n?(s=e.hsl(),i=t.hsl()):"hsv"===n?(s=e.hsv(),i=t.hsv()):"hcg"===n?(s=e.hcg(),i=t.hcg()):"hsi"===n?(s=e.hsi(),i=t.hsi()):"lch"!==n&&"hcl"!==n||(n="hcl",s=e.hcl(),i=t.hcl()),"h"===n.substr(0,1)&&(c=(a=s)[0],l=a[1],f=a[2],u=(o=i)[0],h=o[1],d=o[2]),isNaN(c)||isNaN(u)?isNaN(c)?isNaN(u)?v=Number.NaN:(v=u,1!=f&&0!=f||"hsv"==n||(g=h)):(v=c,1!=d&&0!=d||"hsv"==n||(g=l)):v=c+r*(u>c&&u-c>180?u-(c+360):u<c&&c-u>180?u+360-c:u-c),void 0===g&&(g=l+r*(h-l)),new p([v,g,f+r*(d-f)],n)},Wt=function(e,t,r){return qt(e,t,r,"lch")};Ft.lch=Wt,Ft.hcl=Wt,Ft.num=function(e,t,r){var n=e.num(),a=t.num();return new p(n+r*(a-n),"num")},Ft.hcg=function(e,t,r){return qt(e,t,r,"hcg")},Ft.hsi=function(e,t,r){return qt(e,t,r,"hsi")},Ft.hsl=function(e,t,r){return qt(e,t,r,"hsl")},Ft.hsv=function(e,t,r){return qt(e,t,r,"hsv")};var Yt=i.clip_rgb,Xt=Math.pow,Zt=Math.sqrt,$t=Math.PI,Kt=Math.cos,Qt=Math.sin,Jt=Math.atan2,er=function(e,t){for(var r=e.length,n=[0,0,0,0],a=0;a<e.length;a++){var o=e[a],s=t[a]/r,i=o._rgb;n[0]+=Xt(i[0],2)*s,n[1]+=Xt(i[1],2)*s,n[2]+=Xt(i[2],2)*s,n[3]+=i[3]*s}return n[0]=Zt(n[0]),n[1]=Zt(n[1]),n[2]=Zt(n[2]),n[3]>.9999999&&(n[3]=1),new p(Yt(n))},tr=i.type,rr=Math.pow,nr=function(e){var t="rgb",r=g("#ccc"),n=0,a=[0,1],o=[],s=[0,0],i=!1,c=[],u=!1,l=0,h=1,f=!1,p={},d=!0,v=1,m=function(e){if((e=e||["#fff","#000"])&&"string"===tr(e)&&g.brewer&&g.brewer[e.toLowerCase()]&&(e=g.brewer[e.toLowerCase()]),"array"===tr(e)){1===e.length&&(e=[e[0],e[0]]),e=e.slice(0);for(var t=0;t<e.length;t++)e[t]=g(e[t]);o.length=0;for(var r=0;r<e.length;r++)o.push(r/(e.length-1))}return x(),c=e},b=function(e){return e},y=function(e){return e},w=function(e,n){var a,u;if(null==n&&(n=!1),isNaN(e)||null===e)return r;u=n?e:i&&i.length>2?function(e){if(null!=i){for(var t=i.length-1,r=0;r<t&&e>=i[r];)r++;return r-1}return 0}(e)/(i.length-2):h!==l?(e-l)/(h-l):1,u=y(u),n||(u=b(u)),1!==v&&(u=rr(u,v)),u=s[0]+u*(1-s[0]-s[1]),u=Math.min(1,Math.max(0,u));var f=Math.floor(1e4*u);if(d&&p[f])a=p[f];else{if("array"===tr(c))for(var m=0;m<o.length;m++){var w=o[m];if(u<=w){a=c[m];break}if(u>=w&&m===o.length-1){a=c[m];break}if(u>w&&u<o[m+1]){u=(u-w)/(o[m+1]-w),a=g.interpolate(c[m],c[m+1],u,t);break}}else"function"===tr(c)&&(a=c(u));d&&(p[f]=a)}return a},x=function(){return p={}};m(e);var S=function(e){var t=g(w(e));return u&&t[u]?t[u]():t};return S.classes=function(e){if(null!=e){if("array"===tr(e))i=e,a=[e[0],e[e.length-1]];else{var t=g.analyze(a);i=0===e?[t.min,t.max]:g.limits(t,"e",e)}return S}return i},S.domain=function(e){if(!arguments.length)return a;l=e[0],h=e[e.length-1],o=[];var t=c.length;if(e.length===t&&l!==h)for(var r=0,n=Array.from(e);r<n.length;r+=1){var s=n[r];o.push((s-l)/(h-l))}else{for(var i=0;i<t;i++)o.push(i/(t-1));if(e.length>2){var u=e.map((function(t,r){return r/(e.length-1)})),f=e.map((function(e){return(e-l)/(h-l)}));f.every((function(e,t){return u[t]===e}))||(y=function(e){if(e<=0||e>=1)return e;for(var t=0;e>=f[t+1];)t++;var r=(e-f[t])/(f[t+1]-f[t]);return u[t]+r*(u[t+1]-u[t])})}}return a=[l,h],S},S.mode=function(e){return arguments.length?(t=e,x(),S):t},S.range=function(e,t){return m(e),S},S.out=function(e){return u=e,S},S.spread=function(e){return arguments.length?(n=e,S):n},S.correctLightness=function(e){return null==e&&(e=!0),f=e,x(),b=f?function(e){for(var t=w(0,!0).lab()[0],r=w(1,!0).lab()[0],n=t>r,a=w(e,!0).lab()[0],o=t+(r-t)*e,s=a-o,i=0,c=1,u=20;Math.abs(s)>.01&&u-- >0;)n&&(s*=-1),s<0?(i=e,e+=.5*(c-e)):(c=e,e+=.5*(i-e)),a=w(e,!0).lab()[0],s=a-o;return e}:function(e){return e},S},S.padding=function(e){return null!=e?("number"===tr(e)&&(e=[e,e]),s=e,S):s},S.colors=function(t,r){arguments.length<2&&(r="hex");var n=[];if(0===arguments.length)n=c.slice(0);else if(1===t)n=[S(.5)];else if(t>1){var o=a[0],s=a[1]-o;n=ar(0,t,!1).map((function(e){return S(o+e/(t-1)*s)}))}else{e=[];var u=[];if(i&&i.length>2)for(var l=1,h=i.length,f=1<=h;f?l<h:l>h;f?l++:l--)u.push(.5*(i[l-1]+i[l]));else u=a;n=u.map((function(e){return S(e)}))}return g[r]&&(n=n.map((function(e){return e[r]()}))),n},S.cache=function(e){return null!=e?(d=e,S):d},S.gamma=function(e){return null!=e?(v=e,S):v},S.nodata=function(e){return null!=e?(r=g(e),S):r},S};function ar(e,t,r){for(var n=[],a=e<t,o=r?a?t+1:t-1:t,s=e;a?s<o:s>o;a?s++:s--)n.push(s);return n}var or=function(e){var t,r,n,a,o,s,i;if(2===(e=e.map((function(e){return new p(e)}))).length)t=e.map((function(e){return e.lab()})),o=t[0],s=t[1],a=function(e){var t=[0,1,2].map((function(t){return o[t]+e*(s[t]-o[t])}));return new p(t,"lab")};else if(3===e.length)r=e.map((function(e){return e.lab()})),o=r[0],s=r[1],i=r[2],a=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*o[t]+2*(1-e)*e*s[t]+e*e*i[t]}));return new p(t,"lab")};else if(4===e.length){var c;n=e.map((function(e){return e.lab()})),o=n[0],s=n[1],i=n[2],c=n[3],a=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*(1-e)*o[t]+3*(1-e)*(1-e)*e*s[t]+3*(1-e)*e*e*i[t]+e*e*e*c[t]}));return new p(t,"lab")}}else if(5===e.length){var u=or(e.slice(0,3)),l=or(e.slice(2,5));a=function(e){return e<.5?u(2*e):l(2*(e-.5))}}return a},sr=function(e,t,r){if(!sr[r])throw new Error("unknown blend mode "+r);return sr[r](e,t)},ir=function(e){return function(t,r){var n=g(r).rgb(),a=g(t).rgb();return g.rgb(e(n,a))}},cr=function(e){return function(t,r){var n=[];return n[0]=e(t[0],r[0]),n[1]=e(t[1],r[1]),n[2]=e(t[2],r[2]),n}};sr.normal=ir(cr((function(e){return e}))),sr.multiply=ir(cr((function(e,t){return e*t/255}))),sr.screen=ir(cr((function(e,t){return 255*(1-(1-e/255)*(1-t/255))}))),sr.overlay=ir(cr((function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))}))),sr.darken=ir(cr((function(e,t){return e>t?t:e}))),sr.lighten=ir(cr((function(e,t){return e>t?e:t}))),sr.dodge=ir(cr((function(e,t){return 255===e||(e=t/255*255/(1-e/255))>255?255:e}))),sr.burn=ir(cr((function(e,t){return 255*(1-(1-t/255)/(e/255))})));for(var ur=sr,lr=i.type,hr=i.clip_rgb,fr=i.TWOPI,pr=Math.pow,dr=Math.sin,gr=Math.cos,vr=Math.floor,mr=Math.random,br=Math.log,yr=Math.pow,wr=Math.floor,xr=Math.abs,Sr=function(e,t){void 0===t&&(t=null);var r={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===o(e)&&(e=Object.values(e)),e.forEach((function(e){t&&"object"===o(e)&&(e=e[t]),null==e||isNaN(e)||(r.values.push(e),r.sum+=e,e<r.min&&(r.min=e),e>r.max&&(r.max=e),r.count+=1)})),r.domain=[r.min,r.max],r.limits=function(e,t){return kr(r,e,t)},r},kr=function(e,t,r){void 0===t&&(t="equal"),void 0===r&&(r=7),"array"==o(e)&&(e=Sr(e));var n=e.min,a=e.max,s=e.values.sort((function(e,t){return e-t}));if(1===r)return[n,a];var i=[];if("c"===t.substr(0,1)&&(i.push(n),i.push(a)),"e"===t.substr(0,1)){i.push(n);for(var c=1;c<r;c++)i.push(n+c/r*(a-n));i.push(a)}else if("l"===t.substr(0,1)){if(n<=0)throw new Error("Logarithmic scales are only possible for values > 0");var u=Math.LOG10E*br(n),l=Math.LOG10E*br(a);i.push(n);for(var h=1;h<r;h++)i.push(yr(10,u+h/r*(l-u)));i.push(a)}else if("q"===t.substr(0,1)){i.push(n);for(var f=1;f<r;f++){var p=(s.length-1)*f/r,d=wr(p);if(d===p)i.push(s[d]);else{var g=p-d;i.push(s[d]*(1-g)+s[d+1]*g)}}i.push(a)}else if("k"===t.substr(0,1)){var v,m=s.length,b=new Array(m),y=new Array(r),w=!0,x=0,S=null;(S=[]).push(n);for(var k=1;k<r;k++)S.push(n+k/r*(a-n));for(S.push(a);w;){for(var O=0;O<r;O++)y[O]=0;for(var E=0;E<m;E++)for(var T=s[E],U=Number.MAX_VALUE,R=void 0,M=0;M<r;M++){var C=xr(S[M]-T);C<U&&(U=C,R=M),y[R]++,b[E]=R}for(var L=new Array(r),D=0;D<r;D++)L[D]=null;for(var A=0;A<m;A++)null===L[v=b[A]]?L[v]=s[A]:L[v]+=s[A];for(var I=0;I<r;I++)L[I]*=1/y[I];w=!1;for(var j=0;j<r;j++)if(L[j]!==S[j]){w=!0;break}S=L,++x>200&&(w=!1)}for(var P={},B=0;B<r;B++)P[B]=[];for(var N=0;N<m;N++)P[v=b[N]].push(s[N]);for(var F=[],G=0;G<r;G++)F.push(P[G][0]),F.push(P[G][P[G].length-1]);F=F.sort((function(e,t){return e-t})),i.push(F[0]);for(var z=1;z<F.length;z+=2){var _=F[z];isNaN(_)||-1!==i.indexOf(_)||i.push(_)}}return i},Or={analyze:Sr,limits:kr},Er=Math.sqrt,Tr=Math.atan2,Ur=Math.abs,Rr=Math.cos,Mr=Math.PI,Cr={cool:function(){return nr([g.hsl(180,1,.9),g.hsl(250,.7,.4)])},hot:function(){return nr(["#000","#f00","#ff0","#fff"]).mode("rgb")}},Lr={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Dr=0,Ar=Object.keys(Lr);Dr<Ar.length;Dr+=1){var Ir=Ar[Dr];Lr[Ir.toLowerCase()]=Lr[Ir]}var jr=Lr;return g.average=function(e,t,r){void 0===t&&(t="lrgb"),void 0===r&&(r=null);var n=e.length;r||(r=Array.from(new Array(n)).map((function(){return 1})));var a=n/r.reduce((function(e,t){return e+t}));if(r.forEach((function(e,t){r[t]*=a})),e=e.map((function(e){return new p(e)})),"lrgb"===t)return er(e,r);for(var o=e.shift(),s=o.get(t),i=[],c=0,u=0,l=0;l<s.length;l++)if(s[l]=(s[l]||0)*r[0],i.push(isNaN(s[l])?0:r[0]),"h"===t.charAt(l)&&!isNaN(s[l])){var h=s[l]/180*$t;c+=Kt(h)*r[0],u+=Qt(h)*r[0]}var f=o.alpha()*r[0];e.forEach((function(e,n){var a=e.get(t);f+=e.alpha()*r[n+1];for(var o=0;o<s.length;o++)if(!isNaN(a[o]))if(i[o]+=r[n+1],"h"===t.charAt(o)){var l=a[o]/180*$t;c+=Kt(l)*r[n+1],u+=Qt(l)*r[n+1]}else s[o]+=a[o]*r[n+1]}));for(var d=0;d<s.length;d++)if("h"===t.charAt(d)){for(var g=Jt(u/i[d],c/i[d])/$t*180;g<0;)g+=360;for(;g>=360;)g-=360;s[d]=g}else s[d]=s[d]/i[d];return f/=n,new p(s,t).alpha(f>.99999?1:f,!0)},g.bezier=function(e){var t=or(e);return t.scale=function(){return nr(t)},t},g.blend=ur,g.cubehelix=function(e,t,r,n,a){void 0===e&&(e=300),void 0===t&&(t=-1.5),void 0===r&&(r=1),void 0===n&&(n=1),void 0===a&&(a=[0,1]);var o,s=0;"array"===lr(a)?o=a[1]-a[0]:(o=0,a=[a,a]);var i=function(i){var c=fr*((e+120)/360+t*i),u=pr(a[0]+o*i,n),l=(0!==s?r[0]+i*s:r)*u*(1-u)/2,h=gr(c),f=dr(c);return g(hr([255*(u+l*(-.14861*h+1.78277*f)),255*(u+l*(-.29227*h-.90649*f)),255*(u+l*(1.97294*h)),1]))};return i.start=function(t){return null==t?e:(e=t,i)},i.rotations=function(e){return null==e?t:(t=e,i)},i.gamma=function(e){return null==e?n:(n=e,i)},i.hue=function(e){return null==e?r:("array"===lr(r=e)?0==(s=r[1]-r[0])&&(r=r[1]):s=0,i)},i.lightness=function(e){return null==e?a:("array"===lr(e)?(a=e,o=e[1]-e[0]):(a=[e,e],o=0),i)},i.scale=function(){return g.scale(i)},i.hue(r),i},g.mix=g.interpolate=zt,g.random=function(){for(var e="#",t=0;t<6;t++)e+="0123456789abcdef".charAt(vr(16*mr()));return new p(e,"hex")},g.scale=nr,g.analyze=Or.analyze,g.contrast=function(e,t){e=new p(e),t=new p(t);var r=e.luminance(),n=t.luminance();return r>n?(r+.05)/(n+.05):(n+.05)/(r+.05)},g.deltaE=function(e,t,r,n){void 0===r&&(r=1),void 0===n&&(n=1),e=new p(e),t=new p(t);for(var a=Array.from(e.lab()),o=a[0],s=a[1],i=a[2],c=Array.from(t.lab()),u=c[0],l=c[1],h=c[2],f=Er(s*s+i*i),d=Er(l*l+h*h),g=o<16?.511:.040975*o/(1+.01765*o),v=.0638*f/(1+.0131*f)+.638,m=f<1e-6?0:180*Tr(i,s)/Mr;m<0;)m+=360;for(;m>=360;)m-=360;var b=m>=164&&m<=345?.56+Ur(.2*Rr(Mr*(m+168)/180)):.36+Ur(.4*Rr(Mr*(m+35)/180)),y=f*f*f*f,w=Er(y/(y+1900)),x=v*(w*b+1-w),S=f-d,k=s-l,O=i-h,E=(o-u)/(r*g),T=S/(n*v);return Er(E*E+T*T+(k*k+O*O-S*S)/(x*x))},g.distance=function(e,t,r){void 0===r&&(r="lab"),e=new p(e),t=new p(t);var n=e.get(r),a=t.get(r),o=0;for(var s in n){var i=(n[s]||0)-(a[s]||0);o+=i*i}return Math.sqrt(o)},g.limits=Or.limits,g.valid=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];try{return new(Function.prototype.bind.apply(p,[null].concat(e))),!0}catch(e){return!1}},g.scales=Cr,g.colors=yt,g.brewer=jr,g}()},function(e,t,r){"use strict";e.exports=function(e,t){return t||(t={}),"string"!=typeof(e=e&&e.__esModule?e.default:e)?e:(/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e)}},function(e,t,r){"use strict";t.a=r.p+"17e98b9e5586529b13ccb1f7af16861c.ttf"},function(e,t,r){"use strict";t.a=r.p+"043771c999cd4d47d9f33c9c7e42c392.ttf"},function(e,t,r){"use strict";t.a=r.p+"9585580230392fee3fdc7d8e632e404e.ttf"},function(e,t,r){"use strict";t.a=r.p+"418a8f9f65ccad0918afaf29822b460d.ttf"},function(e,t,r){"use strict";t.a=r.p+"1d29748c6ba7e786c050c2ba9f0e73b1.ttf"},function(e,t,r){"use strict";t.a=r.p+"f737da33109e58186a40cd59dc35e5cb.ttf"},function(e,t){},function(e,t,r){"use strict";(function(e){var n,a;
/*! https://mths.be/codepointat v0.2.0 by @mathias */
String.prototype.codePointAt||(n=function(){try{var e={},t=Object.defineProperty,r=t(e,e,e)&&t}catch(e){}return r}(),a=function(e){if(null==this)throw TypeError();var t=String(this),r=t.length,n=e?Number(e):0;if(n!=n&&(n=0),!(n<0||n>=r)){var a,o=t.charCodeAt(n);return o>=55296&&o<=56319&&r>n+1&&(a=t.charCodeAt(n+1))>=56320&&a<=57343?1024*(o-55296)+a-56320+65536:o}},n?n(String.prototype,"codePointAt",{value:a,configurable:!0,writable:!0}):String.prototype.codePointAt=a);function o(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function s(e,t){this.source=e,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=t,this.destLen=0,this.ltree=new o,this.dtree=new o}var i=new o,c=new o,u=new Uint8Array(30),l=new Uint16Array(30),h=new Uint8Array(30),f=new Uint16Array(30),p=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=new o,g=new Uint8Array(320);function v(e,t,r,n){var a,o;for(a=0;a<r;++a)e[a]=0;for(a=0;a<30-r;++a)e[a+r]=a/r|0;for(o=n,a=0;a<30;++a)t[a]=o,o+=1<<e[a]}var m=new Uint16Array(16);function b(e,t,r,n){var a,o;for(a=0;a<16;++a)e.table[a]=0;for(a=0;a<n;++a)e.table[t[r+a]]++;for(e.table[0]=0,o=0,a=0;a<16;++a)m[a]=o,o+=e.table[a];for(a=0;a<n;++a)t[r+a]&&(e.trans[m[t[r+a]]++]=a)}function y(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function w(e,t,r){if(!t)return r;for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var n=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,n+r}function x(e,t){for(;e.bitcount<24;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var r=0,n=0,a=0,o=e.tag;do{n=2*n+(1&o),o>>>=1,++a,r+=t.table[a],n-=t.table[a]}while(n>=0);return e.tag=o,e.bitcount-=a,t.trans[r+n]}function S(e,t,r){var n,a,o,s,i,c;for(n=w(e,5,257),a=w(e,5,1),o=w(e,4,4),s=0;s<19;++s)g[s]=0;for(s=0;s<o;++s){var u=w(e,3,0);g[p[s]]=u}for(b(d,g,0,19),i=0;i<n+a;){var l=x(e,d);switch(l){case 16:var h=g[i-1];for(c=w(e,2,3);c;--c)g[i++]=h;break;case 17:for(c=w(e,3,3);c;--c)g[i++]=0;break;case 18:for(c=w(e,7,11);c;--c)g[i++]=0;break;default:g[i++]=l}}b(t,g,0,n),b(r,g,n,a)}function k(e,t,r){for(;;){var n,a,o,s,i=x(e,t);if(256===i)return 0;if(i<256)e.dest[e.destLen++]=i;else for(n=w(e,u[i-=257],l[i]),a=x(e,r),s=o=e.destLen-w(e,h[a],f[a]);s<o+n;++s)e.dest[e.destLen++]=e.dest[s]}}function O(e){for(var t,r;e.bitcount>8;)e.sourceIndex--,e.bitcount-=8;if((t=256*(t=e.source[e.sourceIndex+1])+e.source[e.sourceIndex])!==(65535&~(256*e.source[e.sourceIndex+3]+e.source[e.sourceIndex+2])))return-3;for(e.sourceIndex+=4,r=t;r;--r)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,0}!function(e,t){var r;for(r=0;r<7;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;r<24;++r)e.trans[r]=256+r;for(r=0;r<144;++r)e.trans[24+r]=r;for(r=0;r<8;++r)e.trans[168+r]=280+r;for(r=0;r<112;++r)e.trans[176+r]=144+r;for(r=0;r<5;++r)t.table[r]=0;for(t.table[5]=32,r=0;r<32;++r)t.trans[r]=r}(i,c),v(u,l,4,3),v(h,f,2,1),u[28]=0,l[28]=258;var E=function(e,t){var r,n,a=new s(e,t);do{switch(r=y(a),w(a,2,0)){case 0:n=O(a);break;case 1:n=k(a,i,c);break;case 2:S(a,a.ltree,a.dtree),n=k(a,a.ltree,a.dtree);break;default:n=-3}if(0!==n)throw new Error("Data error")}while(!r);return a.destLen<a.dest.length?"function"==typeof a.dest.slice?a.dest.slice(0,a.destLen):a.dest.subarray(0,a.destLen):a.dest};function T(e,t,r,n,a){return Math.pow(1-a,3)*e+3*Math.pow(1-a,2)*a*t+3*(1-a)*Math.pow(a,2)*r+Math.pow(a,3)*n}function U(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}function R(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function M(e){throw new Error(e)}function C(e,t){e||M(t)}U.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},U.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},U.prototype.addX=function(e){this.addPoint(e,null)},U.prototype.addY=function(e){this.addPoint(null,e)},U.prototype.addBezier=function(e,t,r,n,a,o,s,i){var c=[e,t],u=[r,n],l=[a,o],h=[s,i];this.addPoint(e,t),this.addPoint(s,i);for(var f=0;f<=1;f++){var p=6*c[f]-12*u[f]+6*l[f],d=-3*c[f]+9*u[f]-9*l[f]+3*h[f],g=3*u[f]-3*c[f];if(0!==d){var v=Math.pow(p,2)-4*g*d;if(!(v<0)){var m=(-p+Math.sqrt(v))/(2*d);0<m&&m<1&&(0===f&&this.addX(T(c[f],u[f],l[f],h[f],m)),1===f&&this.addY(T(c[f],u[f],l[f],h[f],m)));var b=(-p-Math.sqrt(v))/(2*d);0<b&&b<1&&(0===f&&this.addX(T(c[f],u[f],l[f],h[f],b)),1===f&&this.addY(T(c[f],u[f],l[f],h[f],b)))}}else{if(0===p)continue;var y=-g/p;0<y&&y<1&&(0===f&&this.addX(T(c[f],u[f],l[f],h[f],y)),1===f&&this.addY(T(c[f],u[f],l[f],h[f],y)))}}},U.prototype.addQuad=function(e,t,r,n,a,o){var s=e+2/3*(r-e),i=t+2/3*(n-t),c=s+1/3*(a-e),u=i+1/3*(o-t);this.addBezier(e,t,s,i,c,u,a,o)},R.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},R.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},R.prototype.curveTo=R.prototype.bezierCurveTo=function(e,t,r,n,a,o){this.commands.push({type:"C",x1:e,y1:t,x2:r,y2:n,x:a,y:o})},R.prototype.quadTo=R.prototype.quadraticCurveTo=function(e,t,r,n){this.commands.push({type:"Q",x1:e,y1:t,x:r,y:n})},R.prototype.close=R.prototype.closePath=function(){this.commands.push({type:"Z"})},R.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof U){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},R.prototype.getBoundingBox=function(){for(var e=new U,t=0,r=0,n=0,a=0,o=0;o<this.commands.length;o++){var s=this.commands[o];switch(s.type){case"M":e.addPoint(s.x,s.y),t=n=s.x,r=a=s.y;break;case"L":e.addPoint(s.x,s.y),n=s.x,a=s.y;break;case"Q":e.addQuad(n,a,s.x1,s.y1,s.x,s.y),n=s.x,a=s.y;break;case"C":e.addBezier(n,a,s.x1,s.y1,s.x2,s.y2,s.x,s.y),n=s.x,a=s.y;break;case"Z":n=t,a=r;break;default:throw new Error("Unexpected path command "+s.type)}}return e.isEmpty()&&e.addPoint(0,0),e},R.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var r=this.commands[t];"M"===r.type?e.moveTo(r.x,r.y):"L"===r.type?e.lineTo(r.x,r.y):"C"===r.type?e.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):"Q"===r.type?e.quadraticCurveTo(r.x1,r.y1,r.x,r.y):"Z"===r.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},R.prototype.toPathData=function(e){function t(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function r(){for(var e=arguments,r="",n=0;n<arguments.length;n+=1){var a=e[n];a>=0&&n>0&&(r+=" "),r+=t(a)}return r}e=void 0!==e?e:2;for(var n="",a=0;a<this.commands.length;a+=1){var o=this.commands[a];"M"===o.type?n+="M"+r(o.x,o.y):"L"===o.type?n+="L"+r(o.x,o.y):"C"===o.type?n+="C"+r(o.x1,o.y1,o.x2,o.y2,o.x,o.y):"Q"===o.type?n+="Q"+r(o.x1,o.y1,o.x,o.y):"Z"===o.type&&(n+="Z")}return n},R.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&&"black"!==this.fill&&(null===this.fill?t+=' fill="none"':t+=' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>"},R.prototype.toDOMElement=function(e){var t=this.toPathData(e),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",t),r};var L={fail:M,argument:C,assert:C},D={},A={},I={};function j(e){return function(){return e}}A.BYTE=function(e){return L.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]},I.BYTE=j(1),A.CHAR=function(e){return[e.charCodeAt(0)]},I.CHAR=j(1),A.CHARARRAY=function(e){for(var t=[],r=0;r<e.length;r+=1)t[r]=e.charCodeAt(r);return t},I.CHARARRAY=function(e){return e.length},A.USHORT=function(e){return[e>>8&255,255&e]},I.USHORT=j(2),A.SHORT=function(e){return e>=32768&&(e=-(65536-e)),[e>>8&255,255&e]},I.SHORT=j(2),A.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},I.UINT24=j(3),A.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},I.ULONG=j(4),A.LONG=function(e){return e>=2147483648&&(e=-(4294967296-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},I.LONG=j(4),A.FIXED=A.ULONG,I.FIXED=I.ULONG,A.FWORD=A.SHORT,I.FWORD=I.SHORT,A.UFWORD=A.USHORT,I.UFWORD=I.USHORT,A.LONGDATETIME=function(e){return[0,0,0,0,e>>24&255,e>>16&255,e>>8&255,255&e]},I.LONGDATETIME=j(8),A.TAG=function(e){return L.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},I.TAG=j(4),A.Card8=A.BYTE,I.Card8=I.BYTE,A.Card16=A.USHORT,I.Card16=I.USHORT,A.OffSize=A.BYTE,I.OffSize=I.BYTE,A.SID=A.USHORT,I.SID=I.USHORT,A.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?[247+((e-=108)>>8),255&e]:e>=-1131&&e<=-108?[251+((e=-e-108)>>8),255&e]:e>=-32768&&e<=32767?A.NUMBER16(e):A.NUMBER32(e)},I.NUMBER=function(e){return A.NUMBER(e).length},A.NUMBER16=function(e){return[28,e>>8&255,255&e]},I.NUMBER16=j(3),A.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},I.NUMBER32=j(5),A.REAL=function(e){var t=e.toString(),r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(r){var n=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));t=(Math.round(e*n)/n).toString()}for(var a="",o=0,s=t.length;o<s;o+=1){var i=t[o];a+="e"===i?"-"===t[++o]?"c":"b":"."===i?"a":"-"===i?"e":i}for(var c=[30],u=0,l=(a+=1&a.length?"f":"ff").length;u<l;u+=2)c.push(parseInt(a.substr(u,2),16));return c},I.REAL=function(e){return A.REAL(e).length},A.NAME=A.CHARARRAY,I.NAME=I.CHARARRAY,A.STRING=A.CHARARRAY,I.STRING=I.CHARARRAY,D.UTF8=function(e,t,r){for(var n=[],a=r,o=0;o<a;o++,t+=1)n[o]=e.getUint8(t);return String.fromCharCode.apply(null,n)},D.UTF16=function(e,t,r){for(var n=[],a=r/2,o=0;o<a;o++,t+=2)n[o]=e.getUint16(t);return String.fromCharCode.apply(null,n)},A.UTF16=function(e){for(var t=[],r=0;r<e.length;r+=1){var n=e.charCodeAt(r);t[t.length]=n>>8&255,t[t.length]=255&n}return t},I.UTF16=function(e){return 2*e.length};var P={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};D.MACSTRING=function(e,t,r,n){var a=P[n];if(void 0!==a){for(var o="",s=0;s<r;s++){var i=e.getUint8(t+s);o+=i<=127?String.fromCharCode(i):a[127&i]}return o}};var B,N="function"==typeof WeakMap&&new WeakMap;function F(e){return e>=-128&&e<=127}function G(e,t,r){for(var n=0,a=e.length;t<a&&n<64&&0===e[t];)++t,++n;return r.push(128|n-1),t}function z(e,t,r){for(var n=0,a=e.length,o=t;o<a&&n<64;){var s=e[o];if(!F(s))break;if(0===s&&o+1<a&&0===e[o+1])break;++o,++n}r.push(n-1);for(var i=t;i<o;++i)r.push(e[i]+256&255);return o}function _(e,t,r){for(var n=0,a=e.length,o=t;o<a&&n<64;){var s=e[o];if(0===s)break;if(F(s)&&o+1<a&&F(e[o+1]))break;++o,++n}r.push(64|n-1);for(var i=t;i<o;++i){var c=e[i];r.push(c+65536>>8&255,c+256&255)}return o}A.MACSTRING=function(e,t){var r=function(e){if(!B)for(var t in B={},P)B[t]=new String(t);var r=B[e];if(void 0!==r){if(N){var n=N.get(r);if(void 0!==n)return n}var a=P[e];if(void 0!==a){for(var o={},s=0;s<a.length;s++)o[a.charCodeAt(s)]=s+128;return N&&N.set(r,o),o}}}(t);if(void 0!==r){for(var n=[],a=0;a<e.length;a++){var o=e.charCodeAt(a);if(o>=128&&void 0===(o=r[o]))return;n[a]=o}return n}},I.MACSTRING=function(e,t){var r=A.MACSTRING(e,t);return void 0!==r?r.length:0},A.VARDELTAS=function(e){for(var t=0,r=[];t<e.length;){var n=e[t];t=0===n?G(e,t,r):n>=-128&&n<=127?z(e,t,r):_(e,t,r)}return r},A.INDEX=function(e){for(var t=1,r=[t],n=[],a=0;a<e.length;a+=1){var o=A.OBJECT(e[a]);Array.prototype.push.apply(n,o),t+=o.length,r.push(t)}if(0===n.length)return[0,0];for(var s=[],i=1+Math.floor(Math.log(t)/Math.log(2))/8|0,c=[void 0,A.BYTE,A.USHORT,A.UINT24,A.ULONG][i],u=0;u<r.length;u+=1){var l=c(r[u]);Array.prototype.push.apply(s,l)}return Array.prototype.concat(A.Card16(e.length),A.OffSize(i),s,n)},I.INDEX=function(e){return A.INDEX(e).length},A.DICT=function(e){for(var t=[],r=Object.keys(e),n=r.length,a=0;a<n;a+=1){var o=parseInt(r[a],0),s=e[o];t=(t=t.concat(A.OPERAND(s.value,s.type))).concat(A.OPERATOR(o))}return t},I.DICT=function(e){return A.DICT(e).length},A.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},A.OPERAND=function(e,t){var r=[];if(Array.isArray(t))for(var n=0;n<t.length;n+=1)L.argument(e.length===t.length,"Not enough arguments given for type"+t),r=r.concat(A.OPERAND(e[n],t[n]));else if("SID"===t)r=r.concat(A.NUMBER(e));else if("offset"===t)r=r.concat(A.NUMBER32(e));else if("number"===t)r=r.concat(A.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);r=r.concat(A.REAL(e))}return r},A.OP=A.BYTE,I.OP=I.BYTE;var H="function"==typeof WeakMap&&new WeakMap;function V(e,t,r){for(var n=0;n<t.length;n+=1){var a=t[n];this[a.name]=a.value}if(this.tableName=e,this.fields=t,r)for(var o=Object.keys(r),s=0;s<o.length;s+=1){var i=o[s],c=r[i];void 0!==this[i]&&(this[i]=c)}}function q(e,t,r){void 0===r&&(r=t.length);var n=new Array(t.length+1);n[0]={name:e+"Count",type:"USHORT",value:r};for(var a=0;a<t.length;a++)n[a+1]={name:e+a,type:"USHORT",value:t[a]};return n}function W(e,t,r){var n=t.length,a=new Array(n+1);a[0]={name:e+"Count",type:"USHORT",value:n};for(var o=0;o<n;o++)a[o+1]={name:e+o,type:"TABLE",value:r(t[o],o)};return a}function Y(e,t,r){var n=t.length,a=[];a[0]={name:e+"Count",type:"USHORT",value:n};for(var o=0;o<n;o++)a=a.concat(r(t[o],o));return a}function X(e){1===e.format?V.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(q("glyph",e.glyphs))):L.assert(!1,"Can't create coverage table format 2 yet.")}function Z(e){V.call(this,"scriptListTable",Y("scriptRecord",e,(function(e,t){var r=e.script,n=r.defaultLangSys;return L.assert(!!n,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new V("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new V("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:n.reqFeatureIndex}].concat(q("featureIndex",n.featureIndexes)))}].concat(Y("langSys",r.langSysRecords,(function(e,t){var r=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new V("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(q("featureIndex",r.featureIndexes)))}]}))))}]})))}function $(e){V.call(this,"featureListTable",Y("featureRecord",e,(function(e,t){var r=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new V("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(q("lookupListIndex",r.lookupListIndexes)))}]})))}function K(e,t){V.call(this,"lookupListTable",W("lookup",e,(function(e){var r=t[e.lookupType];return L.assert(!!r,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new V("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(W("subtable",e.subtables,r)))})))}A.CHARSTRING=function(e){if(H){var t=H.get(e);if(void 0!==t)return t}for(var r=[],n=e.length,a=0;a<n;a+=1){var o=e[a];r=r.concat(A[o.type](o.value))}return H&&H.set(e,r),r},I.CHARSTRING=function(e){return A.CHARSTRING(e).length},A.OBJECT=function(e){var t=A[e.type];return L.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},I.OBJECT=function(e){var t=I[e.type];return L.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},A.TABLE=function(e){for(var t=[],r=e.fields.length,n=[],a=[],o=0;o<r;o+=1){var s=e.fields[o],i=A[s.type];L.argument(void 0!==i,"No encoding function for field type "+s.type+" ("+s.name+")");var c=e[s.name];void 0===c&&(c=s.value);var u=i(c);"TABLE"===s.type?(a.push(t.length),t=t.concat([0,0]),n.push(u)):t=t.concat(u)}for(var l=0;l<n.length;l+=1){var h=a[l],f=t.length;L.argument(f<65536,"Table "+e.tableName+" too big."),t[h]=f>>8,t[h+1]=255&f,t=t.concat(n[l])}return t},I.TABLE=function(e){for(var t=0,r=e.fields.length,n=0;n<r;n+=1){var a=e.fields[n],o=I[a.type];L.argument(void 0!==o,"No sizeOf function for field type "+a.type+" ("+a.name+")");var s=e[a.name];void 0===s&&(s=a.value),t+=o(s),"TABLE"===a.type&&(t+=2)}return t},A.RECORD=A.TABLE,I.RECORD=I.TABLE,A.LITERAL=function(e){return e},I.LITERAL=function(e){return e.length},V.prototype.encode=function(){return A.TABLE(this)},V.prototype.sizeOf=function(){return I.TABLE(this)},X.prototype=Object.create(V.prototype),X.prototype.constructor=X,Z.prototype=Object.create(V.prototype),Z.prototype.constructor=Z,$.prototype=Object.create(V.prototype),$.prototype.constructor=$,K.prototype=Object.create(V.prototype),K.prototype.constructor=K;var Q={Table:V,Record:V,Coverage:X,ScriptList:Z,FeatureList:$,LookupList:K,ushortList:q,tableList:W,recordList:Y};function J(e,t){return e.getUint8(t)}function ee(e,t){return e.getUint16(t,!1)}function te(e,t){return e.getUint32(t,!1)}function re(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}var ne={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ae(e,t){this.data=e,this.offset=t,this.relativeOffset=0}ae.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ae.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},ae.prototype.parseCard8=ae.prototype.parseByte,ae.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ae.prototype.parseCard16=ae.prototype.parseUShort,ae.prototype.parseSID=ae.prototype.parseUShort,ae.prototype.parseOffset16=ae.prototype.parseUShort,ae.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},ae.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},ae.prototype.parseULong=function(){var e=te(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ae.prototype.parseOffset32=ae.prototype.parseULong,ae.prototype.parseFixed=function(){var e=re(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},ae.prototype.parseString=function(e){var t=this.data,r=this.offset+this.relativeOffset,n="";this.relativeOffset+=e;for(var a=0;a<e;a++)n+=String.fromCharCode(t.getUint8(r+a));return n},ae.prototype.parseTag=function(){return this.parseString(4)},ae.prototype.parseLongDateTime=function(){var e=te(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},ae.prototype.parseVersion=function(e){var t=ee(this.data,this.offset+this.relativeOffset),r=ee(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===e&&(e=4096),t+r/e/10},ae.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=ne[e]*t},ae.prototype.parseULongList=function(e){void 0===e&&(e=this.parseULong());for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=r.getUint32(n),n+=4;return this.relativeOffset+=4*e,t},ae.prototype.parseOffset16List=ae.prototype.parseUShortList=function(e){void 0===e&&(e=this.parseUShort());for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=r.getUint16(n),n+=2;return this.relativeOffset+=2*e,t},ae.prototype.parseShortList=function(e){for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=r.getInt16(n),n+=2;return this.relativeOffset+=2*e,t},ae.prototype.parseByteList=function(e){for(var t=new Array(e),r=this.data,n=this.offset+this.relativeOffset,a=0;a<e;a++)t[a]=r.getUint8(n++);return this.relativeOffset+=e,t},ae.prototype.parseList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),n=0;n<e;n++)r[n]=t.call(this);return r},ae.prototype.parseList32=function(e,t){t||(t=e,e=this.parseULong());for(var r=new Array(e),n=0;n<e;n++)r[n]=t.call(this);return r},ae.prototype.parseRecordList=function(e,t){t||(t=e,e=this.parseUShort());for(var r=new Array(e),n=Object.keys(t),a=0;a<e;a++){for(var o={},s=0;s<n.length;s++){var i=n[s],c=t[i];o[i]=c.call(this)}r[a]=o}return r},ae.prototype.parseRecordList32=function(e,t){t||(t=e,e=this.parseULong());for(var r=new Array(e),n=Object.keys(t),a=0;a<e;a++){for(var o={},s=0;s<n.length;s++){var i=n[s],c=t[i];o[i]=c.call(this)}r[a]=o}return r},ae.prototype.parseStruct=function(e){if("function"==typeof e)return e.call(this);for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n],o=e[a];r[a]=o.call(this)}return r},ae.prototype.parseValueRecord=function(e){if(void 0===e&&(e=this.parseUShort()),0!==e){var t={};return 1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t}},ae.prototype.parseValueRecordList=function(){for(var e=this.parseUShort(),t=this.parseUShort(),r=new Array(t),n=0;n<t;n++)r[n]=this.parseValueRecord(e);return r},ae.prototype.parsePointer=function(e){var t=this.parseOffset16();if(t>0)return new ae(this.data,this.offset+t).parseStruct(e)},ae.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(t>0)return new ae(this.data,this.offset+t).parseStruct(e)},ae.prototype.parseListOfLists=function(e){for(var t=this.parseOffset16List(),r=t.length,n=this.relativeOffset,a=new Array(r),o=0;o<r;o++){var s=t[o];if(0!==s)if(this.relativeOffset=s,e){for(var i=this.parseOffset16List(),c=new Array(i.length),u=0;u<i.length;u++)this.relativeOffset=s+i[u],c[u]=e.call(this);a[o]=c}else a[o]=this.parseUShortList();else a[o]=void 0}return this.relativeOffset=n,a},ae.prototype.parseCoverage=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort(),r=this.parseUShort();if(1===t)return{format:1,glyphs:this.parseUShortList(r)};if(2===t){for(var n=new Array(r),a=0;a<r;a++)n[a]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:n}}throw new Error("0x"+e.toString(16)+": Coverage format must be 1 or 2.")},ae.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:ae.uShort,end:ae.uShort,classId:ae.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},ae.list=function(e,t){return function(){return this.parseList(e,t)}},ae.list32=function(e,t){return function(){return this.parseList32(e,t)}},ae.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},ae.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},ae.pointer=function(e){return function(){return this.parsePointer(e)}},ae.pointer32=function(e){return function(){return this.parsePointer32(e)}},ae.tag=ae.prototype.parseTag,ae.byte=ae.prototype.parseByte,ae.uShort=ae.offset16=ae.prototype.parseUShort,ae.uShortList=ae.prototype.parseUShortList,ae.uLong=ae.offset32=ae.prototype.parseULong,ae.uLongList=ae.prototype.parseULongList,ae.struct=ae.prototype.parseStruct,ae.coverage=ae.prototype.parseCoverage,ae.classDef=ae.prototype.parseClassDef;var oe={reserved:ae.uShort,reqFeatureIndex:ae.uShort,featureIndexes:ae.uShortList};ae.prototype.parseScriptList=function(){return this.parsePointer(ae.recordList({tag:ae.tag,script:ae.pointer({defaultLangSys:ae.pointer(oe),langSysRecords:ae.recordList({tag:ae.tag,langSys:ae.pointer(oe)})})}))||[]},ae.prototype.parseFeatureList=function(){return this.parsePointer(ae.recordList({tag:ae.tag,feature:ae.pointer({featureParams:ae.offset16,lookupListIndexes:ae.uShortList})}))||[]},ae.prototype.parseLookupList=function(e){return this.parsePointer(ae.list(ae.pointer((function(){var t=this.parseUShort();L.argument(1<=t&&t<=9,"GPOS/GSUB lookup type "+t+" unknown.");var r=this.parseUShort(),n=16&r;return{lookupType:t,lookupFlag:r,subtables:this.parseList(ae.pointer(e[t])),markFilteringSet:n?this.parseUShort():void 0}}))))||[]},ae.prototype.parseFeatureVariationsList=function(){return this.parsePointer32((function(){var e=this.parseUShort(),t=this.parseUShort();return L.argument(1===e&&t<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:ae.offset32,featureTableSubstitutionOffset:ae.offset32})}))||[]};var se={getByte:J,getCard8:J,getUShort:ee,getCard16:ee,getShort:function(e,t){return e.getInt16(t,!1)},getULong:te,getFixed:re,getTag:function(e,t){for(var r="",n=t;n<t+4;n+=1)r+=String.fromCharCode(e.getInt8(n));return r},getOffset:function(e,t,r){for(var n=0,a=0;a<r;a+=1)n<<=8,n+=e.getUint8(t+a);return n},getBytes:function(e,t,r){for(var n=[],a=t;a<r;a+=1)n.push(e.getUint8(a));return n},bytesToString:function(e){for(var t="",r=0;r<e.length;r+=1)t+=String.fromCharCode(e[r]);return t},Parser:ae};function ie(e,t,r){e.segments.push({end:t,start:t,delta:-(t-r),offset:0,glyphIndex:r})}var ce={parse:function(e,t){var r={};r.version=se.getUShort(e,t),L.argument(0===r.version,"cmap table version should be 0."),r.numTables=se.getUShort(e,t+2);for(var n=-1,a=r.numTables-1;a>=0;a-=1){var o=se.getUShort(e,t+4+8*a),s=se.getUShort(e,t+4+8*a+2);if(3===o&&(0===s||1===s||10===s)||0===o&&(0===s||1===s||2===s||3===s||4===s)){n=se.getULong(e,t+4+8*a+4);break}}if(-1===n)throw new Error("No valid cmap sub-tables found.");var i=new se.Parser(e,t+n);if(r.format=i.parseUShort(),12===r.format)!function(e,t){var r;t.parseUShort(),e.length=t.parseULong(),e.language=t.parseULong(),e.groupCount=r=t.parseULong(),e.glyphIndexMap={};for(var n=0;n<r;n+=1)for(var a=t.parseULong(),o=t.parseULong(),s=t.parseULong(),i=a;i<=o;i+=1)e.glyphIndexMap[i]=s,s++}(r,i);else{if(4!==r.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+r.format+").");!function(e,t,r,n,a){var o;e.length=t.parseUShort(),e.language=t.parseUShort(),e.segCount=o=t.parseUShort()>>1,t.skip("uShort",3),e.glyphIndexMap={};for(var s=new se.Parser(r,n+a+14),i=new se.Parser(r,n+a+16+2*o),c=new se.Parser(r,n+a+16+4*o),u=new se.Parser(r,n+a+16+6*o),l=n+a+16+8*o,h=0;h<o-1;h+=1)for(var f=void 0,p=s.parseUShort(),d=i.parseUShort(),g=c.parseShort(),v=u.parseUShort(),m=d;m<=p;m+=1)0!==v?(l=u.offset+u.relativeOffset-2,l+=v,l+=2*(m-d),0!==(f=se.getUShort(r,l))&&(f=f+g&65535)):f=m+g&65535,e.glyphIndexMap[m]=f}(r,i,e,t,n)}return r},make:function(e){var t,r=!0;for(t=e.length-1;t>0;t-=1){if(e.get(t).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),r=!1;break}}var n=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:r?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:r?12:20}];r||(n=n.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),n=n.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var a=new Q.Table("cmap",n);for(a.segments=[],t=0;t<e.length;t+=1){for(var o=e.get(t),s=0;s<o.unicodes.length;s+=1)ie(a,o.unicodes[s],t);a.segments=a.segments.sort((function(e,t){return e.start-t.start}))}!function(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}(a);var i=a.segments.length,c=0,u=[],l=[],h=[],f=[],p=[],d=[];for(t=0;t<i;t+=1){var g=a.segments[t];g.end<=65535&&g.start<=65535?(u=u.concat({name:"end_"+t,type:"USHORT",value:g.end}),l=l.concat({name:"start_"+t,type:"USHORT",value:g.start}),h=h.concat({name:"idDelta_"+t,type:"SHORT",value:g.delta}),f=f.concat({name:"idRangeOffset_"+t,type:"USHORT",value:g.offset}),void 0!==g.glyphId&&(p=p.concat({name:"glyph_"+t,type:"USHORT",value:g.glyphId}))):c+=1,r||void 0===g.glyphIndex||(d=(d=(d=d.concat({name:"cmap12Start_"+t,type:"ULONG",value:g.start})).concat({name:"cmap12End_"+t,type:"ULONG",value:g.end})).concat({name:"cmap12Glyph_"+t,type:"ULONG",value:g.glyphIndex}))}if(a.segCountX2=2*(i-c),a.searchRange=2*Math.pow(2,Math.floor(Math.log(i-c)/Math.log(2))),a.entrySelector=Math.log(a.searchRange/2)/Math.log(2),a.rangeShift=a.segCountX2-a.searchRange,a.fields=a.fields.concat(u),a.fields.push({name:"reservedPad",type:"USHORT",value:0}),a.fields=a.fields.concat(l),a.fields=a.fields.concat(h),a.fields=a.fields.concat(f),a.fields=a.fields.concat(p),a.cmap4Length=14+2*u.length+2+2*l.length+2*h.length+2*f.length+2*p.length,!r){var v=16+4*d.length;a.cmap12Offset=20+a.cmap4Length,a.fields=a.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:v},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:d.length/3}]),a.fields=a.fields.concat(d)}return a}},ue=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],le=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],he=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],fe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function pe(e){this.font=e}function de(e){this.cmap=e}function ge(e,t){this.encoding=e,this.charset=t}function ve(e){switch(e.version){case 1:this.names=fe.slice();break;case 2:this.names=new Array(e.numberOfGlyphs);for(var t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<fe.length?this.names[t]=fe[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-fe.length];break;case 2.5:this.names=new Array(e.numberOfGlyphs);for(var r=0;r<e.numberOfGlyphs;r++)this.names[r]=fe[r+e.glyphNameIndex[r]];break;case 3:default:this.names=[]}}function me(e,t){t.lowMemory?function(e){e._IndexToUnicodeMap={};for(var t=e.tables.cmap.glyphIndexMap,r=Object.keys(t),n=0;n<r.length;n+=1){var a=r[n],o=t[a];void 0===e._IndexToUnicodeMap[o]?e._IndexToUnicodeMap[o]={unicodes:[parseInt(a)]}:e._IndexToUnicodeMap[o].unicodes.push(parseInt(a))}}(e):function(e){for(var t,r=e.tables.cmap.glyphIndexMap,n=Object.keys(r),a=0;a<n.length;a+=1){var o=n[a],s=r[o];(t=e.glyphs.get(s)).addUnicode(parseInt(o))}for(var i=0;i<e.glyphs.length;i+=1)t=e.glyphs.get(i),e.cffEncoding?e.isCIDFont?t.name="gid"+i:t.name=e.cffEncoding.charset[i]:e.glyphNames.names&&(t.name=e.glyphNames.glyphIndexToName(i))}(e)}pe.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),r=this.font.glyphs;if(r)for(var n=0;n<r.length;n+=1)for(var a=r.get(n),o=0;o<a.unicodes.length;o+=1)if(a.unicodes[o]===t)return n;return null},de.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},ge.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),r=this.encoding[t];return this.charset.indexOf(r)},ve.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},ve.prototype.glyphIndexToName=function(e){return this.names[e]};var be={line:function(e,t,r,n,a){e.beginPath(),e.moveTo(t,r),e.lineTo(n,a),e.stroke()}};function ye(e){this.bindConstructorValues(e)}function we(e,t,r){Object.defineProperty(e,t,{get:function(){return e.path,e[r]},set:function(t){e[r]=t},enumerable:!0,configurable:!0})}function xe(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var r=0;r<t.length;r++){var n=t[r];n.path.unitsPerEm=e.unitsPerEm,this.glyphs[r]=n}this.length=t&&t.length||0}ye.prototype.bindConstructorValues=function(e){var t,r;this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],"xMin"in e&&(this.xMin=e.xMin),"yMin"in e&&(this.yMin=e.yMin),"xMax"in e&&(this.xMax=e.xMax),"yMax"in e&&(this.yMax=e.yMax),"advanceWidth"in e&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",(t=e.path,r=t||new R,{configurable:!0,get:function(){return"function"==typeof r&&(r=r()),r},set:function(e){r=e}}))},ye.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},ye.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},ye.prototype.getPath=function(e,t,r,n,a){var o,s;e=void 0!==e?e:0,t=void 0!==t?t:0,r=void 0!==r?r:72,n||(n={});var i=n.xScale,c=n.yScale;if(n.hinting&&a&&a.hinting&&(s=this.path&&a.hinting.exec(this,r)),s)o=a.hinting.getCommands(s),e=Math.round(e),t=Math.round(t),i=c=1;else{o=this.path.commands;var u=1/(this.path.unitsPerEm||1e3)*r;void 0===i&&(i=u),void 0===c&&(c=u)}for(var l=new R,h=0;h<o.length;h+=1){var f=o[h];"M"===f.type?l.moveTo(e+f.x*i,t+-f.y*c):"L"===f.type?l.lineTo(e+f.x*i,t+-f.y*c):"Q"===f.type?l.quadraticCurveTo(e+f.x1*i,t+-f.y1*c,e+f.x*i,t+-f.y*c):"C"===f.type?l.curveTo(e+f.x1*i,t+-f.y1*c,e+f.x2*i,t+-f.y2*c,e+f.x*i,t+-f.y*c):"Z"===f.type&&l.closePath()}return l},ye.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],r=0;r<this.points.length;r+=1){var n=this.points[r];t.push(n),n.lastPointOfContour&&(e.push(t),t=[])}return L.argument(0===t.length,"There are still points left in the current contour."),e},ye.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],r=[],n=0;n<e.length;n+=1){var a=e[n];"Z"!==a.type&&(t.push(a.x),r.push(a.y)),"Q"!==a.type&&"C"!==a.type||(t.push(a.x1),r.push(a.y1)),"C"===a.type&&(t.push(a.x2),r.push(a.y2))}var o={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,r),leftSideBearing:this.leftSideBearing};return isFinite(o.xMin)||(o.xMin=0),isFinite(o.xMax)||(o.xMax=this.advanceWidth),isFinite(o.yMin)||(o.yMin=0),isFinite(o.yMax)||(o.yMax=0),o.rightSideBearing=this.advanceWidth-o.leftSideBearing-(o.xMax-o.xMin),o},ye.prototype.draw=function(e,t,r,n,a){this.getPath(t,r,n,a).draw(e)},ye.prototype.drawPoints=function(e,t,r,n){function a(t,r,n,a){e.beginPath();for(var o=0;o<t.length;o+=1)e.moveTo(r+t[o].x*a,n+t[o].y*a),e.arc(r+t[o].x*a,n+t[o].y*a,2,0,2*Math.PI,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:24;for(var o=1/this.path.unitsPerEm*n,s=[],i=[],c=this.path,u=0;u<c.commands.length;u+=1){var l=c.commands[u];void 0!==l.x&&s.push({x:l.x,y:-l.y}),void 0!==l.x1&&i.push({x:l.x1,y:-l.y1}),void 0!==l.x2&&i.push({x:l.x2,y:-l.y2})}e.fillStyle="blue",a(s,t,r,o),e.fillStyle="red",a(i,t,r,o)},ye.prototype.drawMetrics=function(e,t,r,n){var a;t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:24,a=1/this.path.unitsPerEm*n,e.lineWidth=1,e.strokeStyle="black",be.line(e,t,-1e4,t,1e4),be.line(e,-1e4,r,1e4,r);var o=this.xMin||0,s=this.yMin||0,i=this.xMax||0,c=this.yMax||0,u=this.advanceWidth||0;e.strokeStyle="blue",be.line(e,t+o*a,-1e4,t+o*a,1e4),be.line(e,t+i*a,-1e4,t+i*a,1e4),be.line(e,-1e4,r+-s*a,1e4,r+-s*a),be.line(e,-1e4,r+-c*a,1e4,r+-c*a),e.strokeStyle="green",be.line(e,t+u*a,-1e4,t+u*a,1e4)},xe.prototype.get=function(e){if(void 0===this.glyphs[e]){this.font._push(e),"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());var t=this.glyphs[e],r=this.font._IndexToUnicodeMap[e];if(r)for(var n=0;n<r.unicodes.length;n++)t.addUnicode(r.unicodes[n]);this.font.cffEncoding?this.font.isCIDFont?t.name="gid"+e:t.name=this.font.cffEncoding.charset[e]:this.font.glyphNames.names&&(t.name=this.font.glyphNames.glyphIndexToName(e)),this.glyphs[e].advanceWidth=this.font._hmtxTableData[e].advanceWidth,this.glyphs[e].leftSideBearing=this.font._hmtxTableData[e].leftSideBearing}else"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]());return this.glyphs[e]},xe.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var Se={GlyphSet:xe,glyphLoader:function(e,t){return new ye({index:t,font:e})},ttfGlyphLoader:function(e,t,r,n,a,o){return function(){var s=new ye({index:t,font:e});return s.path=function(){r(s,n,a);var t=o(e.glyphs,s);return t.unitsPerEm=e.unitsPerEm,t},we(s,"xMin","_xMin"),we(s,"xMax","_xMax"),we(s,"yMin","_yMin"),we(s,"yMax","_yMax"),s}},cffGlyphLoader:function(e,t,r,n){return function(){var a=new ye({index:t,font:e});return a.path=function(){var t=r(e,a,n);return t.unitsPerEm=e.unitsPerEm,t},a}}};function ke(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r+=1)if(!ke(e[r],t[r]))return!1;return!0}return!1}function Oe(e){return e.length<1240?107:e.length<33900?1131:32768}function Ee(e,t,r){var n,a,o=[],s=[],i=se.getCard16(e,t);if(0!==i){var c=se.getByte(e,t+2);n=t+(i+1)*c+2;for(var u=t+3,l=0;l<i+1;l+=1)o.push(se.getOffset(e,u,c)),u+=c;a=n+o[i]}else a=t+2;for(var h=0;h<o.length-1;h+=1){var f=se.getBytes(e,n+o[h],n+o[h+1]);r&&(f=r(f)),s.push(f)}return{objects:s,startOffset:t,endOffset:a}}function Te(e,t){if(28===t)return e.parseByte()<<8|e.parseByte();if(29===t)return e.parseByte()<<24|e.parseByte()<<16|e.parseByte()<<8|e.parseByte();if(30===t)return function(e){for(var t="",r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var n=e.parseByte(),a=n>>4,o=15&n;if(15===a)break;if(t+=r[a],15===o)break;t+=r[o]}return parseFloat(t)}(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return 256*(t-247)+e.parseByte()+108;if(t>=251&&t<=254)return 256*-(t-251)-e.parseByte()-108;throw new Error("Invalid b0 "+t)}function Ue(e,t,r){t=void 0!==t?t:0;var n=new se.Parser(e,t),a=[],o=[];for(r=void 0!==r?r:e.length;n.relativeOffset<r;){var s=n.parseByte();s<=21?(12===s&&(s=1200+n.parseByte()),a.push([s,o]),o=[]):o.push(Te(n,s))}return function(e){for(var t={},r=0;r<e.length;r+=1){var n=e[r][0],a=e[r][1],o=void 0;if(o=1===a.length?a[0]:a,t.hasOwnProperty(n)&&!isNaN(t[n]))throw new Error("Object "+t+" already has key "+n);t[n]=o}return t}(a)}function Re(e,t){return t=t<=390?ue[t]:e[t-391]}function Me(e,t,r){for(var n,a={},o=0;o<t.length;o+=1){var s=t[o];if(Array.isArray(s.type)){var i=[];i.length=s.type.length;for(var c=0;c<s.type.length;c++)void 0===(n=void 0!==e[s.op]?e[s.op][c]:void 0)&&(n=void 0!==s.value&&void 0!==s.value[c]?s.value[c]:null),"SID"===s.type[c]&&(n=Re(r,n)),i[c]=n;a[s.name]=i}else void 0===(n=e[s.op])&&(n=void 0!==s.value?s.value:null),"SID"===s.type&&(n=Re(r,n)),a[s.name]=n}return a}var Ce=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Le=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function De(e,t){return Me(Ue(e,0,e.byteLength),Ce,t)}function Ae(e,t,r,n){return Me(Ue(e,t,r),Le,n)}function Ie(e,t,r,n){for(var a=[],o=0;o<r.length;o+=1){var s=De(new DataView(new Uint8Array(r[o]).buffer),n);s._subrs=[],s._subrsBias=0;var i=s.private[0],c=s.private[1];if(0!==i&&0!==c){var u=Ae(e,c+t,i,n);if(s._defaultWidthX=u.defaultWidthX,s._nominalWidthX=u.nominalWidthX,0!==u.subrs){var l=Ee(e,c+u.subrs+t);s._subrs=l.objects,s._subrsBias=Oe(s._subrs)}s._privateDict=u}a.push(s)}return a}function je(e,t,r){var n,a,o,s,i,c,u,l,h=new R,f=[],p=0,d=!1,g=!1,v=0,m=0;if(e.isCIDFont){var b=e.tables.cff.topDict._fdSelect[t.index],y=e.tables.cff.topDict._fdArray[b];i=y._subrs,c=y._subrsBias,u=y._defaultWidthX,l=y._nominalWidthX}else i=e.tables.cff.topDict._subrs,c=e.tables.cff.topDict._subrsBias,u=e.tables.cff.topDict._defaultWidthX,l=e.tables.cff.topDict._nominalWidthX;var w=u;function x(e,t){g&&h.closePath(),h.moveTo(e,t),g=!0}function S(){f.length%2!=0&&!d&&(w=f.shift()+l),p+=f.length>>1,f.length=0,d=!0}return function r(u){for(var b,y,k,O,E,T,U,R,M,C,L,D,A=0;A<u.length;){var I=u[A];switch(A+=1,I){case 1:case 3:S();break;case 4:f.length>1&&!d&&(w=f.shift()+l,d=!0),m+=f.pop(),x(v,m);break;case 5:for(;f.length>0;)v+=f.shift(),m+=f.shift(),h.lineTo(v,m);break;case 6:for(;f.length>0&&(v+=f.shift(),h.lineTo(v,m),0!==f.length);)m+=f.shift(),h.lineTo(v,m);break;case 7:for(;f.length>0&&(m+=f.shift(),h.lineTo(v,m),0!==f.length);)v+=f.shift(),h.lineTo(v,m);break;case 8:for(;f.length>0;)n=v+f.shift(),a=m+f.shift(),o=n+f.shift(),s=a+f.shift(),v=o+f.shift(),m=s+f.shift(),h.curveTo(n,a,o,s,v,m);break;case 10:E=f.pop()+c,(T=i[E])&&r(T);break;case 11:return;case 12:switch(I=u[A],A+=1,I){case 35:n=v+f.shift(),a=m+f.shift(),o=n+f.shift(),s=a+f.shift(),U=o+f.shift(),R=s+f.shift(),M=U+f.shift(),C=R+f.shift(),L=M+f.shift(),D=C+f.shift(),v=L+f.shift(),m=D+f.shift(),f.shift(),h.curveTo(n,a,o,s,U,R),h.curveTo(M,C,L,D,v,m);break;case 34:n=v+f.shift(),a=m,o=n+f.shift(),s=a+f.shift(),U=o+f.shift(),R=s,M=U+f.shift(),C=s,L=M+f.shift(),D=m,v=L+f.shift(),h.curveTo(n,a,o,s,U,R),h.curveTo(M,C,L,D,v,m);break;case 36:n=v+f.shift(),a=m+f.shift(),o=n+f.shift(),s=a+f.shift(),U=o+f.shift(),R=s,M=U+f.shift(),C=s,L=M+f.shift(),D=C+f.shift(),v=L+f.shift(),h.curveTo(n,a,o,s,U,R),h.curveTo(M,C,L,D,v,m);break;case 37:n=v+f.shift(),a=m+f.shift(),o=n+f.shift(),s=a+f.shift(),U=o+f.shift(),R=s+f.shift(),M=U+f.shift(),C=R+f.shift(),L=M+f.shift(),D=C+f.shift(),Math.abs(L-v)>Math.abs(D-m)?v=L+f.shift():m=D+f.shift(),h.curveTo(n,a,o,s,U,R),h.curveTo(M,C,L,D,v,m);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+I),f.length=0}break;case 14:f.length>0&&!d&&(w=f.shift()+l,d=!0),g&&(h.closePath(),g=!1);break;case 18:S();break;case 19:case 20:S(),A+=p+7>>3;break;case 21:f.length>2&&!d&&(w=f.shift()+l,d=!0),m+=f.pop(),x(v+=f.pop(),m);break;case 22:f.length>1&&!d&&(w=f.shift()+l,d=!0),x(v+=f.pop(),m);break;case 23:S();break;case 24:for(;f.length>2;)n=v+f.shift(),a=m+f.shift(),o=n+f.shift(),s=a+f.shift(),v=o+f.shift(),m=s+f.shift(),h.curveTo(n,a,o,s,v,m);v+=f.shift(),m+=f.shift(),h.lineTo(v,m);break;case 25:for(;f.length>6;)v+=f.shift(),m+=f.shift(),h.lineTo(v,m);n=v+f.shift(),a=m+f.shift(),o=n+f.shift(),s=a+f.shift(),v=o+f.shift(),m=s+f.shift(),h.curveTo(n,a,o,s,v,m);break;case 26:for(f.length%2&&(v+=f.shift());f.length>0;)n=v,a=m+f.shift(),o=n+f.shift(),s=a+f.shift(),v=o,m=s+f.shift(),h.curveTo(n,a,o,s,v,m);break;case 27:for(f.length%2&&(m+=f.shift());f.length>0;)n=v+f.shift(),a=m,o=n+f.shift(),s=a+f.shift(),v=o+f.shift(),m=s,h.curveTo(n,a,o,s,v,m);break;case 28:b=u[A],y=u[A+1],f.push((b<<24|y<<16)>>16),A+=2;break;case 29:E=f.pop()+e.gsubrsBias,(T=e.gsubrs[E])&&r(T);break;case 30:for(;f.length>0&&(n=v,a=m+f.shift(),o=n+f.shift(),s=a+f.shift(),v=o+f.shift(),m=s+(1===f.length?f.shift():0),h.curveTo(n,a,o,s,v,m),0!==f.length);)n=v+f.shift(),a=m,o=n+f.shift(),s=a+f.shift(),m=s+f.shift(),v=o+(1===f.length?f.shift():0),h.curveTo(n,a,o,s,v,m);break;case 31:for(;f.length>0&&(n=v+f.shift(),a=m,o=n+f.shift(),s=a+f.shift(),m=s+f.shift(),v=o+(1===f.length?f.shift():0),h.curveTo(n,a,o,s,v,m),0!==f.length);)n=v,a=m+f.shift(),o=n+f.shift(),s=a+f.shift(),v=o+f.shift(),m=s+(1===f.length?f.shift():0),h.curveTo(n,a,o,s,v,m);break;default:I<32?console.log("Glyph "+t.index+": unknown operator "+I):I<247?f.push(I-139):I<251?(b=u[A],A+=1,f.push(256*(I-247)+b+108)):I<255?(b=u[A],A+=1,f.push(256*-(I-251)-b-108)):(b=u[A],y=u[A+1],k=u[A+2],O=u[A+3],A+=4,f.push((b<<24|y<<16|k<<8|O)/65536))}}}(r),t.advanceWidth=w,h}function Pe(e,t){var r,n=ue.indexOf(e);return n>=0&&(r=n),(n=t.indexOf(e))>=0?r=n+ue.length:(r=ue.length+t.length,t.push(e)),r}function Be(e,t,r){for(var n={},a=0;a<e.length;a+=1){var o=e[a],s=t[o.name];void 0===s||ke(s,o.value)||("SID"===o.type&&(s=Pe(s,r)),n[o.op]={name:o.name,type:o.type,value:s})}return n}function Ne(e,t){var r=new Q.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=Be(Ce,e,t),r}function Fe(e){var t=new Q.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function Ge(e){var t=[],r=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var n=0,a=0,o=0;o<r.commands.length;o+=1){var s=void 0,i=void 0,c=r.commands[o];if("Q"===c.type){c={type:"C",x:c.x,y:c.y,x1:1/3*n+2/3*c.x1,y1:1/3*a+2/3*c.y1,x2:1/3*c.x+2/3*c.x1,y2:1/3*c.y+2/3*c.y1}}if("M"===c.type)s=Math.round(c.x-n),i=Math.round(c.y-a),t.push({name:"dx",type:"NUMBER",value:s}),t.push({name:"dy",type:"NUMBER",value:i}),t.push({name:"rmoveto",type:"OP",value:21}),n=Math.round(c.x),a=Math.round(c.y);else if("L"===c.type)s=Math.round(c.x-n),i=Math.round(c.y-a),t.push({name:"dx",type:"NUMBER",value:s}),t.push({name:"dy",type:"NUMBER",value:i}),t.push({name:"rlineto",type:"OP",value:5}),n=Math.round(c.x),a=Math.round(c.y);else if("C"===c.type){var u=Math.round(c.x1-n),l=Math.round(c.y1-a),h=Math.round(c.x2-c.x1),f=Math.round(c.y2-c.y1);s=Math.round(c.x-c.x2),i=Math.round(c.y-c.y2),t.push({name:"dx1",type:"NUMBER",value:u}),t.push({name:"dy1",type:"NUMBER",value:l}),t.push({name:"dx2",type:"NUMBER",value:h}),t.push({name:"dy2",type:"NUMBER",value:f}),t.push({name:"dx",type:"NUMBER",value:s}),t.push({name:"dy",type:"NUMBER",value:i}),t.push({name:"rrcurveto",type:"OP",value:8}),n=Math.round(c.x),a=Math.round(c.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}var ze={parse:function(e,t,r,n){r.tables.cff={};var a=function(e,t){var r={};return r.formatMajor=se.getCard8(e,t),r.formatMinor=se.getCard8(e,t+1),r.size=se.getCard8(e,t+2),r.offsetSize=se.getCard8(e,t+3),r.startOffset=t,r.endOffset=t+4,r}(e,t),o=Ee(e,a.endOffset,se.bytesToString),s=Ee(e,o.endOffset),i=Ee(e,s.endOffset,se.bytesToString),c=Ee(e,i.endOffset);r.gsubrs=c.objects,r.gsubrsBias=Oe(r.gsubrs);var u=Ie(e,t,s.objects,i.objects);if(1!==u.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+u.length);var l=u[0];if(r.tables.cff.topDict=l,l._privateDict&&(r.defaultWidthX=l._privateDict.defaultWidthX,r.nominalWidthX=l._privateDict.nominalWidthX),void 0!==l.ros[0]&&void 0!==l.ros[1]&&(r.isCIDFont=!0),r.isCIDFont){var h=l.fdArray,f=l.fdSelect;if(0===h||0===f)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");var p=Ee(e,h+=t),d=Ie(e,t,p.objects,i.objects);l._fdArray=d,f+=t,l._fdSelect=function(e,t,r,n){var a,o=[],s=new se.Parser(e,t),i=s.parseCard8();if(0===i)for(var c=0;c<r;c++){if((a=s.parseCard8())>=n)throw new Error("CFF table CID Font FDSelect has bad FD index value "+a+" (FD count "+n+")");o.push(a)}else{if(3!==i)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+i);var u,l=s.parseCard16(),h=s.parseCard16();if(0!==h)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+h);for(var f=0;f<l;f++){if(a=s.parseCard8(),u=s.parseCard16(),a>=n)throw new Error("CFF table CID Font FDSelect has bad FD index value "+a+" (FD count "+n+")");if(u>r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+u);for(;h<u;h++)o.push(a);h=u}if(u!==r)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+u)}return o}(e,f,r.numGlyphs,d.length)}var g,v=t+l.private[1],m=Ae(e,v,l.private[0],i.objects);if(r.defaultWidthX=m.defaultWidthX,r.nominalWidthX=m.nominalWidthX,0!==m.subrs){var b=v+m.subrs,y=Ee(e,b);r.subrs=y.objects,r.subrsBias=Oe(r.subrs)}else r.subrs=[],r.subrsBias=0;n.lowMemory?(g=function(e,t){var r,n,a=[],o=se.getCard16(e,t);if(0!==o){var s=se.getByte(e,t+2);r=t+(o+1)*s+2;for(var i=t+3,c=0;c<o+1;c+=1)a.push(se.getOffset(e,i,s)),i+=s;n=r+a[o]}else n=t+2;return{offsets:a,startOffset:t,endOffset:n}}(e,t+l.charStrings),r.nGlyphs=g.offsets.length):(g=Ee(e,t+l.charStrings),r.nGlyphs=g.objects.length);var w=function(e,t,r,n){var a,o,s=new se.Parser(e,t);r-=1;var i=[".notdef"],c=s.parseCard8();if(0===c)for(var u=0;u<r;u+=1)a=s.parseSID(),i.push(Re(n,a));else if(1===c)for(;i.length<=r;){a=s.parseSID(),o=s.parseCard8();for(var l=0;l<=o;l+=1)i.push(Re(n,a)),a+=1}else{if(2!==c)throw new Error("Unknown charset format "+c);for(;i.length<=r;){a=s.parseSID(),o=s.parseCard16();for(var h=0;h<=o;h+=1)i.push(Re(n,a)),a+=1}}return i}(e,t+l.charset,r.nGlyphs,i.objects);if(0===l.encoding?r.cffEncoding=new ge(le,w):1===l.encoding?r.cffEncoding=new ge(he,w):r.cffEncoding=function(e,t,r){var n,a={},o=new se.Parser(e,t),s=o.parseCard8();if(0===s)for(var i=o.parseCard8(),c=0;c<i;c+=1)a[n=o.parseCard8()]=c;else{if(1!==s)throw new Error("Unknown encoding format "+s);var u=o.parseCard8();n=1;for(var l=0;l<u;l+=1)for(var h=o.parseCard8(),f=o.parseCard8(),p=h;p<=h+f;p+=1)a[p]=n,n+=1}return new ge(a,r)}(e,t+l.encoding,w),r.encoding=r.encoding||r.cffEncoding,r.glyphs=new Se.GlyphSet(r),n.lowMemory)r._push=function(n){var a=function(e,t,r,n,a){var o=se.getCard16(r,n),s=0;0!==o&&(s=n+(o+1)*se.getByte(r,n+2)+2);var i=se.getBytes(r,s+t[e],s+t[e+1]);return a&&(i=a(i)),i}(n,g.offsets,e,t+l.charStrings);r.glyphs.push(n,Se.cffGlyphLoader(r,n,je,a))};else for(var x=0;x<r.nGlyphs;x+=1){var S=g.objects[x];r.glyphs.push(x,Se.cffGlyphLoader(r,x,je,S))}},make:function(e,t){for(var r,n=new Q.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),a=1/t.unitsPerEm,o={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontBBox:t.fontBBox||[0,0,0,0],fontMatrix:[a,0,0,a,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},s=[],i=1;i<e.length;i+=1)r=e.get(i),s.push(r.name);var c=[];n.header=new Q.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),n.nameIndex=function(e){var t=new Q.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var r=0;r<e.length;r+=1)t.names.push({name:"name_"+r,type:"NAME",value:e[r]});return t}([t.postScriptName]);var u=Ne(o,c);n.topDictIndex=Fe(u),n.globalSubrIndex=new Q.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),n.charsets=function(e,t){for(var r=new Q.Record("Charsets",[{name:"format",type:"Card8",value:0}]),n=0;n<e.length;n+=1){var a=Pe(e[n],t);r.fields.push({name:"glyph_"+n,type:"SID",value:a})}return r}(s,c),n.charStringsIndex=function(e){for(var t=new Q.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<e.length;r+=1){var n=e.get(r),a=Ge(n);t.charStrings.push({name:n.name,type:"CHARSTRING",value:a})}return t}(e),n.privateDict=function(e,t){var r=new Q.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=Be(Le,e,t),r}({},c),n.stringIndex=function(e){var t=new Q.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var r=0;r<e.length;r+=1)t.strings.push({name:"string_"+r,type:"STRING",value:e[r]});return t}(c);var l=n.header.sizeOf()+n.nameIndex.sizeOf()+n.topDictIndex.sizeOf()+n.stringIndex.sizeOf()+n.globalSubrIndex.sizeOf();return o.charset=l,o.encoding=0,o.charStrings=o.charset+n.charsets.sizeOf(),o.private[1]=o.charStrings+n.charStringsIndex.sizeOf(),u=Ne(o,c),n.topDictIndex=Fe(u),n}};var _e={parse:function(e,t){var r={},n=new se.Parser(e,t);return r.version=n.parseVersion(),r.fontRevision=Math.round(1e3*n.parseFixed())/1e3,r.checkSumAdjustment=n.parseULong(),r.magicNumber=n.parseULong(),L.argument(1594834165===r.magicNumber,"Font header has wrong magic number."),r.flags=n.parseUShort(),r.unitsPerEm=n.parseUShort(),r.created=n.parseLongDateTime(),r.modified=n.parseLongDateTime(),r.xMin=n.parseShort(),r.yMin=n.parseShort(),r.xMax=n.parseShort(),r.yMax=n.parseShort(),r.macStyle=n.parseUShort(),r.lowestRecPPEM=n.parseUShort(),r.fontDirectionHint=n.parseShort(),r.indexToLocFormat=n.parseShort(),r.glyphDataFormat=n.parseShort(),r},make:function(e){var t=Math.round((new Date).getTime()/1e3)+2082844800,r=t;return e.createdTimestamp&&(r=e.createdTimestamp+2082844800),new Q.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:r},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}};var He={parse:function(e,t){var r={},n=new se.Parser(e,t);return r.version=n.parseVersion(),r.ascender=n.parseShort(),r.descender=n.parseShort(),r.lineGap=n.parseShort(),r.advanceWidthMax=n.parseUShort(),r.minLeftSideBearing=n.parseShort(),r.minRightSideBearing=n.parseShort(),r.xMaxExtent=n.parseShort(),r.caretSlopeRise=n.parseShort(),r.caretSlopeRun=n.parseShort(),r.caretOffset=n.parseShort(),n.relativeOffset+=8,r.metricDataFormat=n.parseShort(),r.numberOfHMetrics=n.parseUShort(),r},make:function(e){return new Q.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}};var Ve={parse:function(e,t,r,n,a,o,s){s.lowMemory?function(e,t,r,n,a){var o,s;e._hmtxTableData={};for(var i=new se.Parser(t,r),c=0;c<a;c+=1)c<n&&(o=i.parseUShort(),s=i.parseShort()),e._hmtxTableData[c]={advanceWidth:o,leftSideBearing:s}}(e,t,r,n,a):function(e,t,r,n,a){for(var o,s,i=new se.Parser(e,t),c=0;c<n;c+=1){c<r&&(o=i.parseUShort(),s=i.parseShort());var u=a.get(c);u.advanceWidth=o,u.leftSideBearing=s}}(t,r,n,a,o)},make:function(e){for(var t=new Q.Table("hmtx",[]),r=0;r<e.length;r+=1){var n=e.get(r),a=n.advanceWidth||0,o=n.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:a}),t.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:o})}return t}};var qe={make:function(e){for(var t=new Q.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:e.length}]),r="",n=12+4*e.length,a=0;a<e.length;++a){var o=r.indexOf(e[a]);o<0&&(o=r.length,r+=e[a]),t.fields.push({name:"offset "+a,type:"USHORT",value:n+o}),t.fields.push({name:"length "+a,type:"USHORT",value:e[a].length})}return t.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),t},parse:function(e,t){var r=new se.Parser(e,t),n=r.parseULong();L.argument(1===n,"Unsupported ltag table version."),r.skip("uLong",1);for(var a=r.parseULong(),o=[],s=0;s<a;s++){for(var i="",c=t+r.parseUShort(),u=r.parseUShort(),l=c;l<c+u;++l)i+=String.fromCharCode(e.getInt8(l));o.push(i)}return o}};var We={parse:function(e,t){var r={},n=new se.Parser(e,t);return r.version=n.parseVersion(),r.numGlyphs=n.parseUShort(),1===r.version&&(r.maxPoints=n.parseUShort(),r.maxContours=n.parseUShort(),r.maxCompositePoints=n.parseUShort(),r.maxCompositeContours=n.parseUShort(),r.maxZones=n.parseUShort(),r.maxTwilightPoints=n.parseUShort(),r.maxStorage=n.parseUShort(),r.maxFunctionDefs=n.parseUShort(),r.maxInstructionDefs=n.parseUShort(),r.maxStackElements=n.parseUShort(),r.maxSizeOfInstructions=n.parseUShort(),r.maxComponentElements=n.parseUShort(),r.maxComponentDepth=n.parseUShort()),r},make:function(e){return new Q.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}},Ye=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],Xe={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Ze={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},$e={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Ke(e,t,r){switch(e){case 0:if(65535===t)return"und";if(r)return r[t];break;case 1:return Xe[t];case 3:return $e[t]}}var Qe={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Je={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function et(e,t,r){switch(e){case 0:return"utf-16";case 1:return Je[r]||Qe[t];case 3:if(1===t||10===t)return"utf-16"}}function tt(e){var t={};for(var r in e)t[e[r]]=parseInt(r);return t}function rt(e,t,r,n,a,o){return new Q.Record("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:n},{name:"length",type:"USHORT",value:a},{name:"offset",type:"USHORT",value:o}])}function nt(e,t){var r=function(e,t){var r=e.length,n=t.length-r+1;e:for(var a=0;a<n;a++)for(;a<n;a++){for(var o=0;o<r;o++)if(t[a+o]!==e[o])continue e;return a}return-1}(e,t);if(r<0){r=t.length;for(var n=0,a=e.length;n<a;++n)t.push(e[n])}return r}var at={parse:function(e,t,r){for(var n={},a=new se.Parser(e,t),o=a.parseUShort(),s=a.parseUShort(),i=a.offset+a.parseUShort(),c=0;c<s;c++){var u=a.parseUShort(),l=a.parseUShort(),h=a.parseUShort(),f=a.parseUShort(),p=Ye[f]||f,d=a.parseUShort(),g=a.parseUShort(),v=Ke(u,h,r),m=et(u,l,h);if(void 0!==m&&void 0!==v){var b=void 0;if(b="utf-16"===m?D.UTF16(e,i+g,d):D.MACSTRING(e,i+g,d,m)){var y=n[p];void 0===y&&(y=n[p]={}),y[v]=b}}}return 1===o&&a.parseUShort(),n},make:function(e,t){var r,n=[],a={},o=tt(Ye);for(var s in e){var i=o[s];if(void 0===i&&(i=s),r=parseInt(i),isNaN(r))throw new Error('Name table entry "'+s+'" does not exist, see nameTableNames for complete list.');a[r]=e[s],n.push(r)}for(var c=tt(Xe),u=tt($e),l=[],h=[],f=0;f<n.length;f++){var p=a[r=n[f]];for(var d in p){var g=p[d],v=1,m=c[d],b=Ze[m],y=et(v,b,m),w=A.MACSTRING(g,y);void 0===w&&(v=0,(m=t.indexOf(d))<0&&(m=t.length,t.push(d)),b=4,w=A.UTF16(g));var x=nt(w,h);l.push(rt(v,b,m,r,w.length,x));var S=u[d];if(void 0!==S){var k=A.UTF16(g),O=nt(k,h);l.push(rt(3,1,S,r,k.length,O))}}}l.sort((function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID}));for(var E=new Q.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:l.length},{name:"stringOffset",type:"USHORT",value:6+12*l.length}]),T=0;T<l.length;T++)E.fields.push({name:"record_"+T,type:"RECORD",value:l[T]});return E.fields.push({name:"strings",type:"LITERAL",value:h}),E}},ot=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];var st={parse:function(e,t){var r={},n=new se.Parser(e,t);r.version=n.parseUShort(),r.xAvgCharWidth=n.parseShort(),r.usWeightClass=n.parseUShort(),r.usWidthClass=n.parseUShort(),r.fsType=n.parseUShort(),r.ySubscriptXSize=n.parseShort(),r.ySubscriptYSize=n.parseShort(),r.ySubscriptXOffset=n.parseShort(),r.ySubscriptYOffset=n.parseShort(),r.ySuperscriptXSize=n.parseShort(),r.ySuperscriptYSize=n.parseShort(),r.ySuperscriptXOffset=n.parseShort(),r.ySuperscriptYOffset=n.parseShort(),r.yStrikeoutSize=n.parseShort(),r.yStrikeoutPosition=n.parseShort(),r.sFamilyClass=n.parseShort(),r.panose=[];for(var a=0;a<10;a++)r.panose[a]=n.parseByte();return r.ulUnicodeRange1=n.parseULong(),r.ulUnicodeRange2=n.parseULong(),r.ulUnicodeRange3=n.parseULong(),r.ulUnicodeRange4=n.parseULong(),r.achVendID=String.fromCharCode(n.parseByte(),n.parseByte(),n.parseByte(),n.parseByte()),r.fsSelection=n.parseUShort(),r.usFirstCharIndex=n.parseUShort(),r.usLastCharIndex=n.parseUShort(),r.sTypoAscender=n.parseShort(),r.sTypoDescender=n.parseShort(),r.sTypoLineGap=n.parseShort(),r.usWinAscent=n.parseUShort(),r.usWinDescent=n.parseUShort(),r.version>=1&&(r.ulCodePageRange1=n.parseULong(),r.ulCodePageRange2=n.parseULong()),r.version>=2&&(r.sxHeight=n.parseShort(),r.sCapHeight=n.parseShort(),r.usDefaultChar=n.parseUShort(),r.usBreakChar=n.parseUShort(),r.usMaxContent=n.parseUShort()),r},make:function(e){return new Q.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},unicodeRanges:ot,getUnicodeRange:function(e){for(var t=0;t<ot.length;t+=1){var r=ot[t];if(e>=r.begin&&e<r.end)return t}return-1}};var it={parse:function(e,t){var r={},n=new se.Parser(e,t);switch(r.version=n.parseVersion(),r.italicAngle=n.parseFixed(),r.underlinePosition=n.parseShort(),r.underlineThickness=n.parseShort(),r.isFixedPitch=n.parseULong(),r.minMemType42=n.parseULong(),r.maxMemType42=n.parseULong(),r.minMemType1=n.parseULong(),r.maxMemType1=n.parseULong(),r.version){case 1:r.names=fe.slice();break;case 2:r.numberOfGlyphs=n.parseUShort(),r.glyphNameIndex=new Array(r.numberOfGlyphs);for(var a=0;a<r.numberOfGlyphs;a++)r.glyphNameIndex[a]=n.parseUShort();r.names=[];for(var o=0;o<r.numberOfGlyphs;o++)if(r.glyphNameIndex[o]>=fe.length){var s=n.parseChar();r.names.push(n.parseString(s))}break;case 2.5:r.numberOfGlyphs=n.parseUShort(),r.offset=new Array(r.numberOfGlyphs);for(var i=0;i<r.numberOfGlyphs;i++)r.offset[i]=n.parseChar()}return r},make:function(){return new Q.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},ct=new Array(9);ct[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ae.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(ae.coverage),substitute:this.parseOffset16List()}:void L.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},ct[2]=function(){var e=this.parseUShort();return L.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),sequences:this.parseListOfLists()}},ct[3]=function(){var e=this.parseUShort();return L.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),alternateSets:this.parseListOfLists()}},ct[4]=function(){var e=this.parseUShort();return L.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),ligatureSets:this.parseListOfLists((function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}}))}};var ut={sequenceIndex:ae.uShort,lookupListIndex:ae.uShort};ct[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(ae.coverage),ruleSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,ut)}}))};if(2===t)return{substFormat:t,coverage:this.parsePointer(ae.coverage),classDef:this.parsePointer(ae.classDef),classSets:this.parseListOfLists((function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,ut)}}))};if(3===t){var r=this.parseUShort(),n=this.parseUShort();return{substFormat:t,coverages:this.parseList(r,ae.pointer(ae.coverage)),lookupRecords:this.parseRecordList(n,ut)}}L.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},ct[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(ae.coverage),chainRuleSets:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ut)}}))}:2===t?{substFormat:2,coverage:this.parsePointer(ae.coverage),backtrackClassDef:this.parsePointer(ae.classDef),inputClassDef:this.parsePointer(ae.classDef),lookaheadClassDef:this.parsePointer(ae.classDef),chainClassSet:this.parseListOfLists((function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ut)}}))}:3===t?{substFormat:3,backtrackCoverage:this.parseList(ae.pointer(ae.coverage)),inputCoverage:this.parseList(ae.pointer(ae.coverage)),lookaheadCoverage:this.parseList(ae.pointer(ae.coverage)),lookupRecords:this.parseRecordList(ut)}:void L.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},ct[7]=function(){var e=this.parseUShort();L.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),r=new ae(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:ct[t].call(r)}},ct[8]=function(){var e=this.parseUShort();return L.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ae.coverage),backtrackCoverage:this.parseList(ae.pointer(ae.coverage)),lookaheadCoverage:this.parseList(ae.pointer(ae.coverage)),substitutes:this.parseUShortList()}};var lt=new Array(9);lt[1]=function(e){return 1===e.substFormat?new Q.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Q.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new Q.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new Q.Coverage(e.coverage)}].concat(Q.ushortList("substitute",e.substitute)))},lt[3]=function(e){return L.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new Q.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Q.Coverage(e.coverage)}].concat(Q.tableList("altSet",e.alternateSets,(function(e){return new Q.Table("alternateSetTable",Q.ushortList("alternate",e))}))))},lt[4]=function(e){return L.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new Q.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new Q.Coverage(e.coverage)}].concat(Q.tableList("ligSet",e.ligatureSets,(function(e){return new Q.Table("ligatureSetTable",Q.tableList("ligature",e,(function(e){return new Q.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(Q.ushortList("component",e.components,e.components.length+1)))})))}))))};var ht={parse:function(e,t){var r=new ae(e,t=t||0),n=r.parseVersion(1);return L.argument(1===n||1.1===n,"Unsupported GSUB table version."),1===n?{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(ct)}:{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(ct),variations:r.parseFeatureVariationsList()}},make:function(e){return new Q.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Q.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new Q.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new Q.LookupList(e.lookups,lt)}])}};var ft={parse:function(e,t){var r=new se.Parser(e,t),n=r.parseULong();L.argument(1===n,"Unsupported META table version."),r.parseULong(),r.parseULong();for(var a=r.parseULong(),o={},s=0;s<a;s++){var i=r.parseTag(),c=r.parseULong(),u=r.parseULong(),l=D.UTF8(e,t+c,u);o[i]=l}return o},make:function(e){var t=Object.keys(e).length,r="",n=16+12*t,a=new Q.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:n},{name:"numTags",type:"ULONG",value:t}]);for(var o in e){var s=r.length;r+=e[o],a.fields.push({name:"tag "+o,type:"TAG",value:o}),a.fields.push({name:"offset "+o,type:"ULONG",value:n+s}),a.fields.push({name:"length "+o,type:"ULONG",value:e[o].length})}return a.fields.push({name:"stringPool",type:"CHARARRAY",value:r}),a}};function pt(e){return Math.log(e)/Math.log(2)|0}function dt(e){for(;e.length%4!=0;)e.push(0);for(var t=0,r=0;r<e.length;r+=4)t+=(e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];return t%=Math.pow(2,32)}function gt(e,t,r,n){return new Q.Record("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==r?r:0},{name:"length",type:"ULONG",value:void 0!==n?n:0}])}function vt(e){var t=new Q.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var r=Math.pow(2,pt(t.numTables));t.searchRange=16*r,t.entrySelector=pt(r),t.rangeShift=16*t.numTables-t.searchRange;for(var n=[],a=[],o=t.sizeOf()+gt().sizeOf()*t.numTables;o%4!=0;)o+=1,a.push({name:"padding",type:"BYTE",value:0});for(var s=0;s<e.length;s+=1){var i=e[s];L.argument(4===i.tableName.length,"Table name"+i.tableName+" is invalid.");var c=i.sizeOf(),u=gt(i.tableName,dt(i.encode()),o,c);for(n.push({name:u.tag+" Table Record",type:"RECORD",value:u}),a.push({name:i.tableName+" table",type:"RECORD",value:i}),o+=c,L.argument(!isNaN(o),"Something went wrong calculating the offset.");o%4!=0;)o+=1,a.push({name:"padding",type:"BYTE",value:0})}return n.sort((function(e,t){return e.value.tag>t.value.tag?1:-1})),t.fields=t.fields.concat(n),t.fields=t.fields.concat(a),t}function mt(e,t,r){for(var n=0;n<t.length;n+=1){var a=e.charToGlyphIndex(t[n]);if(a>0)return e.glyphs.get(a).getMetrics()}return r}function bt(e){for(var t=0,r=0;r<e.length;r+=1)t+=e[r];return t/e.length}var yt={make:vt,fontToTable:function(e){for(var t,r=[],n=[],a=[],o=[],s=[],i=[],c=[],u=0,l=0,h=0,f=0,p=0,d=0;d<e.glyphs.length;d+=1){var g=e.glyphs.get(d),v=0|g.unicode;if(isNaN(g.advanceWidth))throw new Error("Glyph "+g.name+" ("+d+"): advanceWidth is not a number.");(t>v||void 0===t)&&v>0&&(t=v),u<v&&(u=v);var m=st.getUnicodeRange(v);if(m<32)l|=1<<m;else if(m<64)h|=1<<m-32;else if(m<96)f|=1<<m-64;else{if(!(m<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");p|=1<<m-96}if(".notdef"!==g.name){var b=g.getMetrics();r.push(b.xMin),n.push(b.yMin),a.push(b.xMax),o.push(b.yMax),i.push(b.leftSideBearing),c.push(b.rightSideBearing),s.push(g.advanceWidth)}}var y={xMin:Math.min.apply(null,r),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,a),yMax:Math.max.apply(null,o),advanceWidthMax:Math.max.apply(null,s),advanceWidthAvg:bt(s),minLeftSideBearing:Math.min.apply(null,i),maxLeftSideBearing:Math.max.apply(null,i),minRightSideBearing:Math.min.apply(null,c)};y.ascender=e.ascender,y.descender=e.descender;var w=_e.make({flags:3,unitsPerEm:e.unitsPerEm,xMin:y.xMin,yMin:y.yMin,xMax:y.xMax,yMax:y.yMax,lowestRecPPEM:3,createdTimestamp:e.createdTimestamp}),x=He.make({ascender:y.ascender,descender:y.descender,advanceWidthMax:y.advanceWidthMax,minLeftSideBearing:y.minLeftSideBearing,minRightSideBearing:y.minRightSideBearing,xMaxExtent:y.maxLeftSideBearing+(y.xMax-y.xMin),numberOfHMetrics:e.glyphs.length}),S=We.make(e.glyphs.length),k=st.make(Object.assign({xAvgCharWidth:Math.round(y.advanceWidthAvg),usFirstCharIndex:t,usLastCharIndex:u,ulUnicodeRange1:l,ulUnicodeRange2:h,ulUnicodeRange3:f,ulUnicodeRange4:p,sTypoAscender:y.ascender,sTypoDescender:y.descender,sTypoLineGap:0,usWinAscent:y.yMax,usWinDescent:Math.abs(y.yMin),ulCodePageRange1:1,sxHeight:mt(e,"xyvw",{yMax:Math.round(y.ascender/2)}).yMax,sCapHeight:mt(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",y).yMax,usDefaultChar:e.hasChar(" ")?32:0,usBreakChar:e.hasChar(" ")?32:0},e.tables.os2)),O=Ve.make(e.glyphs),E=ce.make(e.glyphs),T=e.getEnglishName("fontFamily"),U=e.getEnglishName("fontSubfamily"),R=T+" "+U,M=e.getEnglishName("postScriptName");M||(M=T.replace(/\s/g,"")+"-"+U);var C={};for(var L in e.names)C[L]=e.names[L];C.uniqueID||(C.uniqueID={en:e.getEnglishName("manufacturer")+":"+R}),C.postScriptName||(C.postScriptName={en:M}),C.preferredFamily||(C.preferredFamily=e.names.fontFamily),C.preferredSubfamily||(C.preferredSubfamily=e.names.fontSubfamily);var D=[],A=at.make(C,D),I=D.length>0?qe.make(D):void 0,j=it.make(),P=ze.make(e.glyphs,{version:e.getEnglishName("version"),fullName:R,familyName:T,weightName:U,postScriptName:M,unitsPerEm:e.unitsPerEm,fontBBox:[0,y.yMin,y.ascender,y.advanceWidthMax]}),B=e.metas&&Object.keys(e.metas).length>0?ft.make(e.metas):void 0,N=[w,x,S,k,A,E,j,P,O];I&&N.push(I),e.tables.gsub&&N.push(ht.make(e.tables.gsub)),B&&N.push(B);for(var F=vt(N),G=dt(F.encode()),z=F.fields,_=!1,H=0;H<z.length;H+=1)if("head table"===z[H].name){z[H].value.checkSumAdjustment=2981146554-G,_=!0;break}if(!_)throw new Error("Could not find head table with checkSum to adjust.");return F},computeCheckSum:dt};function wt(e,t){for(var r=0,n=e.length-1;r<=n;){var a=r+n>>>1,o=e[a].tag;if(o===t)return a;o<t?r=a+1:n=a-1}return-r-1}function xt(e,t){for(var r=0,n=e.length-1;r<=n;){var a=r+n>>>1,o=e[a];if(o===t)return a;o<t?r=a+1:n=a-1}return-r-1}function St(e,t){for(var r,n=0,a=e.length-1;n<=a;){var o=n+a>>>1,s=(r=e[o]).start;if(s===t)return r;s<t?n=o+1:a=o-1}if(n>0)return t>(r=e[n-1]).end?0:r}function kt(e,t){this.font=e,this.tableName=t}function Ot(e){kt.call(this,e,"gpos")}function Et(e){kt.call(this,e,"gsub")}function Tt(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Ut(e,t,r){for(var n=e.subtables,a=0;a<n.length;a++){var o=n[a];if(o.substFormat===t)return o}if(r)return n.push(r),r}function Rt(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;++n)r[n]=e[n];return t}function Mt(e,t){if(!e)throw t}function Ct(e,t,r,n,a){var o;return(t&n)>0?(o=e.parseByte(),0==(t&a)&&(o=-o),o=r+o):o=(t&a)>0?r:r+e.parseShort(),o}function Lt(e,t,r){var n,a,o=new se.Parser(t,r);if(e.numberOfContours=o.parseShort(),e._xMin=o.parseShort(),e._yMin=o.parseShort(),e._xMax=o.parseShort(),e._yMax=o.parseShort(),e.numberOfContours>0){for(var s=e.endPointIndices=[],i=0;i<e.numberOfContours;i+=1)s.push(o.parseUShort());e.instructionLength=o.parseUShort(),e.instructions=[];for(var c=0;c<e.instructionLength;c+=1)e.instructions.push(o.parseByte());var u=s[s.length-1]+1;n=[];for(var l=0;l<u;l+=1)if(a=o.parseByte(),n.push(a),(8&a)>0)for(var h=o.parseByte(),f=0;f<h;f+=1)n.push(a),l+=1;if(L.argument(n.length===u,"Bad flags."),s.length>0){var p,d=[];if(u>0){for(var g=0;g<u;g+=1)a=n[g],(p={}).onCurve=!!(1&a),p.lastPointOfContour=s.indexOf(g)>=0,d.push(p);for(var v=0,m=0;m<u;m+=1)a=n[m],(p=d[m]).x=Ct(o,a,v,2,16),v=p.x;for(var b=0,y=0;y<u;y+=1)a=n[y],(p=d[y]).y=Ct(o,a,b,4,32),b=p.y}e.points=d}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var w=!0;w;){n=o.parseUShort();var x={glyphIndex:o.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&n)>0?(2&n)>0?(x.dx=o.parseShort(),x.dy=o.parseShort()):x.matchedPoints=[o.parseUShort(),o.parseUShort()]:(2&n)>0?(x.dx=o.parseChar(),x.dy=o.parseChar()):x.matchedPoints=[o.parseByte(),o.parseByte()],(8&n)>0?x.xScale=x.yScale=o.parseF2Dot14():(64&n)>0?(x.xScale=o.parseF2Dot14(),x.yScale=o.parseF2Dot14()):(128&n)>0&&(x.xScale=o.parseF2Dot14(),x.scale01=o.parseF2Dot14(),x.scale10=o.parseF2Dot14(),x.yScale=o.parseF2Dot14()),e.components.push(x),w=!!(32&n)}if(256&n){e.instructionLength=o.parseUShort(),e.instructions=[];for(var S=0;S<e.instructionLength;S+=1)e.instructions.push(o.parseByte())}}}function Dt(e,t){for(var r=[],n=0;n<e.length;n+=1){var a=e[n],o={x:t.xScale*a.x+t.scale01*a.y+t.dx,y:t.scale10*a.x+t.yScale*a.y+t.dy,onCurve:a.onCurve,lastPointOfContour:a.lastPointOfContour};r.push(o)}return r}function At(e){var t=new R;if(!e)return t;for(var r=function(e){for(var t=[],r=[],n=0;n<e.length;n+=1){var a=e[n];r.push(a),a.lastPointOfContour&&(t.push(r),r=[])}return L.argument(0===r.length,"There are still points left in the current contour."),t}(e),n=0;n<r.length;++n){var a=r[n],o=null,s=a[a.length-1],i=a[0];if(s.onCurve)t.moveTo(s.x,s.y);else if(i.onCurve)t.moveTo(i.x,i.y);else{var c={x:.5*(s.x+i.x),y:.5*(s.y+i.y)};t.moveTo(c.x,c.y)}for(var u=0;u<a.length;++u)if(o=s,s=i,i=a[(u+1)%a.length],s.onCurve)t.lineTo(s.x,s.y);else{var l=i;o.onCurve||{x:.5*(s.x+o.x),y:.5*(s.y+o.y)},i.onCurve||(l={x:.5*(s.x+i.x),y:.5*(s.y+i.y)}),t.quadraticCurveTo(s.x,s.y,l.x,l.y)}t.closePath()}return t}function It(e,t){if(t.isComposite)for(var r=0;r<t.components.length;r+=1){var n=t.components[r],a=e.get(n.glyphIndex);if(a.getPath(),a.points){var o=void 0;if(void 0===n.matchedPoints)o=Dt(a.points,n);else{if(n.matchedPoints[0]>t.points.length-1||n.matchedPoints[1]>a.points.length-1)throw Error("Matched points out of range in "+t.name);var s=t.points[n.matchedPoints[0]],i=a.points[n.matchedPoints[1]],c={xScale:n.xScale,scale01:n.scale01,scale10:n.scale10,yScale:n.yScale,dx:0,dy:0};i=Dt([i],c)[0],c.dx=s.x-i.x,c.dy=s.y-i.y,o=Dt(a.points,c)}t.points=t.points.concat(o)}}return At(t.points)}kt.prototype={searchTag:wt,binSearch:xt,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map((function(e){return e.tag})):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,r=0;r<e.scripts.length;r++){var n=e.scripts[r].tag;if("DFLT"===n)return n;"latn"===n&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(e,t){var r=this.getTable(t);if(r){e=e||"DFLT";var n=r.scripts,a=wt(r.scripts,e);if(a>=0)return n[a].script;if(t){var o={tag:e,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return n.splice(-1-a,0,o),o.script}}},getLangSysTable:function(e,t,r){var n=this.getScriptTable(e,r);if(n){if(!t||"dflt"===t||"DFLT"===t)return n.defaultLangSys;var a=wt(n.langSysRecords,t);if(a>=0)return n.langSysRecords[a].langSys;if(r){var o={tag:t,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return n.langSysRecords.splice(-1-a,0,o),o.langSys}}},getFeatureTable:function(e,t,r,n){var a=this.getLangSysTable(e,t,n);if(a){for(var o,s=a.featureIndexes,i=this.font.tables[this.tableName].features,c=0;c<s.length;c++)if((o=i[s[c]]).tag===r)return o.feature;if(n){var u=i.length;return L.assert(0===u||r>=i[u-1].tag,"Features must be added in alphabetical order."),o={tag:r,feature:{params:0,lookupListIndexes:[]}},i.push(o),s.push(u),o.feature}}},getLookupTables:function(e,t,r,n,a){var o=this.getFeatureTable(e,t,r,a),s=[];if(o){for(var i,c=o.lookupListIndexes,u=this.font.tables[this.tableName].lookups,l=0;l<c.length;l++)(i=u[c[l]]).lookupType===n&&s.push(i);if(0===s.length&&a){i={lookupType:n,lookupFlag:0,subtables:[],markFilteringSet:void 0};var h=u.length;return u.push(i),c.push(h),[i]}}return s},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var r=St(e.ranges,t);return r?r.classId:0}},getCoverageIndex:function(e,t){switch(e.format){case 1:var r=xt(e.glyphs,t);return r>=0?r:-1;case 2:var n=St(e.ranges,t);return n?n.index+t-n.start:-1}},expandCoverage:function(e){if(1===e.format)return e.glyphs;for(var t=[],r=e.ranges,n=0;n<r.length;n++)for(var a=r[n],o=a.start,s=a.end,i=o;i<=s;i++)t.push(i);return t}},Ot.prototype=kt.prototype,Ot.prototype.init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},Ot.prototype.getKerningValue=function(e,t,r){for(var n=0;n<e.length;n++)for(var a=e[n].subtables,o=0;o<a.length;o++){var s=a[o],i=this.getCoverageIndex(s.coverage,t);if(!(i<0))switch(s.posFormat){case 1:for(var c=s.pairSets[i],u=0;u<c.length;u++){var l=c[u];if(l.secondGlyph===r)return l.value1&&l.value1.xAdvance||0}break;case 2:var h=this.getGlyphClass(s.classDef1,t),f=this.getGlyphClass(s.classDef2,r),p=s.classRecords[h][f];return p.value1&&p.value1.xAdvance||0}}return 0},Ot.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},Et.prototype=kt.prototype,Et.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Et.prototype.getSingle=function(e,t,r){for(var n=[],a=this.getLookupTables(t,r,e,1),o=0;o<a.length;o++)for(var s=a[o].subtables,i=0;i<s.length;i++){var c=s[i],u=this.expandCoverage(c.coverage),l=void 0;if(1===c.substFormat){var h=c.deltaGlyphId;for(l=0;l<u.length;l++){var f=u[l];n.push({sub:f,by:f+h})}}else{var p=c.substitute;for(l=0;l<u.length;l++)n.push({sub:u[l],by:p[l]})}}return n},Et.prototype.getAlternates=function(e,t,r){for(var n=[],a=this.getLookupTables(t,r,e,3),o=0;o<a.length;o++)for(var s=a[o].subtables,i=0;i<s.length;i++)for(var c=s[i],u=this.expandCoverage(c.coverage),l=c.alternateSets,h=0;h<u.length;h++)n.push({sub:u[h],by:l[h]});return n},Et.prototype.getLigatures=function(e,t,r){for(var n=[],a=this.getLookupTables(t,r,e,4),o=0;o<a.length;o++)for(var s=a[o].subtables,i=0;i<s.length;i++)for(var c=s[i],u=this.expandCoverage(c.coverage),l=c.ligatureSets,h=0;h<u.length;h++)for(var f=u[h],p=l[h],d=0;d<p.length;d++){var g=p[d];n.push({sub:[f].concat(g.components),by:g.ligGlyph})}return n},Et.prototype.addSingle=function(e,t,r,n){var a=Ut(this.getLookupTables(r,n,e,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});L.assert(1===a.coverage.format,"Ligature: unable to modify coverage table format "+a.coverage.format);var o=t.sub,s=this.binSearch(a.coverage.glyphs,o);s<0&&(s=-1-s,a.coverage.glyphs.splice(s,0,o),a.substitute.splice(s,0,0)),a.substitute[s]=t.by},Et.prototype.addAlternate=function(e,t,r,n){var a=Ut(this.getLookupTables(r,n,e,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});L.assert(1===a.coverage.format,"Ligature: unable to modify coverage table format "+a.coverage.format);var o=t.sub,s=this.binSearch(a.coverage.glyphs,o);s<0&&(s=-1-s,a.coverage.glyphs.splice(s,0,o),a.alternateSets.splice(s,0,0)),a.alternateSets[s]=t.by},Et.prototype.addLigature=function(e,t,r,n){var a=this.getLookupTables(r,n,e,4,!0)[0],o=a.subtables[0];o||(o={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},a.subtables[0]=o),L.assert(1===o.coverage.format,"Ligature: unable to modify coverage table format "+o.coverage.format);var s=t.sub[0],i=t.sub.slice(1),c={ligGlyph:t.by,components:i},u=this.binSearch(o.coverage.glyphs,s);if(u>=0){for(var l=o.ligatureSets[u],h=0;h<l.length;h++)if(Tt(l[h].components,i))return;l.push(c)}else u=-1-u,o.coverage.glyphs.splice(u,0,s),o.ligatureSets.splice(u,0,[c])},Et.prototype.getFeature=function(e,t,r){if(/ss\d\d/.test(e))return this.getSingle(e,t,r);switch(e){case"aalt":case"salt":return this.getSingle(e,t,r).concat(this.getAlternates(e,t,r));case"dlig":case"liga":case"rlig":return this.getLigatures(e,t,r)}},Et.prototype.add=function(e,t,r,n){if(/ss\d\d/.test(e))return this.addSingle(e,t,r,n);switch(e){case"aalt":case"salt":return"number"==typeof t.by?this.addSingle(e,t,r,n):this.addAlternate(e,t,r,n);case"dlig":case"liga":case"rlig":return this.addLigature(e,t,r,n)}};var jt,Pt,Bt,Nt,Ft={getPath:At,parse:function(e,t,r,n,a){return a.lowMemory?function(e,t,r,n){var a=new Se.GlyphSet(n);return n._push=function(o){var s=r[o];s!==r[o+1]?a.push(o,Se.ttfGlyphLoader(n,o,Lt,e,t+s,It)):a.push(o,Se.glyphLoader(n,o))},a}(e,t,r,n):function(e,t,r,n){for(var a=new Se.GlyphSet(n),o=0;o<r.length-1;o+=1){var s=r[o];s!==r[o+1]?a.push(o,Se.ttfGlyphLoader(n,o,Lt,e,t+s,It)):a.push(o,Se.glyphLoader(n,o))}return a}(e,t,r,n)}};function Gt(e){this.font=e,this.getCommands=function(e){return Ft.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function zt(e){return e}function _t(e){return Math.sign(e)*Math.round(Math.abs(e))}function Ht(e){return Math.sign(e)*Math.round(Math.abs(2*e))/2}function Vt(e){return Math.sign(e)*(Math.round(Math.abs(e)+.5)-.5)}function qt(e){return Math.sign(e)*Math.ceil(Math.abs(e))}function Wt(e){return Math.sign(e)*Math.floor(Math.abs(e))}var Yt=function(e){var t=this.srPeriod,r=this.srPhase,n=1;return e<0&&(e=-e,n=-1),e+=this.srThreshold-r,e=Math.trunc(e/t)*t,(e+=r)<0?r*n:e*n},Xt={x:1,y:0,axis:"x",distance:function(e,t,r,n){return(r?e.xo:e.x)-(n?t.xo:t.x)},interpolate:function(e,t,r,n){var a,o,s,i,c,u,l;if(!n||n===this)return a=e.xo-t.xo,o=e.xo-r.xo,c=t.x-t.xo,u=r.x-r.xo,0===(l=(s=Math.abs(a))+(i=Math.abs(o)))?void(e.x=e.xo+(c+u)/2):void(e.x=e.xo+(c*i+u*s)/l);a=n.distance(e,t,!0,!0),o=n.distance(e,r,!0,!0),c=n.distance(t,t,!1,!0),u=n.distance(r,r,!1,!0),0!==(l=(s=Math.abs(a))+(i=Math.abs(o)))?Xt.setRelative(e,e,(c*i+u*s)/l,n,!0):Xt.setRelative(e,e,(c+u)/2,n,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(e,t,r,n,a){if(n&&n!==this){var o=a?t.xo:t.x,s=a?t.yo:t.y,i=o+r*n.x,c=s+r*n.y;e.x=i+(e.y-c)/n.normalSlope}else e.x=(a?t.xo:t.x)+r},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},Zt={x:0,y:1,axis:"y",distance:function(e,t,r,n){return(r?e.yo:e.y)-(n?t.yo:t.y)},interpolate:function(e,t,r,n){var a,o,s,i,c,u,l;if(!n||n===this)return a=e.yo-t.yo,o=e.yo-r.yo,c=t.y-t.yo,u=r.y-r.yo,0===(l=(s=Math.abs(a))+(i=Math.abs(o)))?void(e.y=e.yo+(c+u)/2):void(e.y=e.yo+(c*i+u*s)/l);a=n.distance(e,t,!0,!0),o=n.distance(e,r,!0,!0),c=n.distance(t,t,!1,!0),u=n.distance(r,r,!1,!0),0!==(l=(s=Math.abs(a))+(i=Math.abs(o)))?Zt.setRelative(e,e,(c*i+u*s)/l,n,!0):Zt.setRelative(e,e,(c+u)/2,n,!0)},normalSlope:0,setRelative:function(e,t,r,n,a){if(n&&n!==this){var o=a?t.xo:t.x,s=a?t.yo:t.y,i=o+r*n.x,c=s+r*n.y;e.y=c+n.normalSlope*(e.x-i)}else e.y=(a?t.yo:t.y)+r},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}};function $t(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function Kt(e,t){var r=Math.sqrt(e*e+t*t);return t/=r,1===(e/=r)&&0===t?Xt:0===e&&1===t?Zt:new $t(e,t)}function Qt(e,t,r,n){this.x=this.xo=Math.round(64*e)/64,this.y=this.yo=Math.round(64*t)/64,this.lastPointOfContour=r,this.onCurve=n,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(Xt),Object.freeze(Zt),$t.prototype.distance=function(e,t,r,n){return this.x*Xt.distance(e,t,r,n)+this.y*Zt.distance(e,t,r,n)},$t.prototype.interpolate=function(e,t,r,n){var a,o,s,i,c,u,l;s=n.distance(e,t,!0,!0),i=n.distance(e,r,!0,!0),a=n.distance(t,t,!1,!0),o=n.distance(r,r,!1,!0),0!==(l=(c=Math.abs(s))+(u=Math.abs(i)))?this.setRelative(e,e,(a*u+o*c)/l,n,!0):this.setRelative(e,e,(a+o)/2,n,!0)},$t.prototype.setRelative=function(e,t,r,n,a){n=n||this;var o=a?t.xo:t.x,s=a?t.yo:t.y,i=o+r*n.x,c=s+r*n.y,u=n.normalSlope,l=this.slope,h=e.x,f=e.y;e.x=(l*h-u*i+c-f)/(l-u),e.y=l*(e.x-h)+f},$t.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},Qt.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},Qt.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var Jt=Object.freeze(new Qt(0,0)),er={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function tr(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Xt,this.round=_t}}function rr(e){for(var t=e.tZone=new Array(e.gZone.length),r=0;r<t.length;r++)t[r]=new Qt(0,0)}function nr(e,t){var r,n=e.prog,a=e.ip,o=1;do{if(88===(r=n[++a]))o++;else if(89===r)o--;else if(64===r)a+=n[a+1]+1;else if(65===r)a+=2*n[a+1]+1;else if(r>=176&&r<=183)a+=r-176+1;else if(r>=184&&r<=191)a+=2*(r-184+1);else if(t&&1===o&&27===r)break}while(o>0);e.ip=a}function ar(e,t){exports.DEBUG&&console.log(t.step,"SVTCA["+e.axis+"]"),t.fv=t.pv=t.dpv=e}function or(e,t){exports.DEBUG&&console.log(t.step,"SPVTCA["+e.axis+"]"),t.pv=t.dpv=e}function sr(e,t){exports.DEBUG&&console.log(t.step,"SFVTCA["+e.axis+"]"),t.fv=e}function ir(e,t){var r,n,a=t.stack,o=a.pop(),s=a.pop(),i=t.z2[o],c=t.z1[s];exports.DEBUG&&console.log("SPVTL["+e+"]",o,s),e?(r=i.y-c.y,n=c.x-i.x):(r=c.x-i.x,n=c.y-i.y),t.pv=t.dpv=Kt(r,n)}function cr(e,t){var r,n,a=t.stack,o=a.pop(),s=a.pop(),i=t.z2[o],c=t.z1[s];exports.DEBUG&&console.log("SFVTL["+e+"]",o,s),e?(r=i.y-c.y,n=c.x-i.x):(r=c.x-i.x,n=c.y-i.y),t.fv=Kt(r,n)}function ur(e){exports.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function lr(e,t){var r=t.stack.pop(),n=t.z0[r],a=t.fv,o=t.pv;exports.DEBUG&&console.log(t.step,"MDAP["+e+"]",r);var s=o.distance(n,Jt);e&&(s=t.round(s)),a.setRelative(n,Jt,s,o),a.touch(n),t.rp0=t.rp1=r}function hr(e,t){var r,n,a,o=t.z2,s=o.length-2;exports.DEBUG&&console.log(t.step,"IUP["+e.axis+"]");for(var i=0;i<s;i++)r=o[i],e.touched(r)||(n=r.prevTouched(e))!==r&&(n===(a=r.nextTouched(e))&&e.setRelative(r,r,e.distance(n,n,!1,!0),e,!0),e.interpolate(r,n,a,e))}function fr(e,t){for(var r=t.stack,n=e?t.rp1:t.rp2,a=(e?t.z0:t.z1)[n],o=t.fv,s=t.pv,i=t.loop,c=t.z2;i--;){var u=r.pop(),l=c[u],h=s.distance(a,a,!1,!0);o.setRelative(l,l,h,s),o.touch(l),exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-i)+": ":"")+"SHP["+(e?"rp1":"rp2")+"]",u)}t.loop=1}function pr(e,t){var r=t.stack,n=e?t.rp1:t.rp2,a=(e?t.z0:t.z1)[n],o=t.fv,s=t.pv,i=r.pop(),c=t.z2[t.contours[i]],u=c;exports.DEBUG&&console.log(t.step,"SHC["+e+"]",i);var l=s.distance(a,a,!1,!0);do{u!==a&&o.setRelative(u,u,l,s),u=u.nextPointOnContour}while(u!==c)}function dr(e,t){var r,n,a=t.stack,o=e?t.rp1:t.rp2,s=(e?t.z0:t.z1)[o],i=t.fv,c=t.pv,u=a.pop();switch(exports.DEBUG&&console.log(t.step,"SHZ["+e+"]",u),u){case 0:r=t.tZone;break;case 1:r=t.gZone;break;default:throw new Error("Invalid zone")}for(var l=c.distance(s,s,!1,!0),h=r.length-2,f=0;f<h;f++)n=r[f],i.setRelative(n,n,l,c)}function gr(e,t){var r=t.stack,n=r.pop()/64,a=r.pop(),o=t.z1[a],s=t.z0[t.rp0],i=t.fv,c=t.pv;i.setRelative(o,s,n,c),i.touch(o),exports.DEBUG&&console.log(t.step,"MSIRP["+e+"]",n,a),t.rp1=t.rp0,t.rp2=a,e&&(t.rp0=a)}function vr(e,t){var r=t.stack,n=r.pop(),a=r.pop(),o=t.z0[a],s=t.fv,i=t.pv,c=t.cvt[n];exports.DEBUG&&console.log(t.step,"MIAP["+e+"]",n,"(",c,")",a);var u=i.distance(o,Jt);e&&(Math.abs(u-c)<t.cvCutIn&&(u=c),u=t.round(u)),s.setRelative(o,Jt,u,i),0===t.zp0&&(o.xo=o.x,o.yo=o.y),s.touch(o),t.rp0=t.rp1=a}function mr(e,t){var r=t.stack,n=r.pop(),a=t.z2[n];exports.DEBUG&&console.log(t.step,"GC["+e+"]",n),r.push(64*t.dpv.distance(a,Jt,e,!1))}function br(e,t){var r=t.stack,n=r.pop(),a=r.pop(),o=t.z1[n],s=t.z0[a],i=t.dpv.distance(s,o,e,e);exports.DEBUG&&console.log(t.step,"MD["+e+"]",n,a,"->",i),t.stack.push(Math.round(64*i))}function yr(e,t){var r=t.stack,n=r.pop(),a=t.fv,o=t.pv,s=t.ppem,i=t.deltaBase+16*(e-1),c=t.deltaShift,u=t.z0;exports.DEBUG&&console.log(t.step,"DELTAP["+e+"]",n,r);for(var l=0;l<n;l++){var h=r.pop(),f=r.pop();if(i+((240&f)>>4)===s){var p=(15&f)-8;p>=0&&p++,exports.DEBUG&&console.log(t.step,"DELTAPFIX",h,"by",p*c);var d=u[h];a.setRelative(d,d,p*c,o)}}}function wr(e,t){var r=t.stack,n=r.pop();exports.DEBUG&&console.log(t.step,"ROUND[]"),r.push(64*t.round(n/64))}function xr(e,t){var r=t.stack,n=r.pop(),a=t.ppem,o=t.deltaBase+16*(e-1),s=t.deltaShift;exports.DEBUG&&console.log(t.step,"DELTAC["+e+"]",n,r);for(var i=0;i<n;i++){var c=r.pop(),u=r.pop();if(o+((240&u)>>4)===a){var l=(15&u)-8;l>=0&&l++;var h=l*s;exports.DEBUG&&console.log(t.step,"DELTACFIX",c,"by",h),t.cvt[c]+=h}}}function Sr(e,t){var r,n,a=t.stack,o=a.pop(),s=a.pop(),i=t.z2[o],c=t.z1[s];exports.DEBUG&&console.log(t.step,"SDPVTL["+e+"]",o,s),e?(r=i.y-c.y,n=c.x-i.x):(r=c.x-i.x,n=c.y-i.y),t.dpv=Kt(r,n)}function kr(e,t){var r=t.stack,n=t.prog,a=t.ip;exports.DEBUG&&console.log(t.step,"PUSHB["+e+"]");for(var o=0;o<e;o++)r.push(n[++a]);t.ip=a}function Or(e,t){var r=t.ip,n=t.prog,a=t.stack;exports.DEBUG&&console.log(t.ip,"PUSHW["+e+"]");for(var o=0;o<e;o++){var s=n[++r]<<8|n[++r];32768&s&&(s=-(1+(65535^s))),a.push(s)}t.ip=r}function Er(e,t,r,n,a,o){var s,i,c,u,l=o.stack,h=e&&l.pop(),f=l.pop(),p=o.rp0,d=o.z0[p],g=o.z1[f],v=o.minDis,m=o.fv,b=o.dpv;c=(i=s=b.distance(g,d,!0,!0))>=0?1:-1,i=Math.abs(i),e&&(u=o.cvt[h],n&&Math.abs(i-u)<o.cvCutIn&&(i=u)),r&&i<v&&(i=v),n&&(i=o.round(i)),m.setRelative(g,d,c*i,b),m.touch(g),exports.DEBUG&&console.log(o.step,(e?"MIRP[":"MDRP[")+(t?"M":"m")+(r?">":"_")+(n?"R":"_")+(0===a?"Gr":1===a?"Bl":2===a?"Wh":"")+"]",e?h+"("+o.cvt[h]+","+u+")":"",f,"(d =",s,"->",c*i,")"),o.rp1=o.rp0,o.rp2=f,t&&(o.rp0=f)}function Tr(e){this.char=e,this.state={},this.activeState=null}function Ur(e,t,r){this.contextName=r,this.startIndex=e,this.endOffset=t}function Rr(e,t,r){this.contextName=e,this.openRange=null,this.ranges=[],this.checkStart=t,this.checkEnd=r}function Mr(e,t){this.context=e,this.index=t,this.length=e.length,this.current=e[t],this.backtrack=e.slice(0,t),this.lookahead=e.slice(t+1)}function Cr(e){this.eventId=e,this.subscribers=[]}function Lr(e){var t=this,r=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];r.forEach((function(e){Object.defineProperty(t.events,e,{value:new Cr(e)})})),e&&r.forEach((function(r){var n=e[r];"function"==typeof n&&t.events[r].subscribe(n)}));["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"].forEach((function(e){t.events[e].subscribe(t.updateContextsRanges)}))}function Dr(e){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],Lr.call(this,e)}function Ar(e){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(e)}function Ir(e){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(e)}function jr(e){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(e)}function Pr(e){return/[A-z]/.test(e)}function Br(e){this.font=e,this.features={}}function Nr(e){this.id=e.id,this.tag=e.tag,this.substitution=e.substitution}function Fr(e,t){if(!e)return-1;switch(t.format){case 1:return t.glyphs.indexOf(e);case 2:for(var r=t.ranges,n=0;n<r.length;n++){var a=r[n];if(e>=a.start&&e<=a.end){var o=e-a.start;return a.index+o}}break;default:return-1}return-1}function Gr(e,t){return-1===Fr(e,t.coverage)?null:e+t.deltaGlyphId}function zr(e,t){var r=Fr(e,t.coverage);return-1===r?null:t.substitute[r]}function _r(e,t){for(var r=[],n=0;n<e.length;n++){var a=e[n],o=t.current,s=Fr(o=Array.isArray(o)?o[0]:o,a);-1!==s&&r.push(s)}return r.length!==e.length?-1:r}function Hr(e,t){var r=t.inputCoverage.length+t.lookaheadCoverage.length+t.backtrackCoverage.length;if(e.context.length<r)return[];var n=_r(t.inputCoverage,e);if(-1===n)return[];var a=t.inputCoverage.length-1;if(e.lookahead.length<t.lookaheadCoverage.length)return[];for(var o=e.lookahead.slice(a);o.length&&jr(o[0].char);)o.shift();var s=new Mr(o,0),i=_r(t.lookaheadCoverage,s),c=[].concat(e.backtrack);for(c.reverse();c.length&&jr(c[0].char);)c.shift();if(c.length<t.backtrackCoverage.length)return[];var u=new Mr(c,0),l=_r(t.backtrackCoverage,u),h=[];if(n.length===t.inputCoverage.length&&i.length===t.lookaheadCoverage.length&&l.length===t.backtrackCoverage.length)for(var f=0;f<t.lookupRecords.length;f++)for(var p=t.lookupRecords[f].lookupListIndex,d=this.getLookupByIndex(p),g=0;g<d.subtables.length;g++){var v=d.subtables[g],m=this.getLookupMethod(d,v);if("12"===this.getSubstitutionType(d,v))for(var b=0;b<n.length;b++){var y=m(e.get(b));y&&h.push(y)}}return h}function Vr(e,t){var r,n=Fr(e.current,t.coverage);if(-1===n)return null;for(var a=t.ligatureSets[n],o=0;o<a.length;o++){r=a[o];for(var s=0;s<r.components.length;s++){if(e.lookahead[s]!==r.components[s])break;if(s===r.components.length-1)return r}}return null}function qr(e,t){var r=Fr(e,t.coverage);return-1===r?null:t.sequences[r]}Gt.prototype.exec=function(e,t){if("number"!=typeof t)throw new Error("Point size is not a number!");if(!(this._errorState>2)){var r=this.font,n=this._prepState;if(!n||n.ppem!==t){var a=this._fpgmState;if(!a){tr.prototype=er,(a=this._fpgmState=new tr("fpgm",r.tables.fpgm)).funcs=[],a.font=r,exports.DEBUG&&(console.log("---EXEC FPGM---"),a.step=-1);try{Pt(a)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}tr.prototype=a,(n=this._prepState=new tr("prep",r.tables.prep)).ppem=t;var o=r.tables.cvt;if(o)for(var s=n.cvt=new Array(o.length),i=t/r.unitsPerEm,c=0;c<o.length;c++)s[c]=o[c]*i;else n.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),n.step=-1);try{Pt(n)}catch(e){this._errorState<2&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(this._errorState>1))try{return Bt(e,n)}catch(e){return this._errorState<1&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},Bt=function(e,t){var r,n,a,o=t.ppem/t.font.unitsPerEm,s=o,i=e.components;if(tr.prototype=t,i){var c=t.font;n=[],r=[];for(var u=0;u<i.length;u++){var l=i[u],h=c.glyphs.get(l.glyphIndex);a=new tr("glyf",h.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+u+"---"),a.step=-1),Nt(h,a,o,s);for(var f=Math.round(l.dx*o),p=Math.round(l.dy*s),d=a.gZone,g=a.contours,v=0;v<d.length;v++){var m=d[v];m.xTouched=m.yTouched=!1,m.xo=m.x=m.x+f,m.yo=m.y=m.y+p}var b=n.length;n.push.apply(n,d);for(var y=0;y<g.length;y++)r.push(g[y]+b)}e.instructions&&!a.inhibitGridFit&&((a=new tr("glyf",e.instructions)).gZone=a.z0=a.z1=a.z2=n,a.contours=r,n.push(new Qt(0,0),new Qt(Math.round(e.advanceWidth*o),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),a.step=-1),Pt(a),n.length-=2)}else a=new tr("glyf",e.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),a.step=-1),Nt(e,a,o,s),n=a.gZone;return n},Nt=function(e,t,r,n){for(var a,o,s,i=e.points||[],c=i.length,u=t.gZone=t.z0=t.z1=t.z2=[],l=t.contours=[],h=0;h<c;h++)a=i[h],u[h]=new Qt(a.x*r,a.y*n,a.lastPointOfContour,a.onCurve);for(var f=0;f<c;f++)a=u[f],o||(o=a,l.push(f)),a.lastPointOfContour?(a.nextPointOnContour=o,o.prevPointOnContour=a,o=void 0):(s=u[f+1],a.nextPointOnContour=s,s.prevPointOnContour=a);if(!t.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",t.stack);for(var p=0;p<c;p++)console.log(p,u[p].x,u[p].y)}if(u.push(new Qt(0,0),new Qt(Math.round(e.advanceWidth*r),0)),Pt(t),u.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",t.stack);for(var d=0;d<c;d++)console.log(d,u[d].x,u[d].y)}}},Pt=function(e){var t=e.prog;if(t){var r,n=t.length;for(e.ip=0;e.ip<n;e.ip++){if(exports.DEBUG&&e.step++,!(r=jt[t[e.ip]]))throw new Error("unknown instruction: 0x"+Number(t[e.ip]).toString(16));r(e)}}},jt=[ar.bind(void 0,Zt),ar.bind(void 0,Xt),or.bind(void 0,Zt),or.bind(void 0,Xt),sr.bind(void 0,Zt),sr.bind(void 0,Xt),ir.bind(void 0,0),ir.bind(void 0,1),cr.bind(void 0,0),cr.bind(void 0,1),function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",r,n),e.pv=e.dpv=Kt(n,r)},function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"SPVFS[]",r,n),e.fv=Kt(n,r)},function(e){var t=e.stack,r=e.pv;exports.DEBUG&&console.log(e.step,"GPV[]"),t.push(16384*r.x),t.push(16384*r.y)},function(e){var t=e.stack,r=e.fv;exports.DEBUG&&console.log(e.step,"GFV[]"),t.push(16384*r.x),t.push(16384*r.y)},function(e){e.fv=e.pv,exports.DEBUG&&console.log(e.step,"SFVTPV[]")},function(e){var t=e.stack,r=t.pop(),n=t.pop(),a=t.pop(),o=t.pop(),s=t.pop(),i=e.z0,c=e.z1,u=i[r],l=i[n],h=c[a],f=c[o],p=e.z2[s];exports.DEBUG&&console.log("ISECT[], ",r,n,a,o,s);var d=u.x,g=u.y,v=l.x,m=l.y,b=h.x,y=h.y,w=f.x,x=f.y,S=(d-v)*(y-x)-(g-m)*(b-w),k=d*m-g*v,O=b*x-y*w;p.x=(k*(b-w)-O*(d-v))/S,p.y=(k*(y-x)-O*(g-m))/S},function(e){e.rp0=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP0[]",t),e.zp0=t,t){case 0:e.tZone||rr(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP1[]",t),e.zp1=t,t){case 0:e.tZone||rr(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZP2[]",t),e.zp2=t,t){case 0:e.tZone||rr(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){var t=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SZPS[]",t),e.zp0=e.zp1=e.zp2=t,t){case 0:e.tZone||rr(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer")}},function(e){e.loop=e.stack.pop(),exports.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){exports.DEBUG&&console.log(e.step,"RTG[]"),e.round=_t},function(e){exports.DEBUG&&console.log(e.step,"RTHG[]"),e.round=Vt},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SMD[]",t),e.minDis=t/64},function(e){exports.DEBUG&&console.log(e.step,"ELSE[]"),nr(e,!1)},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"JMPR[]",t),e.ip+=t-1},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCVTCI[]",t),e.cvCutIn=t/64},void 0,void 0,function(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DUP[]"),t.push(t[t.length-1])},ur,function(e){exports.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"SWAP[]"),t.push(r),t.push(n)},function(e){var t=e.stack;exports.DEBUG&&console.log(e.step,"DEPTH[]"),t.push(t.length)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"CINDEX[]",r),t.push(t[t.length-r])},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"MINDEX[]",r),t.push(t.splice(t.length-r,1)[0])},void 0,void 0,void 0,function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"LOOPCALL[]",r,n);var a=e.ip,o=e.prog;e.prog=e.funcs[r];for(var s=0;s<n;s++)Pt(e),exports.DEBUG&&console.log(++e.step,s+1<n?"next loopcall":"done loopcall",s);e.ip=a,e.prog=o},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"CALL[]",t);var r=e.ip,n=e.prog;e.prog=e.funcs[t],Pt(e),e.ip=r,e.prog=n,exports.DEBUG&&console.log(++e.step,"returning from",t)},function(e){if("fpgm"!==e.env)throw new Error("FDEF not allowed here");var t=e.stack,r=e.prog,n=e.ip,a=t.pop(),o=n;for(exports.DEBUG&&console.log(e.step,"FDEF[]",a);45!==r[++n];);e.ip=n,e.funcs[a]=r.slice(o+1,n)},void 0,lr.bind(void 0,0),lr.bind(void 0,1),hr.bind(void 0,Zt),hr.bind(void 0,Xt),fr.bind(void 0,0),fr.bind(void 0,1),pr.bind(void 0,0),pr.bind(void 0,1),dr.bind(void 0,0),dr.bind(void 0,1),function(e){for(var t=e.stack,r=e.loop,n=e.fv,a=t.pop()/64,o=e.z2;r--;){var s=t.pop(),i=o[s];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-r)+": ":"")+"SHPIX[]",s,a),n.setRelative(i,i,a),n.touch(i)}e.loop=1},function(e){for(var t=e.stack,r=e.rp1,n=e.rp2,a=e.loop,o=e.z0[r],s=e.z1[n],i=e.fv,c=e.dpv,u=e.z2;a--;){var l=t.pop(),h=u[l];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-a)+": ":"")+"IP[]",l,r,"<->",n),i.interpolate(h,o,s,c),i.touch(h)}e.loop=1},gr.bind(void 0,0),gr.bind(void 0,1),function(e){for(var t=e.stack,r=e.rp0,n=e.z0[r],a=e.loop,o=e.fv,s=e.pv,i=e.z1;a--;){var c=t.pop(),u=i[c];exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-a)+": ":"")+"ALIGNRP[]",c),o.setRelative(u,n,0,s),o.touch(u)}e.loop=1},function(e){exports.DEBUG&&console.log(e.step,"RTDG[]"),e.round=Ht},vr.bind(void 0,0),vr.bind(void 0,1),function(e){var t=e.prog,r=e.ip,n=e.stack,a=t[++r];exports.DEBUG&&console.log(e.step,"NPUSHB[]",a);for(var o=0;o<a;o++)n.push(t[++r]);e.ip=r},function(e){var t=e.ip,r=e.prog,n=e.stack,a=r[++t];exports.DEBUG&&console.log(e.step,"NPUSHW[]",a);for(var o=0;o<a;o++){var s=r[++t]<<8|r[++t];32768&s&&(s=-(1+(65535^s))),n.push(s)}e.ip=t},function(e){var t=e.stack,r=e.store;r||(r=e.store=[]);var n=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"WS",n,a),r[a]=n},function(e){var t=e.stack,r=e.store,n=t.pop();exports.DEBUG&&console.log(e.step,"RS",n);var a=r&&r[n]||0;t.push(a)},function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"WCVTP",r,n),e.cvt[n]=r/64},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"RCVT",r),t.push(64*e.cvt[r])},mr.bind(void 0,0),mr.bind(void 0,1),void 0,br.bind(void 0,0),br.bind(void 0,1),function(e){exports.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){exports.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"LT[]",r,n),t.push(n<r?1:0)},function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"LTEQ[]",r,n),t.push(n<=r?1:0)},function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"GT[]",r,n),t.push(n>r?1:0)},function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"GTEQ[]",r,n),t.push(n>=r?1:0)},function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"EQ[]",r,n),t.push(r===n?1:0)},function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"NEQ[]",r,n),t.push(r!==n?1:0)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"ODD[]",r),t.push(Math.trunc(r)%2?1:0)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"EVEN[]",r),t.push(Math.trunc(r)%2?0:1)},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"IF[]",t),t||(nr(e,!0),exports.DEBUG&&console.log(e.step,"EIF[]"))},function(e){exports.DEBUG&&console.log(e.step,"EIF[]")},function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"AND[]",r,n),t.push(r&&n?1:0)},function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"OR[]",r,n),t.push(r||n?1:0)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"NOT[]",r),t.push(r?0:1)},yr.bind(void 0,1),function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDB[]",t),e.deltaBase=t},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SDS[]",t),e.deltaShift=Math.pow(.5,t)},function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"ADD[]",r,n),t.push(n+r)},function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"SUB[]",r,n),t.push(n-r)},function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"DIV[]",r,n),t.push(64*n/r)},function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"MUL[]",r,n),t.push(n*r/64)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"ABS[]",r),t.push(Math.abs(r))},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"NEG[]",r),t.push(-r)},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"FLOOR[]",r),t.push(64*Math.floor(r/64))},function(e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"CEILING[]",r),t.push(64*Math.ceil(r/64))},wr.bind(void 0,0),wr.bind(void 0,1),wr.bind(void 0,2),wr.bind(void 0,3),void 0,void 0,void 0,void 0,function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"WCVTF[]",r,n),e.cvt[n]=r*e.ppem/e.font.unitsPerEm},yr.bind(void 0,2),yr.bind(void 0,3),xr.bind(void 0,1),xr.bind(void 0,2),xr.bind(void 0,3),function(e){var t,r=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"SROUND[]",r),e.round=Yt,192&r){case 0:t=.5;break;case 64:t=1;break;case 128:t=2;break;default:throw new Error("invalid SROUND value")}switch(e.srPeriod=t,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid SROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*t},function(e){var t,r=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"S45ROUND[]",r),e.round=Yt,192&r){case 0:t=Math.sqrt(2)/2;break;case 64:t=Math.sqrt(2);break;case 128:t=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(e.srPeriod=t,48&r){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*t;break;case 32:e.srPhase=.5*t;break;case 48:e.srPhase=.75*t;break;default:throw new Error("invalid S45ROUND value")}r&=15,e.srThreshold=0===r?0:(r/8-.5)*t},void 0,void 0,function(e){exports.DEBUG&&console.log(e.step,"ROFF[]"),e.round=zt},void 0,function(e){exports.DEBUG&&console.log(e.step,"RUTG[]"),e.round=qt},function(e){exports.DEBUG&&console.log(e.step,"RDTG[]"),e.round=Wt},ur,ur,void 0,void 0,void 0,void 0,void 0,function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANCTRL[]",t)},Sr.bind(void 0,0),Sr.bind(void 0,1),function(e){var t=e.stack,r=t.pop(),n=0;exports.DEBUG&&console.log(e.step,"GETINFO[]",r),1&r&&(n=35),32&r&&(n|=4096),t.push(n)},void 0,function(e){var t=e.stack,r=t.pop(),n=t.pop(),a=t.pop();exports.DEBUG&&console.log(e.step,"ROLL[]"),t.push(n),t.push(r),t.push(a)},function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"MAX[]",r,n),t.push(Math.max(n,r))},function(e){var t=e.stack,r=t.pop(),n=t.pop();exports.DEBUG&&console.log(e.step,"MIN[]",r,n),t.push(Math.min(n,r))},function(e){var t=e.stack.pop();exports.DEBUG&&console.log(e.step,"SCANTYPE[]",t)},function(e){var t=e.stack.pop(),r=e.stack.pop();switch(exports.DEBUG&&console.log(e.step,"INSTCTRL[]",t,r),t){case 1:return void(e.inhibitGridFit=!!r);case 2:return void(e.ignoreCvt=!!r);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,kr.bind(void 0,1),kr.bind(void 0,2),kr.bind(void 0,3),kr.bind(void 0,4),kr.bind(void 0,5),kr.bind(void 0,6),kr.bind(void 0,7),kr.bind(void 0,8),Or.bind(void 0,1),Or.bind(void 0,2),Or.bind(void 0,3),Or.bind(void 0,4),Or.bind(void 0,5),Or.bind(void 0,6),Or.bind(void 0,7),Or.bind(void 0,8),Er.bind(void 0,0,0,0,0,0),Er.bind(void 0,0,0,0,0,1),Er.bind(void 0,0,0,0,0,2),Er.bind(void 0,0,0,0,0,3),Er.bind(void 0,0,0,0,1,0),Er.bind(void 0,0,0,0,1,1),Er.bind(void 0,0,0,0,1,2),Er.bind(void 0,0,0,0,1,3),Er.bind(void 0,0,0,1,0,0),Er.bind(void 0,0,0,1,0,1),Er.bind(void 0,0,0,1,0,2),Er.bind(void 0,0,0,1,0,3),Er.bind(void 0,0,0,1,1,0),Er.bind(void 0,0,0,1,1,1),Er.bind(void 0,0,0,1,1,2),Er.bind(void 0,0,0,1,1,3),Er.bind(void 0,0,1,0,0,0),Er.bind(void 0,0,1,0,0,1),Er.bind(void 0,0,1,0,0,2),Er.bind(void 0,0,1,0,0,3),Er.bind(void 0,0,1,0,1,0),Er.bind(void 0,0,1,0,1,1),Er.bind(void 0,0,1,0,1,2),Er.bind(void 0,0,1,0,1,3),Er.bind(void 0,0,1,1,0,0),Er.bind(void 0,0,1,1,0,1),Er.bind(void 0,0,1,1,0,2),Er.bind(void 0,0,1,1,0,3),Er.bind(void 0,0,1,1,1,0),Er.bind(void 0,0,1,1,1,1),Er.bind(void 0,0,1,1,1,2),Er.bind(void 0,0,1,1,1,3),Er.bind(void 0,1,0,0,0,0),Er.bind(void 0,1,0,0,0,1),Er.bind(void 0,1,0,0,0,2),Er.bind(void 0,1,0,0,0,3),Er.bind(void 0,1,0,0,1,0),Er.bind(void 0,1,0,0,1,1),Er.bind(void 0,1,0,0,1,2),Er.bind(void 0,1,0,0,1,3),Er.bind(void 0,1,0,1,0,0),Er.bind(void 0,1,0,1,0,1),Er.bind(void 0,1,0,1,0,2),Er.bind(void 0,1,0,1,0,3),Er.bind(void 0,1,0,1,1,0),Er.bind(void 0,1,0,1,1,1),Er.bind(void 0,1,0,1,1,2),Er.bind(void 0,1,0,1,1,3),Er.bind(void 0,1,1,0,0,0),Er.bind(void 0,1,1,0,0,1),Er.bind(void 0,1,1,0,0,2),Er.bind(void 0,1,1,0,0,3),Er.bind(void 0,1,1,0,1,0),Er.bind(void 0,1,1,0,1,1),Er.bind(void 0,1,1,0,1,2),Er.bind(void 0,1,1,0,1,3),Er.bind(void 0,1,1,1,0,0),Er.bind(void 0,1,1,1,0,1),Er.bind(void 0,1,1,1,0,2),Er.bind(void 0,1,1,1,0,3),Er.bind(void 0,1,1,1,1,0),Er.bind(void 0,1,1,1,1,1),Er.bind(void 0,1,1,1,1,2),Er.bind(void 0,1,1,1,1,3)],Tr.prototype.setState=function(e,t){return this.state[e]=t,this.activeState={key:e,value:this.state[e]},this.activeState},Tr.prototype.getState=function(e){return this.state[e]||null},Dr.prototype.inboundIndex=function(e){return e>=0&&e<this.tokens.length},Dr.prototype.composeRUD=function(e){var t=this,r=e.map((function(e){return t[e[0]].apply(t,e.slice(1).concat(!0))})),n=function(e){return"object"==typeof e&&e.hasOwnProperty("FAIL")};if(r.every(n))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:r.filter(n)};this.dispatch("composeRUD",[r.filter((function(e){return!n(e)}))])},Dr.prototype.replaceRange=function(e,t,r,n){t=null!==t?t:this.tokens.length;var a=r.every((function(e){return e instanceof Tr}));if(!isNaN(e)&&this.inboundIndex(e)&&a){var o=this.tokens.splice.apply(this.tokens,[e,t].concat(r));return n||this.dispatch("replaceToken",[e,t,r]),[o,r]}return{FAIL:"replaceRange: invalid tokens or startIndex."}},Dr.prototype.replaceToken=function(e,t,r){if(!isNaN(e)&&this.inboundIndex(e)&&t instanceof Tr){var n=this.tokens.splice(e,1,t);return r||this.dispatch("replaceToken",[e,t]),[n[0],t]}return{FAIL:"replaceToken: invalid token or index."}},Dr.prototype.removeRange=function(e,t,r){t=isNaN(t)?this.tokens.length:t;var n=this.tokens.splice(e,t);return r||this.dispatch("removeRange",[n,e,t]),n},Dr.prototype.removeToken=function(e,t){if(!isNaN(e)&&this.inboundIndex(e)){var r=this.tokens.splice(e,1);return t||this.dispatch("removeToken",[r,e]),r}return{FAIL:"removeToken: invalid token index."}},Dr.prototype.insertToken=function(e,t,r){return e.every((function(e){return e instanceof Tr}))?(this.tokens.splice.apply(this.tokens,[t,0].concat(e)),r||this.dispatch("insertToken",[e,t]),e):{FAIL:"insertToken: invalid token(s)."}},Dr.prototype.registerModifier=function(e,t,r){this.events.newToken.subscribe((function(n,a){var o=[n,a],s=[n,a];if(null===t||!0===t.apply(this,o)){var i=r.apply(this,s);n.setState(e,i)}})),this.registeredModifiers.push(e)},Cr.prototype.subscribe=function(e){return"function"==typeof e?this.subscribers.push(e)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}},Cr.prototype.unsubscribe=function(e){this.subscribers.splice(e,1)},Mr.prototype.setCurrentIndex=function(e){this.index=e,this.current=this.context[e],this.backtrack=this.context.slice(0,e),this.lookahead=this.context.slice(e+1)},Mr.prototype.get=function(e){switch(!0){case 0===e:return this.current;case e<0&&Math.abs(e)<=this.backtrack.length:return this.backtrack.slice(e)[0];case e>0&&e<=this.lookahead.length:return this.lookahead[e-1];default:return null}},Dr.prototype.rangeToText=function(e){if(e instanceof Ur)return this.getRangeTokens(e).map((function(e){return e.char})).join("")},Dr.prototype.getText=function(){return this.tokens.map((function(e){return e.char})).join("")},Dr.prototype.getContext=function(e){var t=this.registeredContexts[e];return t||null},Dr.prototype.on=function(e,t){var r=this.events[e];return r?r.subscribe(t):null},Dr.prototype.dispatch=function(e,t){var r=this,n=this.events[e];n instanceof Cr&&n.subscribers.forEach((function(e){e.apply(r,t||[])}))},Dr.prototype.registerContextChecker=function(e,t,r){if(this.getContext(e))return{FAIL:"context name '"+e+"' is already registered."};if("function"!=typeof t)return{FAIL:"missing context start check."};if("function"!=typeof r)return{FAIL:"missing context end check."};var n=new Rr(e,t,r);return this.registeredContexts[e]=n,this.contextCheckers.push(n),n},Dr.prototype.getRangeTokens=function(e){var t=e.startIndex+e.endOffset;return[].concat(this.tokens.slice(e.startIndex,t))},Dr.prototype.getContextRanges=function(e){var t=this.getContext(e);return t?t.ranges:{FAIL:"context checker '"+e+"' is not registered."}},Dr.prototype.resetContextsRanges=function(){var e=this.registeredContexts;for(var t in e){if(e.hasOwnProperty(t))e[t].ranges=[]}},Dr.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var e=this.tokens.map((function(e){return e.char})),t=0;t<e.length;t++){var r=new Mr(e,t);this.runContextCheck(r)}this.dispatch("updateContextsRanges",[this.registeredContexts])},Dr.prototype.setEndOffset=function(e,t){var r=new Ur(this.getContext(t).openRange.startIndex,e,t),n=this.getContext(t).ranges;return r.rangeId=t+"."+n.length,n.push(r),this.getContext(t).openRange=null,r},Dr.prototype.runContextCheck=function(e){var t=this,r=e.index;this.contextCheckers.forEach((function(n){var a=n.contextName,o=t.getContext(a).openRange;if(!o&&n.checkStart(e)&&(o=new Ur(r,null,a),t.getContext(a).openRange=o,t.dispatch("contextStart",[a,r])),o&&n.checkEnd(e)){var s=r-o.startIndex+1,i=t.setEndOffset(s,a);t.dispatch("contextEnd",[a,i])}}))},Dr.prototype.tokenize=function(e){this.tokens=[],this.resetContextsRanges();var t=Array.from(e);this.dispatch("start");for(var r=0;r<t.length;r++){var n=t[r],a=new Mr(t,r);this.dispatch("next",[a]),this.runContextCheck(a);var o=new Tr(n);this.tokens.push(o),this.dispatch("newToken",[o,a])}return this.dispatch("end",[this.tokens]),this.tokens},Br.prototype.getDefaultScriptFeaturesIndexes=function(){for(var e=this.font.tables.gsub.scripts,t=0;t<e.length;t++){var r=e[t];if("DFLT"===r.tag)return r.script.defaultLangSys.featureIndexes}return[]},Br.prototype.getScriptFeaturesIndexes=function(e){if(!this.font.tables.gsub)return[];if(!e)return this.getDefaultScriptFeaturesIndexes();for(var t=this.font.tables.gsub.scripts,r=0;r<t.length;r++){var n=t[r];if(n.tag===e&&n.script.defaultLangSys)return n.script.defaultLangSys.featureIndexes;var a=n.langSysRecords;if(a)for(var o=0;o<a.length;o++){var s=a[o];if(s.tag===e)return s.langSys.featureIndexes}}return this.getDefaultScriptFeaturesIndexes()},Br.prototype.mapTagsToFeatures=function(e,t){for(var r={},n=0;n<e.length;n++){var a=e[n].tag,o=e[n].feature;r[a]=o}this.features[t].tags=r},Br.prototype.getScriptFeatures=function(e){var t=this.features[e];if(this.features.hasOwnProperty(e))return t;var r=this.getScriptFeaturesIndexes(e);if(!r)return null;var n=this.font.tables.gsub;return t=r.map((function(e){return n.features[e]})),this.features[e]=t,this.mapTagsToFeatures(t,e),t},Br.prototype.getSubstitutionType=function(e,t){return e.lookupType.toString()+t.substFormat.toString()},Br.prototype.getLookupMethod=function(e,t){var r=this;switch(this.getSubstitutionType(e,t)){case"11":return function(e){return Gr.apply(r,[e,t])};case"12":return function(e){return zr.apply(r,[e,t])};case"63":return function(e){return Hr.apply(r,[e,t])};case"41":return function(e){return Vr.apply(r,[e,t])};case"21":return function(e){return qr.apply(r,[e,t])};default:throw new Error("lookupType: "+e.lookupType+" - substFormat: "+t.substFormat+" is not yet supported")}},Br.prototype.lookupFeature=function(e){var t=e.contextParams,r=t.index,n=this.getFeature({tag:e.tag,script:e.script});if(!n)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+e.tag+"' for script '"+e.script+"'.");for(var a=this.getFeatureLookups(n),o=[].concat(t.context),s=0;s<a.length;s++)for(var i=a[s],c=this.getLookupSubtables(i),u=0;u<c.length;u++){var l=c[u],h=this.getSubstitutionType(i,l),f=this.getLookupMethod(i,l),p=void 0;switch(h){case"11":(p=f(t.current))&&o.splice(r,1,new Nr({id:11,tag:e.tag,substitution:p}));break;case"12":(p=f(t.current))&&o.splice(r,1,new Nr({id:12,tag:e.tag,substitution:p}));break;case"63":p=f(t),Array.isArray(p)&&p.length&&o.splice(r,1,new Nr({id:63,tag:e.tag,substitution:p}));break;case"41":(p=f(t))&&o.splice(r,1,new Nr({id:41,tag:e.tag,substitution:p}));break;case"21":(p=f(t.current))&&o.splice(r,1,new Nr({id:21,tag:e.tag,substitution:p}))}t=new Mr(o,r),Array.isArray(p)&&!p.length||(p=null)}return o.length?o:null},Br.prototype.supports=function(e){if(!e.script)return!1;this.getScriptFeatures(e.script);var t=this.features.hasOwnProperty(e.script);if(!e.tag)return t;var r=this.features[e.script].some((function(t){return t.tag===e.tag}));return t&&r},Br.prototype.getLookupSubtables=function(e){return e.subtables||null},Br.prototype.getLookupByIndex=function(e){return this.font.tables.gsub.lookups[e]||null},Br.prototype.getFeatureLookups=function(e){return e.lookupListIndexes.map(this.getLookupByIndex.bind(this))},Br.prototype.getFeature=function(e){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(e.script)||this.getScriptFeatures(e.script);var t=this.features[e.script];return t?t.tags[e.tag]?this.features[e.script].tags[e.tag]:null:{FAIL:"No feature for script "+e.script}};var Wr={startCheck:function(e){var t=e.current,r=e.get(-1);return null===r&&Ar(t)||!Ar(r)&&Ar(t)},endCheck:function(e){var t=e.get(1);return null===t||!Ar(t)}};var Yr={startCheck:function(e){var t=e.current,r=e.get(-1);return(Ar(t)||jr(t))&&!Ar(r)},endCheck:function(e){var t=e.get(1);switch(!0){case null===t:return!0;case!Ar(t)&&!jr(t):var r=/\s/.test(t);if(!r)return!0;if(r){if(!e.lookahead.some((function(e){return Ar(e)||jr(e)})))return!0}break;default:return!1}}};var Xr={11:function(e,t,r){t[r].setState(e.tag,e.substitution)},12:function(e,t,r){t[r].setState(e.tag,e.substitution)},63:function(e,t,r){e.substitution.forEach((function(n,a){t[r+a].setState(e.tag,n)}))},41:function(e,t,r){var n=t[r];n.setState(e.tag,e.substitution.ligGlyph);for(var a=e.substitution.components.length,o=0;o<a;o++)(n=t[r+o+1]).setState("deleted",!0)}};function Zr(e,t,r){e instanceof Nr&&Xr[e.id]&&Xr[e.id](e,t,r)}function $r(e){var t=this,r=this.featuresTags.arab,n=this.tokenizer.getRangeTokens(e);if(1!==n.length){var a=new Mr(n.map((function(e){return e.getState("glyphIndex")})),0),o=new Mr(n.map((function(e){return e.char})),0);n.forEach((function(e,s){if(!jr(e.char)){a.setCurrentIndex(s),o.setCurrentIndex(s);var i,c=0;switch(function(e){for(var t=[].concat(e.backtrack),r=t.length-1;r>=0;r--){var n=t[r],a=Ir(n),o=jr(n);if(!a&&!o)return!0;if(a)return!1}return!1}(o)&&(c|=1),function(e){if(Ir(e.current))return!1;for(var t=0;t<e.lookahead.length;t++){if(!jr(e.lookahead[t]))return!0}return!1}(o)&&(c|=2),c){case 1:i="fina";break;case 2:i="init";break;case 3:i="medi"}if(-1!==r.indexOf(i)){var u=t.query.lookupFeature({tag:i,script:"arab",contextParams:a});if(u instanceof Error)return console.info(u.message);u.forEach((function(e,t){e instanceof Nr&&(Zr(e,n,t),a.context[t]=e.substitution)}))}}}))}}function Kr(e,t){return new Mr(e.map((function(e){return e.activeState.value})),t||0)}function Qr(e){var t=this,r=this.tokenizer.getRangeTokens(e),n=Kr(r);n.context.forEach((function(e,a){n.setCurrentIndex(a);var o=t.query.lookupFeature({tag:"rlig",script:"arab",contextParams:n});o.length&&(o.forEach((function(e){return Zr(e,r,a)})),n=Kr(r))}))}var Jr={startCheck:function(e){var t=e.current,r=e.get(-1);return null===r&&Pr(t)||!Pr(r)&&Pr(t)},endCheck:function(e){var t=e.get(1);return null===t||!Pr(t)}};function en(e,t){return new Mr(e.map((function(e){return e.activeState.value})),t||0)}function tn(e){var t=this,r=this.tokenizer.getRangeTokens(e),n=en(r);n.context.forEach((function(e,a){n.setCurrentIndex(a);var o=t.query.lookupFeature({tag:"liga",script:"latn",contextParams:n});o.length&&(o.forEach((function(e){return Zr(e,r,a)})),n=en(r))}))}function rn(e){this.baseDir=e||"ltr",this.tokenizer=new Dr,this.featuresTags={}}function nn(e){var t=this.contextChecks[e+"Check"];return this.tokenizer.registerContextChecker(e,t.startCheck,t.endCheck)}function an(){return nn.call(this,"latinWord"),nn.call(this,"arabicWord"),nn.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function on(){var e=this;this.tokenizer.getContextRanges("arabicSentence").forEach((function(t){var r=e.tokenizer.getRangeTokens(t);e.tokenizer.replaceRange(t.startIndex,t.endOffset,r.reverse())}))}function sn(){if(-1===this.tokenizer.registeredModifiers.indexOf("glyphIndex"))throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function cn(){var e=this;this.featuresTags.hasOwnProperty("arab")&&(sn.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(t){$r.call(e,t)})))}function un(){var e=this;this.featuresTags.hasOwnProperty("arab")&&(-1!==this.featuresTags.arab.indexOf("rlig")&&(sn.call(this),this.tokenizer.getContextRanges("arabicWord").forEach((function(t){Qr.call(e,t)}))))}function ln(){var e=this;this.featuresTags.hasOwnProperty("latn")&&(-1!==this.featuresTags.latn.indexOf("liga")&&(sn.call(this),this.tokenizer.getContextRanges("latinWord").forEach((function(t){tn.call(e,t)}))))}function hn(e){(e=e||{}).tables=e.tables||{},e.empty||(Mt(e.familyName,"When creating a new Font object, familyName is required."),Mt(e.styleName,"When creating a new Font object, styleName is required."),Mt(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Mt(e.ascender,"When creating a new Font object, ascender is required."),Mt(e.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables=Object.assign(e.tables,{os2:Object.assign({usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR},e.tables.os2)})),this.supported=!0,this.glyphs=new Se.GlyphSet(this,e.glyphs||[]),this.encoding=new pe(this),this.position=new Ot(this),this.substitution=new Et(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new Gt(this):void 0}})}function fn(e,t){var r=JSON.stringify(e),n=256;for(var a in t){var o=parseInt(a);if(o&&!(o<256)){if(JSON.stringify(t[a])===r)return o;n<=o&&(n=o+1)}}return t[n]=e,n}function pn(e,t,r){var n=fn(t.name,r);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:n}]}function dn(e,t,r){var n={},a=new se.Parser(e,t);return n.tag=a.parseTag(),n.minValue=a.parseFixed(),n.defaultValue=a.parseFixed(),n.maxValue=a.parseFixed(),a.skip("uShort",1),n.name=r[a.parseUShort()]||{},n}function gn(e,t,r,n){for(var a=[{name:"nameID_"+e,type:"USHORT",value:fn(t.name,n)},{name:"flags_"+e,type:"USHORT",value:0}],o=0;o<r.length;++o){var s=r[o].tag;a.push({name:"axis_"+e+" "+s,type:"FIXED",value:t.coordinates[s]<<16})}return a}function vn(e,t,r,n){var a={},o=new se.Parser(e,t);a.name=n[o.parseUShort()]||{},o.skip("uShort",1),a.coordinates={};for(var s=0;s<r.length;++s)a.coordinates[r[s].tag]=o.parseFixed();return a}rn.prototype.setText=function(e){this.text=e},rn.prototype.contextChecks={latinWordCheck:Jr,arabicWordCheck:Wr,arabicSentenceCheck:Yr},rn.prototype.registerFeatures=function(e,t){var r=this,n=t.filter((function(t){return r.query.supports({script:e,tag:t})}));this.featuresTags.hasOwnProperty(e)?this.featuresTags[e]=this.featuresTags[e].concat(n):this.featuresTags[e]=n},rn.prototype.applyFeatures=function(e,t){if(!e)throw new Error("No valid font was provided to apply features");this.query||(this.query=new Br(e));for(var r=0;r<t.length;r++){var n=t[r];this.query.supports({script:n.script})&&this.registerFeatures(n.script,n.tags)}},rn.prototype.registerModifier=function(e,t,r){this.tokenizer.registerModifier(e,t,r)},rn.prototype.checkContextReady=function(e){return!!this.tokenizer.getContext(e)},rn.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(cn.call(this),un.call(this)),this.checkContextReady("latinWord")&&ln.call(this),this.checkContextReady("arabicSentence")&&on.call(this)},rn.prototype.processText=function(e){this.text&&this.text===e||(this.setText(e),an.call(this),this.applyFeaturesToContexts())},rn.prototype.getBidiText=function(e){return this.processText(e),this.tokenizer.getText()},rn.prototype.getTextGlyphs=function(e){this.processText(e);for(var t=[],r=0;r<this.tokenizer.tokens.length;r++){var n=this.tokenizer.tokens[r];if(!n.state.deleted){var a=n.activeState.value;t.push(Array.isArray(a)?a[0]:a)}}return t},hn.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},hn.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},hn.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},hn.prototype.updateFeatures=function(e){return this.defaultRenderOptions.features.map((function(t){return"latn"===t.script?{script:"latn",tags:t.tags.filter((function(t){return e[t]}))}:t}))},hn.prototype.stringToGlyphs=function(e,t){var r=this,n=new rn;n.registerModifier("glyphIndex",null,(function(e){return r.charToGlyphIndex(e.char)}));var a=t?this.updateFeatures(t.features):this.defaultRenderOptions.features;n.applyFeatures(this,a);for(var o=n.getTextGlyphs(e),s=o.length,i=new Array(s),c=this.glyphs.get(0),u=0;u<s;u+=1)i[u]=this.glyphs.get(o[u])||c;return i},hn.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},hn.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},hn.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},hn.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var r=this.position.defaultKerningTables;return r?this.position.getKerningValue(r,e,t):this.kerningPairs[e+","+t]||0},hn.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]},hn.prototype.forEachGlyph=function(e,t,r,n,a,o){t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:72,a=Object.assign({},this.defaultRenderOptions,a);var s,i=1/this.unitsPerEm*n,c=this.stringToGlyphs(e,a);if(a.kerning){var u=a.script||this.position.getDefaultScriptName();s=this.position.getKerningTables(u,a.language)}for(var l=0;l<c.length;l+=1){var h=c[l];if(o.call(this,h,t,r,n,a),h.advanceWidth&&(t+=h.advanceWidth*i),a.kerning&&l<c.length-1)t+=(s?this.position.getKerningValue(s,h.index,c[l+1].index):this.getKerningValue(h,c[l+1]))*i;a.letterSpacing?t+=a.letterSpacing*n:a.tracking&&(t+=a.tracking/1e3*n)}return t},hn.prototype.getPath=function(e,t,r,n,a){var o=new R;return this.forEachGlyph(e,t,r,n,a,(function(e,t,r,n){var s=e.getPath(t,r,n,a,this);o.extend(s)})),o},hn.prototype.getPaths=function(e,t,r,n,a){var o=[];return this.forEachGlyph(e,t,r,n,a,(function(e,t,r,n){var s=e.getPath(t,r,n,a,this);o.push(s)})),o},hn.prototype.getAdvanceWidth=function(e,t,r){return this.forEachGlyph(e,0,0,t,r,(function(){}))},hn.prototype.draw=function(e,t,r,n,a,o){this.getPath(t,r,n,a,o).draw(e)},hn.prototype.drawPoints=function(e,t,r,n,a,o){this.forEachGlyph(t,r,n,a,o,(function(t,r,n,a){t.drawPoints(e,r,n,a)}))},hn.prototype.drawMetrics=function(e,t,r,n,a,o){this.forEachGlyph(t,r,n,a,o,(function(t,r,n,a){t.drawMetrics(e,r,n,a)}))},hn.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},hn.prototype.validate=function(){var e=this;function t(t){var r=e.getEnglishName(t);r&&r.trim().length}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm},hn.prototype.toTables=function(){return yt.fontToTable(this)},hn.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},hn.prototype.toArrayBuffer=function(){for(var e=this.toTables().encode(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n++)r[n]=e[n];return t},hn.prototype.download=function(t){var n=this.getEnglishName("fontFamily"),a=this.getEnglishName("fontSubfamily");t=t||n.replace(/\s/g,"")+"-"+a+".otf";var o=this.toArrayBuffer();if("undefined"!=typeof window)if(window.URL=window.URL||window.webkitURL,window.URL){var s=new DataView(o),i=new Blob([s],{type:"font/opentype"}),c=document.createElement("a");c.href=window.URL.createObjectURL(i),c.download=t;var u=document.createEvent("MouseEvents");u.initEvent("click",!0,!1),c.dispatchEvent(u)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var l=r(15),h=function(t){for(var r=new e(t.byteLength),n=new Uint8Array(t),a=0;a<r.length;++a)r[a]=n[a];return r}(o);l.writeFileSync(t,h)}},hn.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},hn.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},hn.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var mn={make:function(e,t){var r=new Q.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:e.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:e.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*e.axes.length}]);r.offsetToData=r.sizeOf();for(var n=0;n<e.axes.length;n++)r.fields=r.fields.concat(pn(n,e.axes[n],t));for(var a=0;a<e.instances.length;a++)r.fields=r.fields.concat(gn(a,e.instances[a],e.axes,t));return r},parse:function(e,t,r){var n=new se.Parser(e,t),a=n.parseULong();L.argument(65536===a,"Unsupported fvar table version.");var o=n.parseOffset16();n.skip("uShort",1);for(var s=n.parseUShort(),i=n.parseUShort(),c=n.parseUShort(),u=n.parseUShort(),l=[],h=0;h<s;h++)l.push(dn(e,t+o+h*i,r));for(var f=[],p=t+o+s*i,d=0;d<c;d++)f.push(vn(e,p+d*u,l,r));return{axes:l,instances:f}}},bn=new Array(10);bn[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(ae.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(ae.coverage),values:this.parseValueRecordList()}:void L.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},bn[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();L.assert(1===t||2===t,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var r=this.parsePointer(ae.coverage),n=this.parseUShort(),a=this.parseUShort();if(1===t)return{posFormat:t,coverage:r,valueFormat1:n,valueFormat2:a,pairSets:this.parseList(ae.pointer(ae.list((function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(n),value2:this.parseValueRecord(a)}}))))};if(2===t){var o=this.parsePointer(ae.classDef),s=this.parsePointer(ae.classDef),i=this.parseUShort(),c=this.parseUShort();return{posFormat:t,coverage:r,valueFormat1:n,valueFormat2:a,classDef1:o,classDef2:s,class1Count:i,class2Count:c,classRecords:this.parseList(i,ae.list(c,(function(){return{value1:this.parseValueRecord(n),value2:this.parseValueRecord(a)}})))}}},bn[3]=function(){return{error:"GPOS Lookup 3 not supported"}},bn[4]=function(){return{error:"GPOS Lookup 4 not supported"}},bn[5]=function(){return{error:"GPOS Lookup 5 not supported"}},bn[6]=function(){return{error:"GPOS Lookup 6 not supported"}},bn[7]=function(){return{error:"GPOS Lookup 7 not supported"}},bn[8]=function(){return{error:"GPOS Lookup 8 not supported"}},bn[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var yn=new Array(10);var wn={parse:function(e,t){var r=new ae(e,t=t||0),n=r.parseVersion(1);return L.argument(1===n||1.1===n,"Unsupported GPOS table version "+n),1===n?{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(bn)}:{version:n,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(bn),variations:r.parseFeatureVariationsList()}},make:function(e){return new Q.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new Q.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new Q.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new Q.LookupList(e.lookups,yn)}])}};var xn={parse:function(e,t){var r=new se.Parser(e,t),n=r.parseUShort();if(0===n)return function(e){var t={};e.skip("uShort");var r=e.parseUShort();L.argument(0===r,"Unsupported kern sub-table version."),e.skip("uShort",2);var n=e.parseUShort();e.skip("uShort",3);for(var a=0;a<n;a+=1){var o=e.parseUShort(),s=e.parseUShort(),i=e.parseShort();t[o+","+s]=i}return t}(r);if(1===n)return function(e){var t={};e.skip("uShort"),e.parseULong()>1&&console.warn("Only the first kern subtable is supported."),e.skip("uLong");var r=255&e.parseUShort();if(e.skip("uShort"),0===r){var n=e.parseUShort();e.skip("uShort",3);for(var a=0;a<n;a+=1){var o=e.parseUShort(),s=e.parseUShort(),i=e.parseShort();t[o+","+s]=i}}return t}(r);throw new Error("Unsupported kern table version ("+n+").")}};var Sn={parse:function(e,t,r,n){for(var a=new se.Parser(e,t),o=n?a.parseUShort:a.parseULong,s=[],i=0;i<r+1;i+=1){var c=o.call(a);n&&(c*=2),s.push(c)}return s}};function kn(e,t){r(15).readFile(e,(function(e,r){if(e)return t(e.message);t(null,Rt(r))}))}function On(e,t){var r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="arraybuffer",r.onload=function(){return r.response?t(null,r.response):t("Font could not be loaded: "+r.statusText)},r.onerror=function(){t("Font could not be loaded")},r.send()}function En(e,t){for(var r=[],n=12,a=0;a<t;a+=1){var o=se.getTag(e,n),s=se.getULong(e,n+4),i=se.getULong(e,n+8),c=se.getULong(e,n+12);r.push({tag:o,checksum:s,offset:i,length:c,compression:!1}),n+=16}return r}function Tn(e,t){if("WOFF"===t.compression){var r=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),n=new Uint8Array(t.length);if(E(r,n),n.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(n.buffer,0),offset:0}}return{data:e,offset:t.offset}}function Un(e,t){var r,n;t=null==t?{}:t;var a,o,s,i,c,u,l,h,f,p,d,g,v=new hn({empty:!0}),m=new DataView(e,0),b=[],y=se.getTag(m,0);if(y===String.fromCharCode(0,1,0,0)||"true"===y||"typ1"===y)v.outlinesFormat="truetype",b=En(m,a=se.getUShort(m,4));else if("OTTO"===y)v.outlinesFormat="cff",b=En(m,a=se.getUShort(m,4));else{if("wOFF"!==y)throw new Error("Unsupported OpenType signature "+y);var w=se.getTag(m,4);if(w===String.fromCharCode(0,1,0,0))v.outlinesFormat="truetype";else{if("OTTO"!==w)throw new Error("Unsupported OpenType flavor "+y);v.outlinesFormat="cff"}b=function(e,t){for(var r=[],n=44,a=0;a<t;a+=1){var o=se.getTag(e,n),s=se.getULong(e,n+4),i=se.getULong(e,n+8),c=se.getULong(e,n+12),u=void 0;u=i<c&&"WOFF",r.push({tag:o,offset:s,compression:u,compressedLength:i,length:c}),n+=20}return r}(m,a=se.getUShort(m,12))}for(var x=0;x<a;x+=1){var S=b[x],k=void 0;switch(S.tag){case"cmap":k=Tn(m,S),v.tables.cmap=ce.parse(k.data,k.offset),v.encoding=new de(v.tables.cmap);break;case"cvt ":k=Tn(m,S),g=new se.Parser(k.data,k.offset),v.tables.cvt=g.parseShortList(S.length/2);break;case"fvar":s=S;break;case"fpgm":k=Tn(m,S),g=new se.Parser(k.data,k.offset),v.tables.fpgm=g.parseByteList(S.length);break;case"head":k=Tn(m,S),v.tables.head=_e.parse(k.data,k.offset),v.unitsPerEm=v.tables.head.unitsPerEm,r=v.tables.head.indexToLocFormat;break;case"hhea":k=Tn(m,S),v.tables.hhea=He.parse(k.data,k.offset),v.ascender=v.tables.hhea.ascender,v.descender=v.tables.hhea.descender,v.numberOfHMetrics=v.tables.hhea.numberOfHMetrics;break;case"hmtx":l=S;break;case"ltag":k=Tn(m,S),n=qe.parse(k.data,k.offset);break;case"maxp":k=Tn(m,S),v.tables.maxp=We.parse(k.data,k.offset),v.numGlyphs=v.tables.maxp.numGlyphs;break;case"name":p=S;break;case"OS/2":k=Tn(m,S),v.tables.os2=st.parse(k.data,k.offset);break;case"post":k=Tn(m,S),v.tables.post=it.parse(k.data,k.offset),v.glyphNames=new ve(v.tables.post);break;case"prep":k=Tn(m,S),g=new se.Parser(k.data,k.offset),v.tables.prep=g.parseByteList(S.length);break;case"glyf":i=S;break;case"loca":f=S;break;case"CFF ":o=S;break;case"kern":h=S;break;case"GPOS":c=S;break;case"GSUB":u=S;break;case"meta":d=S}}var O=Tn(m,p);if(v.tables.name=at.parse(O.data,O.offset,n),v.names=v.tables.name,i&&f){var E=0===r,T=Tn(m,f),U=Sn.parse(T.data,T.offset,v.numGlyphs,E),R=Tn(m,i);v.glyphs=Ft.parse(R.data,R.offset,U,v,t)}else{if(!o)throw new Error("Font doesn't contain TrueType or CFF outlines.");var M=Tn(m,o);ze.parse(M.data,M.offset,v,t)}var C=Tn(m,l);if(Ve.parse(v,C.data,C.offset,v.numberOfHMetrics,v.numGlyphs,v.glyphs,t),me(v,t),h){var L=Tn(m,h);v.kerningPairs=xn.parse(L.data,L.offset)}else v.kerningPairs={};if(c){var D=Tn(m,c);v.tables.gpos=wn.parse(D.data,D.offset),v.position.init()}if(u){var A=Tn(m,u);v.tables.gsub=ht.parse(A.data,A.offset)}if(s){var I=Tn(m,s);v.tables.fvar=mn.parse(I.data,I.offset,v.names)}if(d){var j=Tn(m,d);v.tables.meta=ft.parse(j.data,j.offset),v.metas=v.tables.meta}return v}var Rn=Object.freeze({__proto__:null,Font:hn,Glyph:ye,Path:R,BoundingBox:U,_parse:se,parse:Un,load:function(e,t,r){var n="undefined"==typeof window?kn:On;return new Promise((function(a,o){n(e,(function(e,n){if(e){if(t)return t(e);o(e)}var s;try{s=Un(n,r)}catch(e){if(t)return t(e,null);o(e)}if(t)return t(null,s);a(s)}))}))},loadSync:function(e,t){return Un(Rt(r(15).readFileSync(e)),t)}});t.a=Rn}).call(this,r(18).Buffer)},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var a=(s=n,i=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),"/*# ".concat(c," */")),o=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[r].concat(o).concat([a]).join("\n")}var s,i,c;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(n)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(a[s]=!0)}for(var i=0;i<e.length;i++){var c=[].concat(e[i]);n&&a[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),t.push(c))}},t}},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(20),a=r(21),o=r(22);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=f(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(t,r),a=(e=i(e,n)).write(t,r);a!==n&&(e=e.slice(0,a));return e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|p(t.length);return 0===(e=i(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?i(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(l(t),e=i(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t){var r=t.length<0?0:0|p(t.length);e=i(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function d(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(e).length;default:if(n)return G(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,r);case"utf8":case"utf-8":return T(this,t,r);case"ascii":return U(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return E(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function v(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,a){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=a?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(a)return-1;r=e.length-1}else if(r<0){if(!a)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,a);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,a);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,a){var o,s=1,i=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,i/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(a){var l=-1;for(o=r;o<i;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(r+c>i&&(r=i-c),o=r;o>=0;o--){for(var h=!0,f=0;f<c;f++)if(u(e,o+f)!==u(t,f)){h=!1;break}if(h)return o}return-1}function y(e,t,r,n){r=Number(r)||0;var a=e.length-r;n?(n=Number(n))>a&&(n=a):n=a;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var i=parseInt(t.substr(2*s,2),16);if(isNaN(i))return s;e[r+s]=i}return s}function w(e,t,r,n){return _(G(t,e.length-r),e,r,n)}function x(e,t,r,n){return _(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return x(e,t,r,n)}function k(e,t,r,n){return _(z(t),e,r,n)}function O(e,t,r,n){return _(function(e,t){for(var r,n,a,o=[],s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,a=r%256,o.push(a),o.push(n);return o}(t,e.length-r),e,r,n)}function E(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function T(e,t,r){r=Math.min(e.length,r);for(var n=[],a=t;a<r;){var o,s,i,c,u=e[a],l=null,h=u>239?4:u>223?3:u>191?2:1;if(a+h<=r)switch(h){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[a+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[a+1],s=e[a+2],128==(192&o)&&128==(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[a+1],s=e[a+2],i=e[a+3],128==(192&o)&&128==(192&s)&&128==(192&i)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&i)>65535&&c<1114112&&(l=c)}null===l?(l=65533,h=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),a+=h}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return u(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,n){return l(t),t<=0?i(e,t):void 0!==r?"string"==typeof n?i(e,t).fill(r,n):i(e,t).fill(r):i(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return h(null,e)},c.allocUnsafeSlow=function(e){return h(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,a=0,o=Math.min(r,n);a<o;++a)if(e[a]!==t[a]){r=e[a],n=t[a];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=c.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){var s=e[r];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,a),a+=s.length}return n},c.byteLength=d,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?T(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,n,a){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),t<0||r>e.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&t>=r)return 0;if(n>=a)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(a>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),i=Math.min(o,s),u=this.slice(n,a),l=e.slice(t,r),h=0;h<i;++h)if(u[h]!==l[h]){o=u[h],s=l[h];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var a=this.length-t;if((void 0===r||r>a)&&(r=a),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return w(this,e,t,r);case"ascii":return x(this,e,t,r);case"latin1":case"binary":return S(this,e,t,r);case"base64":return k(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(127&e[a]);return n}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var a=t;a<r;++a)n+=String.fromCharCode(e[a]);return n}function M(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var a="",o=t;o<r;++o)a+=F(e[o]);return a}function C(e,t,r){for(var n=e.slice(t,r),a="",o=0;o<n.length;o+=2)a+=String.fromCharCode(n[o]+256*n[o+1]);return a}function L(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,r,n,a,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function A(e,t,r,n){t<0&&(t=65535+t+1);for(var a=0,o=Math.min(e.length-r,2);a<o;++a)e[r+a]=(t&255<<8*(n?a:1-a))>>>8*(n?a:1-a)}function I(e,t,r,n){t<0&&(t=4294967295+t+1);for(var a=0,o=Math.min(e.length-r,4);a<o;++a)e[r+a]=t>>>8*(n?a:3-a)&255}function j(e,t,r,n,a,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function P(e,t,r,n,o){return o||j(e,0,r,4),a.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,o){return o||j(e,0,r,8),a.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var a=t-e;r=new c(a,void 0);for(var o=0;o<a;++o)r[o]=this[o+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e],a=1,o=0;++o<t&&(a*=256);)n+=this[e+o]*a;return n},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e+--t],a=1;t>0&&(a*=256);)n+=this[e+--t]*a;return n},c.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e],a=1,o=0;++o<t&&(a*=256);)n+=this[e+o]*a;return n>=(a*=128)&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=t,a=1,o=this[e+--n];n>0&&(a*=256);)o+=this[e+--n]*a;return o>=(a*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),a.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),a.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),a.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),a.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||D(this,e,t,r,Math.pow(2,8*r)-1,0);var a=1,o=0;for(this[t]=255&e;++o<r&&(a*=256);)this[t+o]=e/a&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||D(this,e,t,r,Math.pow(2,8*r)-1,0);var a=r-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):I(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var a=Math.pow(2,8*r-1);D(this,e,t,r,a-1,-a)}var o=0,s=1,i=0;for(this[t]=255&e;++o<r&&(s*=256);)e<0&&0===i&&0!==this[t+o-1]&&(i=1),this[t+o]=(e/s>>0)-i&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var a=Math.pow(2,8*r-1);D(this,e,t,r,a-1,-a)}var o=r-1,s=1,i=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===i&&0!==this[t+o+1]&&(i=1),this[t+o]=(e/s>>0)-i&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):A(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):A(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):I(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return P(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return P(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var a,o=n-r;if(this===e&&r<t&&t<n)for(a=o-1;a>=0;--a)e[a+t]=this[a+r];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var s=c.isBuffer(e)?e:G(new c(e,n).toString()),i=s.length;for(o=0;o<r-t;++o)this[o+t]=s[o%i]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){var r;t=t||1/0;for(var n=e.length,a=null,o=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!a){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}a=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function z(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(N,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function _(e,t,r,n){for(var a=0;a<n&&!(a+r>=t.length||a>=e.length);++a)t[a+r]=e[a];return a}}).call(this,r(19))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=u(e),s=n[0],i=n[1],c=new o(function(e,t,r){return 3*(t+r)/4-r}(0,s,i)),l=0,h=i>0?s-4:s;for(r=0;r<h;r+=4)t=a[e.charCodeAt(r)]<<18|a[e.charCodeAt(r+1)]<<12|a[e.charCodeAt(r+2)]<<6|a[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===i&&(t=a[e.charCodeAt(r)]<<2|a[e.charCodeAt(r+1)]>>4,c[l++]=255&t);1===i&&(t=a[e.charCodeAt(r)]<<10|a[e.charCodeAt(r+1)]<<4|a[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,a=r%3,o=[],s=0,i=r-a;s<i;s+=16383)o.push(l(e,s,s+16383>i?i:s+16383));1===a?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===a&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],a=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,c=s.length;i<c;++i)n[i]=s[i],a[s.charCodeAt(i)]=i;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function l(e,t,r){for(var a,o,s=[],i=t;i<r;i+=3)a=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),s.push(n[(o=a)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,n,a){var o,s,i=8*a-n-1,c=(1<<i)-1,u=c>>1,l=-7,h=r?a-1:0,f=r?-1:1,p=e[t+h];for(h+=f,o=p&(1<<-l)-1,p>>=-l,l+=i;l>0;o=256*o+e[t+h],h+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+h],h+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=u}return(p?-1:1)*s*Math.pow(2,o-n)},t.write=function(e,t,r,n,a,o){var s,i,c,u=8*o-a-1,l=(1<<u)-1,h=l>>1,f=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(i=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+h>=1?f/c:f*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=l?(i=0,s=l):s+h>=1?(i=(t*c-1)*Math.pow(2,a),s+=h):(i=t*Math.pow(2,h-1)*Math.pow(2,a),s=0));a>=8;e[r+p]=255&i,p+=d,i/=256,a-=8);for(s=s<<a|i,u+=a;u>0;e[r+p]=255&s,p+=d,s/=256,u-=8);e[r+p-d]|=128*g}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";r.r(t);var n=r(5),a=r(6);Object(n.b)("deepEq",()=>{Object(n.a)(Object(a.a)(void 0,void 0)),Object(n.a)(Object(a.a)(null,null)),Object(n.a)(!Object(a.a)(void 0,null)),Object(n.a)(Object(a.a)([1,2,3],[1,2,3])),Object(n.a)(!Object(a.a)([1,3,3],[1,2,3])),Object(n.a)(Object(a.a)({a:1,b:2},{b:2,a:1})),Object(n.a)(!Object(a.a)({a:2,b:1},{b:2,a:1})),Object(n.a)(Object(a.a)([1,2,[3,4,5]],[1,2,[3,4,5]])),Object(n.a)(!Object(a.a)([1,2,[3,4,5]],[1,2,[3,3,5]])),Object(n.a)(Object(a.a)({a:1,b:2,c:[1,2,3]},{a:1,b:2,c:[1,2,3]})),Object(n.a)(!Object(a.a)({a:1,b:2,c:[1,2,3]},{a:1,b:2,c:[1,2,4]}))})},function(e,t,r){"use strict";r.r(t);var n=r(5),a=r(0);Object(n.b)("fn",()=>{const e=Object(a.c)((e,t)=>e+t);Object(n.a)(0===e.nCalls),Object(n.a)(12===e(5,7)),Object(n.a)(1===e.nCalls),Object(n.a)(14===e(1,13)),Object(n.a)(2===e.nCalls)})},function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(2);Object(n.d)("intSplit",()=>{Object(n.b)(Object(a.intSplit)(10,3),[3,4,3]),Object(n.b)(Object(a.intSplit)(16,4),[4,4,4,4])}),Object(n.d)("listJoin",()=>{Object(n.b)(Object(a.listJoin)([1,2,3],"stuff"),[1,"stuff",2,"stuff",3])}),Object(n.d)("flatten",()=>{Object(n.b)(Object(a.flatten)([1,2,3]),[1,2,3]),Object(n.b)(Object(a.flatten)([1,2,[3,4]]),[1,2,3,4]),Object(n.b)(Object(a.flatten)([1,2,[[[[[[[3]]]]]]]]),[1,2,3])}),Object(n.d)("flip",()=>{Object(n.b)(Object(a.flip)([1,2,3,4]),[4,3,2,1])}),Object(n.d)("make tensor",()=>{const e=Object(a.makeTensor)([2,3,4]);Object(n.b)(e.length,2),Object(n.b)(e[0].length,3),Object(n.b)(e[0][0].length,4)})},function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(4);Object(n.d)("Make an element",()=>{const e=a.c((e,t)=>{const r=a.b(),n=r.w+e,o=r.h+t;a.f(n,o),a.h(0,0,n,o,"blue"),a.a(1,1,n-2,o-2,"green")})(7,11).size(100,200);Object(n.b)(e.w,107),Object(n.b)(e.h,211),Object(n.b)(e.element.render,[{type:"strokeRect",x:0,y:0,w:107,h:211,color:"blue"},{type:"fillRect",x:1,y:1,w:105,h:209,color:"green"}])}),Object(n.d)("Change state",()=>{const e=a.c(()=>{const[e,t]=a.g(42);return a.h(e,0,5,5,"blue"),{setCount:t}})();let t=e.size(1,1);Object(n.b)(t.element.render[0].x,42),t.setCount(13),t=e.size(1,1),Object(n.b)(t.element.render[0].x,13)});class o{constructor(){this.cmds=[]}strokeStyle(...e){this.cmds.push(e)}strokeRect(...e){this.cmds.push(e)}}Object(n.d)("Render child",()=>{const e=a.c(e=>{const{w:t,h:r}=a.b();a.h(e+1,e+1,t,r,"black")}),t=a.c(t=>{a.d(2,3,e(7).size(11,12)),a.d(4,5,e(8).size(12,13))})(6).size(1,1),r=new o;t.element.paint(3,4,r),Object(n.b)(r.cmds,[["black"],[13,15,11,12],["black"],[16,18,12,13]])}),Object(n.d)("Remembers element",()=>{const e=a.c(e=>{const[t,r]=a.g(5);return a.h(e,t,0,0,"black"),{setCount:r}});let t=7;const r=a.c(()=>{const r=a.e(e(t)).size(6,7);return a.d(0,0,r),{setCount:r.setCount}})();let s=r.size(0,0),i=new o;s.element.paint(0,0,i),Object(n.b)(i.cmds,[["black"],[7,5,0,0]]),s.setCount(13),t=42,s=r.size(0,0),i=new o,s.element.paint(0,0,i),Object(n.b)(i.cmds,[["black"],[42,13,0,0]])})},function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(1);Object(n.d)("create an element",async()=>{const e=Object(a.a)((e,t)=>{const{w:r,h:n}=e.getSize();e.fillRect(t,0,r,n)})(void 0,10),t=Object(a.b)(e,13,17);Object(n.b)(t.w,13),Object(n.b)(t.h,17),Object(n.b)(t.cmds,[{type:"fillRect",x:10,y:0,w:13,h:17}]),Object(n.d)("making a new render doesn't change prior render",()=>{const r=Object(a.b)(e,5,20);Object(n.b)(r.w,5),Object(n.b)(r.h,20),Object(n.b)(r.cmds,[{type:"fillRect",x:10,y:0,w:5,h:20}]),Object(n.b)(t.w,13),Object(n.b)(t.h,17),Object(n.b)(t.cmds,[{type:"fillRect",x:10,y:0,w:13,h:17}])})}),Object(n.d)("element with state",()=>{const e=Object(a.a)(e=>{const[t,r]=e.useState(5),{w:n,h:a}=e.getSize();return e.fillRect(t,0,n,a),{setCount:r}})(void 0);let t=Object(a.b)(e,100,200);Object(n.b)(t.w,100),Object(n.b)(t.h,200),Object(n.b)(t.cmds,[{type:"fillRect",x:5,y:0,w:100,h:200}]),Object(n.a)("function"==typeof t.setCount),t.setCount(22),t=Object(a.b)(e,100,200),Object(n.b)(t.w,100),Object(n.b)(t.h,200),Object(n.b)(t.cmds,[{type:"fillRect",x:22,y:0,w:100,h:200}])})},function(e,t,r){var n=r(29),a=r(30);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n(a,o);e.exports=a.locals||{}},function(e,t,r){"use strict";var n,a=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),s=[];function i(e){for(var t=-1,r=0;r<s.length;r++)if(s[r].identifier===e){t=r;break}return t}function c(e,t){for(var r={},n=[],a=0;a<e.length;a++){var o=e[a],c=t.base?o[0]+t.base:o[0],u=r[c]||0,l="".concat(c," ").concat(u);r[c]=u+1;var h=i(l),f={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(s[h].references++,s[h].updater(f)):s.push({identifier:l,updater:v(f,t),references:1}),n.push(l)}return n}function u(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var a=r.nc;a&&(n.nonce=a)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var s=o(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var l,h=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function f(e,t,r,n){var a=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=h(t,a);else{var o=document.createTextNode(a),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function p(e,t,r){var n=r.css,a=r.media,o=r.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var d=null,g=0;function v(e,t){var r,n,a;if(t.singleton){var o=g++;r=d||(d=u(t)),n=f.bind(null,r,o,!1),a=f.bind(null,r,o,!0)}else r=u(t),n=p.bind(null,r,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=a());var r=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var a=i(r[n]);s[a].references--}for(var o=c(e,t),u=0;u<r.length;u++){var l=i(r[u]);0===s[l].references&&(s[l].updater(),s.splice(l,1))}r=o}}}},function(e,t,r){"use strict";r.r(t);var n=r(17),a=r.n(n),o=r(8),s=r.n(o),i=r(9),c=r(10),u=r(11),l=r(12),h=r(13),f=r(14),p=a()(!1),d=s()(i.a),g=s()(c.a),v=s()(u.a),m=s()(l.a),b=s()(h.a),y=s()(f.a);p.push([e.i,'@font-face {\r\n  font-family: "OpenSans";\r\n  src: url('+d+') format("truetype");\r\n}\r\n@font-face {\r\n  font-family: "OpenSans";\r\n  src: url('+g+') format("truetype");\r\n  font-weight: bold;\r\n}\r\n@font-face {\r\n  font-family: "OpenSans";\r\n  src: url('+v+') format("truetype");\r\n  font-style: italic;\r\n}\r\n@font-face {\r\n  font-family: "RobotoMono";\r\n  src: url('+m+') format("truetype");\r\n}\r\n@font-face {\r\n  font-family: "RobotoMono";\r\n  src: url('+b+') format("truetype");\r\n  font-weight: bold;\r\n}\r\n@font-face {\r\n  font-family: "RobotoMono";\r\n  src: url('+y+') format("truetype");\r\n  font-style: italic;\r\n}\r\n',""]),t.default=p},function(e,t,r){"use strict";r.r(t);var n=r(16);const a={};function o(e,t){a[e]=t}const s=new Map;class i{constructor(e,t,r,n){const a=e.advanceWidth*t.scale;this.glyph=e,this.font=t;const o=(void 0===e.xMin?0:e.xMin)*t.scale,s=(void 0===e.xMax?e.advanceWidth:e.xMax)*t.scale,i=(void 0===e.yMin?0:e.yMin)*t.scale,c=(void 0===e.yMax?0:e.yMax)*t.scale;this.w=s-o,this.h=c-i,this.ascent=c,this.marginLeft=o,this.marginRight=a-this.w-this.marginLeft,this.transparent=r,this.newline=n}draw(e,t,r,n){const a=this.glyph.getPath(e-this.marginLeft,t+this.ascent,this.font.size);void 0!==n&&(a.fill=n),a.draw(r)}}class c{constructor(e,t,r="default"){if(void 0===a[e])throw new Error('Unable to find font face "'+e);if(void 0===a[e][r])throw new Error(`Unable to find style "${r}" in font face "${e}"`);this.face=e,this.size=t,this.style=r,this.font=s.get(e).get(r),this.scale=t/this.font.unitsPerEm,this.lineAscent=this.font.ascender*this.scale,this.lineHeight=this.lineAscent-this.font.descender*this.scale}getGlyphs(e){const t=`${this.str()}: ${e}`;if(c.glyphCache.has(t))return c.glyphCache.get(t);const r=this.font.stringToGlyphs(e).map(t=>new i(t,this," "===e||"\t"===e||"\n"===e,"\n"===e));return c.glyphCache.set(t,r),r}str(){return"default"===this.style?`${this.size}px ${this.face}`:`${this.style} ${this.size}px ${this.face}`}}c.glyphCache=new Map;class u{constructor(){this.events=[]}on(e,t,r){e.addEventListener(t,r),this.events.push([e,t,r])}delete(){for(const[e,t,r]of this.events)e.removeEventListener(t,r)}}class l{constructor(e,t){this.elem=e,this.main=t,this.elementsUnderMouse=new Map,this.buttons=0,this.mouseState={x:0,y:0,buttons:[!1,!1,!1]},this.eventStore=new u,this.onMouseDown=this.onMouseDown.bind(this),this.eventStore.on(this.elem,"mousedown",this.onMouseDown),this.onMouseMove=this.onMouseMove.bind(this),this.eventStore.on(this.elem,"mousemove",this.onMouseMove),this.onMouseUp=this.onMouseUp.bind(this),this.eventStore.on(this.elem,"mouseup",this.onMouseUp),this.onKeyDown=this.onKeyDown.bind(this),this.eventStore.on(window,"keydown",this.onKeyDown),this.onKeyUp=this.onKeyUp.bind(this),this.eventStore.on(window,"keyup",this.onKeyUp),this.onContextMenu=this.onContextMenu.bind(this),this.eventStore.on(this.elem,"contextmenu",this.onContextMenu),this.onMouseWheel=this.onMouseWheel.bind(this),this.eventStore.on(this.elem,"wheel",this.onMouseWheel)}delete(){this.eventStore.delete()}updateButtons(e){for(let t=0;t<5;t++)this.buttons&1<<t&&!(e.buttons&1<<t)&&this.handleMouseUp(this.mouseState.x,this.mouseState.y,t),!(this.buttons&1<<t)&&e.buttons&1<<t&&this.handleMouseDown(this.mouseState.x,this.mouseState.y,t);this.buttons=e.buttons}handleMouseDown(e,t,r){const n=this.main.element.getElementsAt(e,t);for(const a of n){let n=!1;if(a.element.events.has("mouseDown")&&(a.element.runEvent("mouseDown",a.x,a.y,r),n=!0),a.element.events.has("mouseClick")&&(this.mouseClickElem=a,n=!0),a.element.events.has("mouseDrag")&&(this.mouseDragElem=a,this.mouseDragX=e-a.x,this.mouseDragY=t-a.y,n=!0),n)break}}handleMouseUp(e,t,r){if(void 0!==this.mouseDragElem)this.mouseDragElem.element.runEvent("mouseUp",e-this.mouseDragX,t-this.mouseDragY,r);else{void 0!==this.mouseClickElem&&this.mouseClickElem.element.runEvent("mouseUp");const n=this.main.element.getTopElementAt(e,t,"mouseUp");void 0!==n&&n.element.runEvent("mouseUp",n.x,n.y,r);const a=this.main.element.getTopElementAt(e,t,"mouseClick");void 0!==this.mouseClickElem&&void 0!==a&&this.mouseClickElem.element===a.element&&a.element.runEvent("mouseClick",a.x,a.y,r)}this.mouseDragElem=void 0,this.mouseClickElem=void 0}onMouseDown(e){e.clientX,e.clientY;this.mouseState.buttons[e.button]=!0,this.updateButtons(e)}onMouseMove(e){e.preventDefault();const t=e.clientX,r=e.clientY;this.mouseState.x=t,this.mouseState.y=r,this.updateButtons(e),void 0!==this.mouseDragElem?(this.mouseDragElem.element.runEvent("mouseDrag",t-this.mouseDragX,r-this.mouseDragY,this.mouseState),this.mouseDragElem.element.runEvent("mouseMove",t-this.mouseDragX,r-this.mouseDragY,this.mouseState)):void 0===this.mouseClickElem&&(this.updateElementsUnderMouse(t,r),[...this.elementsUnderMouse.keys()].forEach(e=>{e.runEvent("mouseMove",this.elementsUnderMouse.get(e).x,this.elementsUnderMouse.get(e).y,this.mouseState)}))}onMouseUp(e){e.preventDefault();e.clientX,e.clientY;this.mouseState.buttons[e.button]=!1,this.updateButtons(e)}onContextMenu(e){e.preventDefault()}onKeyDown(e){const t=this.main.element.focusedElem.elem;void 0!==t&&(e.ctrlKey||e.metaKey||e.preventDefault(),t.runEvent("keyDown",e.key))}onKeyUp(e){const t=this.main.element.focusedElem.elem;void 0!==t&&(e.ctrlKey||e.metaKey||e.preventDefault(),t.runEvent("keyUp",e.key))}onMouseWheel(e){let t;switch(e.preventDefault(),e.deltaMode){case 0:t=e.deltaY;break;case 1:t=33*e.deltaY;break;default:throw new Error(`Unknown mouse scroll delta mode "${e.deltaMode}"`)}const r=e.clientX,n=e.clientY,a=this.main.element.getTopElementAt(r,n,"mouseScroll");void 0!==a&&a.element.runEvent("mouseScroll",t)}updateElementsUnderMouse(e,t){const r=this.main.element.getElementMapAt(e,t);for(const e of r.keys())!this.elementsUnderMouse.has(e)&&e.events.has("mouseEnter")&&e.runEvent("mouseEnter");for(const e of this.elementsUnderMouse.keys())!r.has(e)&&e.events.has("mouseLeave")&&e.runEvent("mouseLeave");this.elementsUnderMouse=r}}l.MouseLeft=0,l.MouseRight=1,l.MouseMiddle=2,l.Mouse4=3,l.Mouse5=4;class h{constructor(e){this.canvas=e,this.ctx=e.getContext("2d")}strokeStyle(e){this.ctx.strokeStyle=e}fillStyle(e){this.ctx.fillStyle=e}font(e){this.ctx.font=e.str()}strokeRect(e,t,r,n,a=1){this.ctx.beginPath(),this.ctx.moveTo(e,t),this.ctx.lineTo(e+r,t),this.ctx.lineTo(e+r,t+n),this.ctx.lineTo(e,t+n),this.ctx.closePath(),this.ctx.moveTo(e+a,t+a),this.ctx.lineTo(e+a,t+n-a),this.ctx.lineTo(e+r-a,t+n-a),this.ctx.lineTo(e+r-a,t+a),this.ctx.closePath(),this.ctx.fill()}fillRect(e,t,r,n){e=e,t=t,r=r,n=n,this.ctx.fillRect(e,t,r,n)}roundedRectPath(e,t,r,n,a){a=Math.min(a,r/2,n/2),a=Math.max(0,a),this.ctx.beginPath(),this.ctx.moveTo(e+a,t),this.ctx.lineTo(e+r-a,t),this.ctx.arc(e+r-a,t+a,a,-Math.PI/2,0),this.ctx.lineTo(e+r,t+n-a),this.ctx.arc(e+r-a,t+n-a,a,0,Math.PI/2),this.ctx.lineTo(e+a,t+n),this.ctx.arc(e+a,t+n-a,a,Math.PI/2,Math.PI),this.ctx.lineTo(e,t+a),this.ctx.arc(e+a,t+a,a,Math.PI,3*Math.PI/2),this.ctx.closePath()}strokeRoundedRect(e,t,r,n,a){e+=.5,t+=.5,r-=1,n-=1,a=a,this.roundedRectPath(e,t,r,n,a),this.ctx.stroke()}fillRoundedRect(e,t,r,n,a){e=e,t=t,r=r,n=n,this.roundedRectPath(e,t,r,n,a),this.ctx.fill()}line(e,t,r,n){this.ctx.beginPath(),this.ctx.moveTo(e,t),this.ctx.lineTo(r,n),this.ctx.stroke()}dashedLine(e,t,r,n,a){this.ctx.setLineDash(a),this.line(e,t,r,n),this.ctx.setLineDash([])}fillText(e,t,r){this.ctx.fillText(r,e,t)}strokeCircle(e,t,r){this.ctx.beginPath(),this.ctx.arc(e,t,r,0,2*Math.PI),this.ctx.stroke()}fillCircle(e,t,r){this.ctx.beginPath(),this.ctx.arc(e,t,r,0,2*Math.PI),this.ctx.fill()}save(){this.ctx.save()}restore(){this.ctx.restore()}clipRect(e,t,r,n){this.ctx.beginPath(),this.ctx.rect(e,t,r,n),this.ctx.clip()}translate(e,t){this.ctx.translate(e,t)}}h.getFullScreenCanvas=function(){const e=document.createElement("canvas");return document.body.style.width="100%",document.body.style.height="100%",document.body.style.overflow="hidden",document.body.style.margin="0",e.width=window.innerWidth,e.height=window.innerHeight,document.body.append(e),e};var f=r(1);async function p(e){await async function(){const e=[];for(const t in a)for(const r in a[t])e.push(new Promise((e,o)=>{n.a.load(a[t][r],(n,a)=>{n?o(n):(console.log(`loaded ${t} ${r}`),s.has(t)||s.set(t,new Map),s.get(t).set(r,a),e())})}));await Promise.all(e)}();const t=h.getFullScreenCanvas(),r={w:window.innerWidth,h:window.innerHeight};window.addEventListener("resize",()=>{r.w=window.innerWidth,r.h=window.innerHeight,t.width=window.innerWidth,t.height=window.innerHeight}),window.addEventListener("beforeunload",()=>{e.delete()});const o=new l(t),i=new h(t);!function t(){o.main=Object(f.b)(e,r.w,r.h),o.main.element.paint(0,0,i),window.requestAnimationFrame(t)}()}var d=r(2);const g=Object(f.a)((e,{direction:t="row",align:r="low",gap:n=0},a)=>{const o=Math.max(0,n*(a.length-1)),s=e.getSize();let i="row"===t?s.w:s.h;const c=a.map(e=>{const r=Object(f.b)(e,"row"===t?i:s.w,"row"===t?s.h:i);return i=Math.max(0,i-("row"===t?r.w:r.h)),r}),u="row"===t?o+d.sum(c.map(e=>e.w)):d.max(c.map(e=>e.w)),l="row"===t?d.max(c.map(e=>e.h)):o+d.sum(c.map(e=>e.h));if(e.setSize(u,l),"row"===t){let t=0;c.forEach(a=>{const o=a.h===l||"low"===r?0:"center"===r?(l-a.h)/2:l-a.h;e.place(t,o,a),t+=a.w+n})}else{let t=0;c.forEach(a=>{const o=a.w===u||"low"===r?0:"center"===r?(u-a.w)/2:u-a.w;e.place(o,t,a),t+=a.h+n})}});var v=r(4);v.c(e=>{const t=(e=e.map(e=>e.size(0,0))).map(e=>void 0===e.ascent?e.h:e.ascent),r=d.sum(e.map(e=>e.w)),n=d.max(e.map((e,r)=>t[r])),a=d.max(e.map((e,r)=>e.h-t[r])),o=n+a;v.f(r,o);let s=0;return e.forEach((e,r)=>{const a=n-t[r];v.d(s,a,e),s+=e.w}),{ascent:n}}),v.c((...e)=>{const t=v.b();e=e.map(e=>e.size(t.w,0));d.max(e.map(e=>e.w)),d.sum(e.map(e=>e.h));let r=0;e.forEach(e=>{v.d(0,r,e),r+=e.h})});const m=Object(f.a)((e,{w:t=0,h:r=0})=>{e.setSize(t,r)}),b=Object(f.a)((e,t)=>{const r=(t=Object(f.b)(t,0,0)).w,n=t.lineHeight;return e.setSize(r,n),e.place(0,t.lineAscent-t.ascent,t),{cursorPositions:t.cursorPositions}}),y=Object(f.a)((e,t)=>{if(0===t.length)return e.setSize(0,0),{ascent:0,marginLeft:0,marginRight:0,lineAscent:0,lineHeight:0,cursorPositions:[0]};const r=t.map(e=>Object(f.b)(e,0,0)),n=r[0].marginLeft,a=r[r.length-1].marginRight,o=d.max(r.map(e=>e.ascent)),s=d.max(r.map(e=>e.h-e.ascent)),i=d.sum(r.map(e=>e.marginLeft+e.w+e.marginRight))-n-a,c=o+s,u=d.max(r.map(e=>e.lineAscent)),l=d.max(r.map(e=>e.lineHeight));e.setSize(i,c);const h=[0];r.forEach((e,t)=>{h.push(h[t]+(0===t?e.w:r[t-1].marginRight+e.marginLeft+e.w))});let p=0;return r.forEach((t,r)=>{const n=o-t.ascent;0!==r&&(p+=t.marginLeft),e.place(p,n,t),p+=t.w+t.marginRight}),{ascent:o,marginLeft:n,marginRight:a,lineAscent:u,lineHeight:l,cursorPositions:h}}),w=Object(f.a)((e,t,r="black")=>{const{w:n,h:a,ascent:o,marginLeft:s,marginRight:i}=t,{lineAscent:c,lineHeight:u}=t.font;return e.setSize(n,a),e.text(-s,o,String.fromCharCode(t.glyph.unicode),t.font,r),{ascent:o,marginLeft:s,marginRight:i,lineAscent:c,lineHeight:u,transparent:t.transparent,newline:t.newline}}),x=Object(f.a)((e,t,r,n)=>y(e,d.flatten([...t].map(e=>r.getGlyphs(e))).map(t=>w(e,t,n))));const S=Object(f.a)((e,t)=>{const r=e.getSize(),n=function(e,t){const r=[];let n=[],a=0;for(let o=0;o<e.length;o++){const s=e[o];if(0===n.length)n.push(o),a+=s.w;else{const i=e[n[n.length-1]];s.transparent||a+i.marginRight+s.marginLeft+s.w<t?(n.push(o),a+=i.marginRight+s.marginLeft+s.w):(r.push(n),n=[o],a=s.w)}s.newline&&(r.push(n),n=[],a=0)}return n.length>0&&r.push(n),r}(t=t.map(e=>Object(f.b)(e,0,0)),r.w),a=n.map(e=>function(e,t){let r;for(r=t.length;r>0&&e[t[r-1]].transparent;r--);let n=0;for(let a=0;a<r;a++){const r=e[t[a]];n+=0===a?r.w:e[t[a-1]].marginRight+r.marginLeft+r.w}return n}(t,e)),o=n.map(e=>d.max(e.map(e=>t[e].lineAscent))),s=n.map(e=>d.max(e.map(e=>t[e].lineHeight))),i=d.max(a),c=d.sum(s);e.setSize(Math.round(i),Math.round(c));let u=0;n.forEach((r,n)=>{let a=0;r.forEach((s,i)=>{e.place(a,u+o[n]-t[s].ascent,t[s]),a+=0===i?t[s].w:t[r[i-1]].marginRight+t[s].marginLeft+t[s].w}),u+=s[n]});return{marginTop:Math.round(o[0]-d.max(t.map(e=>e.ascent))),marginBottom:Math.round(s[n.length-1]-o[n.length-1])}});function k(e){return" "===e||"\t"===e||"\n"===e}const O=Object(f.a)((e,t,r,n)=>{const a=function(e){const t=[];let r=0;for(let n=0;n<e.length-1;n++)(k(e[n])||k(e[n+1]))&&(t.push(e.slice(r,n+1)),r=n+1);return r<e.length&&t.push(e.slice(r,e.length)),t}(t).map(t=>k(t)?w(e,r.getGlyphs(t)[0],n):x(e,t,r,n));return S(e,a)}),E=Object(f.a)((e,t,r)=>{const n=e.getSize();r=Object(f.b)(r,n.w,n.h);const{w:a,h:o}=r;e.setSize(a,o),e.fillRect(0,0,a,o,t),e.place(0,0,r)}),T=Object(f.a)((e,t,r,n=1)=>{const a=e.getSize(),o=(r=Object(f.b)(r,a.w-2*n,a.h-2*n)).w+2*n,s=r.h+2*n;e.setSize(o,s),e.drawCustom((e,r,a)=>{a.beginPath(),a.moveTo(e,r),a.lineTo(e+o,r),a.lineTo(e+o,r+s),a.lineTo(e,r+s),a.closePath(),a.moveTo(e+n,r+n),a.lineTo(e+n,r+s-n),a.lineTo(e+o-n,r+s-n),a.lineTo(e+o-n,r+n),a.closePath(),a.fillStyle=t,a.fill()}),e.place(n,n,r)}),U=Object(f.a)((e,{left:t=0,right:r=0,top:n=0,bottom:a=0,all:o},s)=>{"number"==typeof o&&(t=o,r=o,n=o,a=o);const i=e.getSize(),c=Math.max(0,i.w-t-r),u=Math.max(0,i.h-n-a),l=(s=Object(f.b)(s,c,u)).w+t+r,h=s.h+n+a;e.setSize(l,h),e.place(t,n,s)});function R(e){const[t,r]=e.useState(!1);return e.addEvent("mouseEnter",()=>{r(!0)}),e.addEvent("mouseLeave",()=>{r(!1)}),t}function M(e){const[t,r]=e.useState();return e.addEvent("mouseDown",()=>{r(!0)}),e.addEvent("mouseUp",()=>{r(!1)}),t}const C=Object(f.a)((e,{thickness:t,color:r="black"})=>{const{w:n,h:a}=e.getSize(),o=void 0===t?.1*a:t,s=[[0,(a+o)/2],[n-o*(Math.sqrt(2)+.5),(a+o)/2],[n-a/2-o/Math.sqrt(2),a-o/Math.sqrt(2)],[n-a/2,a],[n,a/2],[n-a/2,0],[n-a/2-o/Math.sqrt(2),o/Math.sqrt(2)],[n-o*(Math.sqrt(2)+.5),(a-o)/2],[0,(a-o)/2]];e.drawCustom((e,t,n)=>{n.beginPath(),s.forEach(([r,a],o)=>{0===o?n.moveTo(e+r,t+a):n.lineTo(e+r,t+a)}),n.closePath(),n.fillStyle=r,n.fill()})}),L=Object(f.a)((e,{w:t,h:r},n)=>{const a=e.getSize();n=Object(f.b)(n,void 0===t?a.w:t,void 0===r?a.h:r),t=void 0===t?n.w:Math.max(n.w,t),r=void 0===r?n.h:Math.max(n.h,r),e.setSize(t,r),e.place(0,0,n)});var D=r(0),A=r(3);const I=Object(f.a)((e,t={})=>{const{ratio:r=1.8,color:n="black",thickness:a=.5}=t,{w:o,h:s}=e.getSize();let i=[[0,r],[1,r],[1,0],[1-a,0],[1-a,r-a],[0,r-a]];const c=Math.PI/4;i=i.map(([e,t])=>[e*Math.cos(c)-t*Math.sin(c),e*Math.sin(c)+t*Math.cos(c)]);let u=1/0,l=-1/0,h=1/0,f=-1/0;for(const[e,t]of i)u=Math.min(u,e),l=Math.max(l,e),h=Math.min(h,t),f=Math.max(f,t);const p=l-u,d=f-h;let g,v,m;d*o>p*s?(g=s/d,v=(o/g-p)/2-u,m=-h):(g=o/p,v=-u,m=(s/g-d)/2-h),i=i.map(([e,t])=>[(e+v)*g,(t+m)*g]),e.drawCustom((e,t,r)=>{r.beginPath(),i.forEach(([n,a],o)=>{0===o?r.moveTo(e+n,t+a):r.lineTo(e+n,t+a)}),r.closePath(),r.fillStyle=n,r.fill()})}),j=Object(f.a)((e,t,r={})=>{const{primary:n}=r;return O(e,t,e.getValue("bodyFont"),n?e.getValue("color").primary:e.getValue("color").foreground)}),P=Object(f.a)((e,t)=>O(e,t,e.getValue("titleFont"),e.getValue("color").primary)),B=Object(f.a)((e,t)=>O(e,t,e.getValue("headerFont"),e.getValue("color").foreground)),N=Object(f.a)((e,t,r)=>{const n=R(e),a=M(e);return e.addEvent("mouseClick",()=>{r&&r()}),E(e,n^a?e.getValue("color").background:e.getValue("color").primary,U(e,{left:5,right:5},O(e,t,e.getValue("bodyFont"),n^a?e.getValue("color").primary:e.getValue("color").background)))}),F=Object(f.a)((e,{value:t,onChange:r,onSubmit:n,onKeyDown:a})=>{const o=e.getValue("bodyFont");let[s,i]=e.useState("stuff and");void 0!==t&&(s=t);let[c,u]=e.useState(0);c=A.a.clamp(c,0,s.length);let[l,h]=e.useState(!0);l=l&&e.isFocused();const[p,d]=function(e,t){const[r]=e.useState({});function n(){void 0!==r.timerId&&(clearTimeout(r.timerId),r.timerId=void 0)}return r.fcn=t,e.addEvent("delete",()=>{n()}),[function(e){n(),r.timerId=setTimeout(()=>{r.fcn(),r.timerId=void 0},e)},n]}(e,()=>{h(!l),p(500)});function g(e){void 0===t&&i(e),r&&r(e)}e.addEvent("onFirstPaint",()=>{p(500)});const v=Object(f.b)(b(e,x(e,s,o),"black"),0,0);e.addEvent("mouseDown",t=>{e.focus();const r=v.cursorPositions;let n;for(n=0;n<r.length-1&&!(t<(r[n]+r[n+1])/2);n++);u(n),h(!0),p(500)}),e.addEvent("keyDown",e=>{switch(h(!0),p(500),a&&a(e),e){case"Backspace":s.length>0&&c>0&&(g(s.slice(0,c-1)+s.slice(c,s.length)),u(c-1));break;case"Delete":s.length>0&&c<s.length&&g(s.slice(0,c)+s.slice(c+1,s.length));break;case"Enter":n&&n();break;case"Shift":case"Control":case"Meta":case"Tab":case"Alt":case"OS":case"CapsLock":case"Escape":case"AudioVolumeUp":case"AudioVolumeDown":case"F1":case"F2":case"F3":case"F4":case"F5":case"F6":case"F7":case"F8":case"F9":case"F10":case"F11":case"F12":case"ContextMenu":case"Insert":case"Home":case"End":case"Pause":case"ScrollLock":case"PrintScreen":break;case"ArrowLeft":u(Math.max(0,c-1));break;case"ArrowRight":u(Math.min(s.length,c+1));break;case"ArrowDown":case"ArrowUp":break;default:g(s.slice(0,c)+e+s.slice(c,s.length)),u(c+1)}}),l&&e.fillRect(v.cursorPositions[c],0,1,o.lineHeight,"red");const m=e.getSize();return L(e,{w:m.w,h:o.lineHeight},v)}),G=Object(f.a)((e,t)=>T(e,e.isFocused()?"green":"black",U(e,{all:10},F(e.store(),t)))),z=Object(f.a)((e,t={})=>{const{value:r,onChange:n,mouseOver:a=!1}=t,o=(e.getSize(),20);e.setSize(o,20),n&&e.addEvent("mouseClick",()=>{n(!r)});const s=R(e)||a;r?(e.fillRect(0,0,o,20,e.getValue("color").primary),e.place(0,0,Object(f.b)(U(e,{all:2.6},I(e,{color:e.getValue("color").background})),o,20))):e.strokeRect(0,0,o,20,s?e.getValue("color").primary:e.getValue("color").foreground)}),_=(Object(f.a)((e,t={})=>{const{label:r,value:n,onChange:a}=t,o=R(e);return a&&e.addEvent("mouseClick",()=>{a(!n)}),g(e,{direction:"row",align:"center",size:"max"},[L(e,{w:20,h:20},z(e.store(),{value:n,onChange:a,mouseOver:o})),m(e,{w:10}),j(e,r)])}),Object(f.a)((e,t={})=>{let{r:r=10,min:n=0,max:a=1,value:o,onChange:s}=t;o=A.a.clamp(o,n,a);const i=e.getSize(),c=Math.max(2*r,i.w),u=2*r;e.setSize(c,u);const l=R(e);e.addEvent("mouseDown",e=>{const t=A.a.clamp(n+(e-r)/(c-2*r)*(a-n),n,a);s&&s(t)}),e.addEvent("mouseDrag",e=>{const t=A.a.clamp(n+(e-r)/(c-2*r)*(a-n),n,a);s&&s(t)});const h=(o-n)/(a-n);e.fillRect(0,(u-3)/2,c,3,l?e.getValue("color").primary:e.getValue("color").foreground),e.fillCircle(r+(c-2*r)*h,u/2,r,e.getValue("color").background),e.strokeCircle(r+(c-2*r)*h,u/2,r,e.getValue("color").foreground)})),H=Object(f.a)((e,t={})=>{const{label:r}=t;return g(e,{direction:"col"},[j(e,r),_(e.store(),t)])}),V=Object(f.a)((e,{pageToViewRatio:t,value:r,onChange:n})=>{const{w:a,h:o}=e.getSize();t=Math.max(1,t);const s=o/t,i=(o-s)*r,c=R(e),u=M(e);e.fillRect(0,i,a,s,u?e.getValue("color").primary:e.getValue("color").foreground),e.fillRect(0,0,1,o,c?e.getValue("color").primary:e.getValue("color").foreground);const[l,h]=e.useState();e.addEvent("mouseDown",(e,t)=>{i<=t&&t<i+s?h({barFrac:(t-i)/s}):(n(A.a.clamp((t-s/2)/(o-s),0,1)),h({barFrac:.5}))}),e.addEvent("mouseDrag",(e,t)=>{l&&n(A.a.clamp((t-s*l.barFrac)/(o-s),0,1))}),e.addEvent("mouseUp",()=>{h(void 0)})}),q=Object(f.a)((e,t)=>{const r=e.getSize(),n=Object(f.b)(t,r.w,r.h);if(n.h>r.h)return W(e.store("scroll"),t);e.place(0,0,n)}),W=Object(f.a)((e,t)=>{const r=e.getSize(),n=Object(f.b)(t,Math.max(0,r.w-20),r.h),a=Math.max(r.w,n.w+20),o=r.h;e.setSize(a,o);const[s,i]=e.useState(0);e.addEvent("mouseScroll",e=>{i(A.a.clamp(s+e/(n.h-o),0,1))}),e.place(0,-s*Math.max(0,n.h-r.h),n),e.place(r.w-20,0,Object(f.b)(V(e.store(),{pageToViewRatio:n.h/r.h,value:s,onChange:e=>i(e)}),20,r.h))}),Y=Object(f.a)((e,t)=>g(e,{direction:"row"},t.map(([t,r])=>N(e.store(),t,()=>{e.getValue("page").dispatch({type:"set page",value:r})})))),X=Object(f.a)((e,{text:t,fontFace:r,startSize:n,endSize:a,approachRate:o=.5,fontStyle:s,color:i})=>{const u=e.getSize(),l=t.split(" "),h=[],p=[];let d,g,v,m=[],y=0;for(let t=0;t<l.length;t++){0===m.length&&(d=(n-a)/(1+o*h.length)+a,v=new c(r,d,s),g=Object(f.b)(x(e," ",v,i),0,0).w,p.push(g));const w=l[t],S=Object(f.b)(b(e,x(e,w,v,i)),0,0);0===m.length?(m.push(S),y+=S.w):y+g+S.w<u.w?(m.push(S),y+=g+S.w):(h.push(m),m=[],y=0,t--)}m.length>0&&h.push(m),p.length>h.length&&p.pop(),Object(D.a)(p.length===h.length);const w=h.map((e,t)=>p[t]*(e.length-1)+A.a.sum(e.map(e=>e.w))),S=h.map(e=>A.a.max(e.map(e=>e.h))),k=A.a.max(w),O=A.a.sum(S);e.setSize(k,O);let E=0;h.forEach((t,r)=>{let n=0;t.forEach(t=>{e.place(n,E,t),n+=p[r]+t.w}),E+=S[r]})}),Z=Object(f.a)((e,{marginLeft:t=20,arrowHeight:r=7},n)=>{const a=e.getSize(),o=Math.max(0,a.w-t),s=n.map(e=>Object(f.b)(e,o,0)),i=t+A.a.max(s.map(e=>e.w)),c=A.a.sum(s.map(e=>e.h));e.setSize(i,c);let u=0;e.fillRect(5,u,1,c-s[s.length-1].h/2),s.forEach(n=>{e.place(t,u,n),e.place(5,u+n.h/2-r/2,Object(f.b)(C(e,{color:e.getValue("color").foreground,thickness:1}),10,r)),u+=n.h})});function $(e){return e}function K(e){return e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2}function Q(e,t,r=$){const[n]=e.useState({startVal:t,endVal:t,startT:void 0,endT:void 0,resolve:void 0,reject:void 0});return n.t=void 0===n.startT?void 0:Math.min(performance.now(),n.endT),n.val=void 0===n.t?t:n.startVal+(n.endVal-n.startVal)*r((n.t-n.startT)/(n.endT-n.startT)),e.addEvent("paint",()=>{void 0!==n.resolve&&void 0!==n.startT&&n.t===n.endT&&(n.resolve(),n.resolve=void 0)}),[n.val,function(e,t){const r=performance.now();return n.startT=r,n.endT=r+t,n.startVal=n.val,n.endVal=e,new Promise((e,t)=>{void 0!==n.resolve&&(n.reject(),n.resolve=void 0),n.resolve=e,n.reject=t})}]}function J(e){return new Promise(t=>{setTimeout(()=>{t()},e)})}class ee{constructor(e){this.ui=e,this.stack=[]}start(e,t={}){this.stack.push({elem:e,options:t,children:[]})}add(...e){this.stack[this.stack.length-1].children.push(...e)}end(){const e=this.stack.pop(),t=e.elem(this.ui,e.options,e.children);this.stack.length>0?this.stack[this.stack.length-1].children.push(t):this.elem=t}}const te=Object(f.a)((e,t)=>{const r=e.getSize();t=Object(f.b)(t,r.w,r.h);const n=Math.max(r.w,t.w),a=t.h;e.setSize(n,a);const o=(n-t.w)/2;e.place(o,0,t)}),re=Object(f.a)((e,{w:t,h:r},n)=>{const a=e.getSize();n=Object(f.b)(n,void 0===t?a.w:Math.min(a.w,t),void 0===r?a.h:Math.min(a.h,r)),t=void 0===t?n.w:Math.max(t,n.w),r=void 0===r?n.h:Math.max(r,n.h),e.setSize(t,r),e.place(0,0,n)}),ne=Object(f.a)((e,t)=>{const r=e.getSize().w;e.setSize(r,20),e.fillRect(10,10,r-20,1,e.getValue("color").foreground),e.fillCircle(10+(r-20)*t,10,8,e.getValue("color").primary)}),ae=Object(f.a)((e,t)=>{const r=100,n=100,a=2*(t-.25)*Math.PI;e.setSize(r,n),e.fillRect(45+40*Math.cos(a),45+40*Math.sin(a),10,10,e.getValue("color").primary),e.strokeCircle(50,50,40,e.getValue("color").foreground)}),oe=Object(f.a)((e,t)=>{const r=100,n=100;e.setSize(r,n);const a=t*Math.PI/2-3/4*Math.PI;e.line(50,80,50+60*Math.cos(a),80+60*Math.sin(a)),e.strokeRect(0,0,r,n,e.getValue("color").foreground)}),se=Object(f.a)(e=>{const{w:t,h:r}=e.getSize(),n=new ee(e),[a,o]=Q(e,0,$);n.start(g,{direction:"col"}),n.add(P(e,"Animation Page")),n.add(B(e,"Linear Animation"),N(e.store(),"Start",()=>{(async()=>{await o(1,1e3),await o(0,1e3)})()}),ne(e,a)),n.add(m(e,{h:10}));const[s,i]=Q(e,0,K);n.add(B(e,"EaseInOutQuart Animation"),N(e.store(),"Start",()=>{(async()=>{await i(1,1e3),await i(0,1e3)})()}),ne(e,s)),n.add(m(e,{h:10}));const[c,u]=Q(e,0,K);n.add(N(e.store(),"Start",()=>{(async()=>{await u(1,1e3),await u(0,1e3)})()}),ae(e,c));const l=[],h=[],p=[];for(let t=0;t<10;t++){const[t,r]=Q(e,0,K);l.push(t),h.push(r),p.push(ne(e,t))}n.add(B(e,"Synchonized Animations"),N(e.store(),"Start",()=>{(async()=>{let e=[];for(let t=0;t<10;t++)e.push((async()=>{await h[t](1,500),await h[t](0,500)})()),t<9&&await J(100);await Promise.all(e),e=[];for(let t=9;t>=0;t--)e.push((async()=>{await h[t](1,500),await h[t](0,500)})()),t>0&&await J(100);await Promise.all(e),e=[];for(let t=0;t<10;t++)e.push((async()=>{await h[t](1,500),await h[t](0,500)})());await Promise.all(e)})()}),...p);const[d,v]=Q(e,0,K);n.add(B(e,"Wiper"),N(e.store(),"Start",()=>{(async()=>{await v(1,500),await v(0,500)})()}),oe(e,d)),n.add(B(e,"Infinite Animation"));const[b,y]=Q(e,0,K),[w,x]=Q(e,0,K);n.add(N(e.store(),"Start",async()=>{for(;;)await y(1,500),await x(1,500),await y(0,500),await x(0,500)})),n.add(ie(e,[b,w]));const[S,k]=e.useState(!1),[O,E]=Q(e,0,K);n.add(B(e,"Aminated Element")),n.add(N(e.store(),S?"Collapse":"Expand",()=>{E(S?0:300,500),k(!S)})),n.add(ce(e,O,(()=>{const t=new ee(e);return t.start(g,{direction:"col"}),t.add(j(e,"This text was hidden")),t.add(j(e,"But now you can see it")),t.end(),t.elem})())),n.add(B(e,"The End")),n.end(),e.place(0,0,Object(f.b)(q(e.store(),te(e,re(e,{w:700},U(e,{all:10},n.elem)))),t,r))}),ie=Object(f.a)((e,[t,r])=>{e.setSize(100,100);t=8+84*t,r=8+84*r,e.fillCircle(t,r,8,e.getValue("color").primary),e.strokeRect(0,0,100,100,e.getValue("color").foreground)}),ce=Object(f.a)((e,t,r)=>{const{w:n}=e.getSize();e.setSize(n,t),e.strokeRect(0,0,n,t,e.getValue("color").foreground),e.cropRect(0,0,n,t,()=>{e.place(0,0,Object(f.b)(r,n,t))})});class ue{constructor(e,t){this.x=e,this.y=t}static fromLineIntersection(e,t){const r=e.x1-e.x0,n=e.y1-e.y0,a=t.x1-t.x0,o=t.y1-t.y0,s=n,i=-r,c=o,u=-a,l=s*u-i*c;if(0===l)throw Error("getting intersection from parallel lines");const h=u/l,f=-i/l,p=-c/l,d=s/l,g=e.x0*n-e.y0*r,v=t.x0*o-t.y0*a;return new ue(h*g+f*v,p*g+d*v)}static fromBetweenTwoPoints(e,t,r=.5){const n=(t.x-e.x)*r,a=(t.y-e.y)*r;return new ue(e.x+n,e.y+a)}static fromPointPointAngle(e,t,r){r=r*Math.PI/180;const n=t.x-e.x,a=t.y-e.y,o=n*Math.cos(r)-a*Math.sin(r),s=n*Math.sin(r)+a*Math.cos(r);return new ue(t.x+o,t.y+s)}}class le{constructor(e,t,r,n){this.x0=e,this.y0=t,this.x1=r,this.y1=n}static fromPoints(e,t){return new le(e.x,e.y,t.x,t.y)}static fromLinePointAngle(e,t,r){r=r*Math.PI/180;const n=e.x1-e.x0,a=e.y1-e.y0,o=n*Math.cos(r)-a*Math.sin(r),s=n*Math.sin(r)+a*Math.cos(r);return new le(t.x-o/2,t.y-s/2,t.x+o/2,t.y+s/2)}static fromLineOffset(e,t){const r=e.x1-e.x0,n=e.y1-e.y0,a=Math.sqrt(r*r+n*n),o=-n/a*t,s=r/a*t;return new le(e.x0+o,e.y0+s,e.x1+o,e.y1+s)}}class he{constructor(e,t,r){this.type=e,this.resolve=t,this.elem=r}}const fe=Object(f.a)(e=>{const[t,r]=e.useState(void 0),[n,a]=e.useState(void 0),[o,s]=e.useState(void 0),[i,c]=e.useState([new ue(0,0),new ue(1,0)]),[u,l]=e.useState([]),{w:h,h:p}=e.getSize(),{minX:d,maxX:v,minY:m,maxY:b}=function(e){let t=e[0].x,r=e[0].x,n=e[0].y,a=e[0].y;for(let o=0;o<e.length;o++){const s=e[o];t=Math.min(t,s.x),r=Math.max(r,s.x),n=Math.min(n,s.y),a=Math.max(a,s.y)}return{minX:t,maxX:r,minY:n,maxY:a}}(i),y=v-d,w=b-m;let x,S,k;function O(e){return x+k*(e-d)}function E(e){return p-(S+k*(e-m))}w*h>y*p?(S=100,k=(p-200)/w,x=(h-y*k)/2):(x=100,k=(h-200)/y,S=(p-w*k)/2);const T=i.map(e=>new ue(O(e.x),E(e.y))),R=u.map(e=>new le(O(e.x0),E(e.y0),O(e.x1),E(e.y1)));function M(t="Pick a point"){if(void 0!==o)throw new Error;let r;const n=new Promise(e=>{r=t=>{s(void 0),e(t)}});return s(new he("pickPoint",r,g(e,{direction:"col",gap:5},[j(e,t),N(e,"Cancel",()=>{r(void 0)})]))),n}function C(t="Pick a line"){if(void 0!==o)throw new Error;let r;const n=new Promise(e=>{r=t=>{s(void 0),e(t)}});return s(new he("pickLine",r,g(e,{direction:"col",gap:5},[j(e,t),N(e,"Cancel",()=>{r(void 0)})]))),n}e.addEvent("mouseMove",(e,t)=>{r(function(e,t,r){if(0===e.length)return;let n,a;return e.forEach((e,o)=>{const s=t-e.x,i=r-e.y,c=s*s+i*i;(void 0===a||c<a)&&(n=o,a=c)}),a<100?n:void 0}(T,e,t)),a(function(e,t,r){if(0===e.length)return;let n,a;return e.forEach((e,o)=>{const s=e.y0-e.y1,i=e.x1-e.x0,c=Math.sqrt(s*s+i*i),u=s/c,l=i/c,h=t-e.x0,f=r-e.y0,p=Math.abs(h*u+f*l);(void 0===a||p<a)&&(n=o,a=p)}),a<10?n:void 0}(R,e,t))}),e.addEvent("mouseUp",()=>{void 0!==t&&o&&"pickPoint"===o.type&&o.resolve(t),void 0!==n&&o&&"pickLine"===o.type&&o.resolve(n)});const L=[["Line from 2 points",async()=>{const e=await M();if(void 0===e)return;let t=await M("Pick another point");if(void 0!==t){for(;e===t;)if(t=await M("Pick a different point"),void 0===t)return;u.push(le.fromPoints(i[e],i[t]))}}],["Point between 2 points",async()=>{const e=await M();if(void 0===e)return;let t=await M("Pick another point");if(void 0!==t){for(;e===t;)if(t=await M("Pick a different point"),void 0===t)return;i.push(ue.fromBetweenTwoPoints(i[e],i[t]))}}],["Point from 2 points and an angle",async()=>{const t=await M();if(void 0===t)return;const r=await M("Pick another point");if(void 0===r)return;const n=await function(){if(void 0!==o)throw new Error;let t;const r=new Promise(e=>{t=t=>{s(void 0),e(t)}}),n=[90,-90].map(r=>N(e,r+" degrees",()=>{t(r)}));return s(new he("pickPoint",t,g(e,{direction:"col",gap:5,size:"max"},[j(e,"Pick an angle"),N(e,"Cancel",()=>{t(void 0)}),...n]))),r}();void 0!==n&&i.push(ue.fromPointPointAngle(i[t],i[r],n))}],["Point from line intersection",async()=>{const e=await C();if(void 0===e)return;const t=await C("Pick another line");void 0!==t&&i.push(ue.fromLineIntersection(u[e],u[t]))}],["Delete point",async()=>{const e=await M();void 0!==e&&e>=2&&i.splice(e,1)}]].map(([t,r])=>N(e.store(t),t,r)),D=void 0===o?void 0:o.elem;e.place(0,0,Object(f.b)(U(e,{left:10,top:10},g(e,{direction:"col",gap:5,size:"max"},D?[D]:L)),h,p)),R.forEach((t,r)=>{e.line(t.x0,t.y0,t.x1,t.y1,r===n?"red":"black")}),T.forEach((r,n)=>{e.fillCircle(r.x,r.y,5,n===t?"red":"black")})});r(28);var pe=r(9),de=r(10),ge=r(11),ve=r(12),me=r(13),be=r(14);Object(f.a)(e=>{const{w:t,h:r}=e.getSize(),[n,a]=e.useState([new ye(-1,0),new ye(1,0)]),[o,s]=e.useState({x:-t/2/50,y:-r/2/50,zoom:50});function i(e){return(e-o.x)*o.zoom}function c(e){return(e-o.y)*o.zoom}const[u,l]=e.useState({x:0,y:0,b0:!1,b1:!1,b2:!1});e.addEvent("mouseMove",(e,t)=>{l({...u,x:e,y:t})}),e.addEvent("mouseDown",(t,r,n)=>{e.focus(),0===n?l({...u,b0:!0}):1===n&&l({...u,b1:!0})}),e.addEvent("mouseUp",(e,t,r)=>{0===r?l({...u,b0:!1}):1===r&&l({...u,b1:!1})});const[h,f]=e.useState({shift:!1});e.addEvent("keyDown",e=>{switch(e){case"Shift":f({...h,shift:!0})}}),e.addEvent("keyUp",e=>{switch(e){case"Shift":f({...h,shift:!1})}});const[p,d]=e.useState(void 0);e.addEvent("mouseDown",(e,t)=>{d({mx:e,my:t,vx:o.x,vy:o.y})}),e.addEvent("mouseDrag",(e,t)=>{if(void 0===p)return;const r=e-p.mx,n=t-p.my;s({...o,x:p.vx-r/o.zoom,y:p.vy-n/o.zoom})}),e.addEvent("mouseUp",(e,t)=>{d(void 0)}),e.addEvent("mouseScroll",e=>{const t=o.zoom*Math.pow(1.004,-e),r=o.x+u.x*(1/o.zoom-1/t),n=o.y+u.y*(1/o.zoom-1/t);s({...o,x:r,y:n,zoom:t})});const[g,v]=e.useState();e.addEvent("mouseMove",(e,t)=>{let r=void 0,a=void 0;for(let e=0;e<n.length;e++){const t=n[e],o=i(t.x)-u.x,s=c(t.y)-u.y,l=o*o+s*s;(void 0===r||l<a)&&(r=e,a=l)}v(void 0!==r&&a<100?r:void 0)});const[m,b]=e.useState(new Set);e.addEvent("mouseDown",()=>{if(void 0===g)b(new Set);else if(h.shift)if(m.has(g)){const e=new Set(m);e.delete(g),b(e)}else b(new Set([...m,g]));else b(new Set([g]))}),n.forEach((t,r)=>{e.fillCircle(i(t.x),c(t.y),10,m.has(r)?"orange":r===g?"green":"black")})});class ye{constructor(e,t){this.x=e,this.y=t}}var we=r(7),xe=r.n(we);const Se=Object(f.a)((e,{rows:t})=>{const r=t.length,n=t[0].length,a=t.map(e=>e.map(e=>Object(f.b)(e,0,0))),o=A.a.range(r).fill(-1/0),s=A.a.range(n).fill(-1/0);for(let e=0;e<r;e++)for(let t=0;t<n;t++)o[e]=Math.max(o[e],a[e][t].h),s[t]=Math.max(s[t],a[e][t].w);const i=A.a.sum(s),c=A.a.sum(o);e.setSize(i,c);let u=0;for(let t=0;t<r;t++){let r=0;for(let o=0;o<n;o++)e.place(r,u,a[t][o]),r+=s[o];u+=o[t]}}),ke=Object(f.a)((e,{w:t,h:r},n)=>{const a=e.getSize();n=Object(f.b)(n,void 0===t?a.w:t,void 0===r?a.h:r),e.setSize(n.w,n.h),e.place(0,0,n)});function Oe(e,t){null===window.localStorage.getItem(e)&&window.localStorage.setItem(e,t);let r=window.localStorage.getItem(e);return"number"==typeof t?r=parseFloat(r):"boolean"==typeof t&&(r="true"===r),[r,function(t){window.localStorage.setItem(e,t)}]}const Ee=Object(f.a)(e=>{const t=e.getValue("color");const{w:r,h:n}=e.getSize();new c("OpenSans",20);e.fillRect(0,0,r,n,t.background);const a=new ee(e);a.start(g,{direction:"col",gap:15}),a.add(P(e,"Color Page")),a.add(Se(e,{rows:[[j(e,"Hue: "),m(e,{w:10}),L(e,{w:200},_(e.store(),{min:0,max:359,value:t.hue,onChange:e=>{t.dispatch({type:"set hue",value:e})}}))],[j(e,"Saturation: "),m(e,{w:10}),L(e,{w:200},_(e.store(),{min:0,max:1,value:t.saturation,onChange:e=>{t.dispatch({type:"set saturation",value:e})}}))],[ke(e,{w:200},j(e,"Dark Mode: ")),m(e,{w:10}),L(e,{w:200},z(e.store(),{value:t.darkMode,onChange:e=>{t.dispatch({type:"set dark mode",value:e})}}))]]})),a.add(B(e,"Customize this site's color")),a.add(j(e,"Sometimes you need to page to feel a certain way. You need dark mode. You're feeling purple today.")),a.add(j(e,"Well now you can. Use the sliders at the top to tweak color settings to find your theme.")),a.add(B(e,"Color Gradients"));const o=Object(f.a)(e=>{e.setSize(160,64);for(let r=0;r<4;r++)for(let n=0;n<10;n++)e.fillRect(16*n,16*r,15,15,t.getHueGradient(r/4,n/9))});a.add(o(e)),a.add(B(e,"Design Guidelines"),j(e,"I'm trying to desing this entire site using only three colors: background, foreground and primary. No secondary colors and no different shades of primary."),j(e,"I'm also trying to make sure I never draw the primary color next to the foreground color."),j(e,"If all goes well, it will keep the site's design simple and compatible with going black and white.")),a.end(),e.place(0,0,Object(f.b)(q(e.store(),te(e,re(e,{w:700},U(e,{all:10},a.elem)))),r,n))}),Te=Object(f.a)((e,t,r,n)=>t.hasOwnProperty(n)?t[n]:r),Ue=Object(f.a)(e=>{const{w:t,h:r}=e.getSize(),n=new ee(e);n.start(g,{direction:"col",gap:15,size:"max"}),n.add(P(e,"Home")),n.add(j(e,"Hey there.")),n.add(j(e,"Welcome to my web app. This is a place where I can experiment with all kinds of cool javascript things.")),n.add(j(e,"For example, this entire page is drawn entirely on the canvas. There's not DOM at all.")),n.add(j(e,"Open devtools and check it out. Nothing here but a giant canvas.")),n.add(j(e,"If you want to change the color, check out the color tab at the top.")),n.end(),e.place(0,0,Object(f.b)(q(e.store(),te(e,re(e,{w:700},U(e,{all:10},n.elem)))),t,r))}),Re=Object(f.a)(e=>{const{w:t,h:r}=e.getSize(),[n]=e.useState(()=>{const e=new Ce;return e.generate(100),e.shuffle(),e}),[a]=e.useState(()=>function*e(t,r,n){void 0===r&&(r=0,n=t.length-1);if(r>=n)return;const a=t.get(n);let o=r-1;for(let e=r;e<n;e++)t.get(e)<a&&(o++,t.swap(o,e),yield);o++,t.swap(o,n),yield*e(t,r,o-1),yield*e(t,o+1,n)}(n));return a.next(),Me(e,n)}),Me=Object(f.a)((e,t)=>{const r=e.getSize(),n=Math.min(r.w,r.h),a=n;e.setSize(n,a);const o=n/t.length;for(let r=0;r<t.length;r++)e.fillRect(r*o,a-o-t.list[r]*o,o,o,r===t.lastViewed?e.getValue("color").primary:e.getValue("color").foreground)});Object(f.a)((e,t)=>{e.getSize(),Math.min});class Ce{constructor(){this.list=[],this.lastViewed=0}generate(e){this.list=A.a.range(e),this.length=this.list.length}shuffle(){A.a.shuffleListInPlace(this.list)}get(e){return Object(D.a)(0<=e&&e<this.list.length),this.lastViewed=e,this.list[e]}swap(e,t){const r=this.list[e];this.list[e]=this.list[t],this.list[t]=r}}const Le=Object(f.a)(e=>{const{w:t,h:r}=e.getSize(),n=new ee(e);n.start(g,{direction:"col",gap:15,size:"max"}),n.add(P(e,"Info")),n.add(j(e,"This page is rendered using a custom app framework library that renders directly to the canvas."),j(e,"Pro: Layout is a first-class citizen. You know the element's width and height before render which allows devs to write components that do cool things with layout."),j(e,"Pro: Elements are defined using a declarative syntax inspired by React. There is support for all the concepts like hooks, effects and context that make modern app development pleasant."),j(e,"Con: The UI is completely re-rendered and re-drawn each frame. It's slow and power-hungry. This app framework is designed to experiment with cool layout effects, not to be efficient. That being said, simple pages feel responsive and scrolling is surprisingly smooth.")),n.end(),e.place(0,0,Object(f.b)(q(e.store(),te(e,re(e,{w:700},U(e,{all:10},n.elem)))),t,r))}),De=Object(f.a)(e=>{const t=new c("RobotoMono",16),[r]=e.useState(()=>{const e=new je;return e.mode="default",e}),[n,a]=e.useState(""),o=new ee(e);o.start(g,{direction:"col"}),r.lines.forEach(r=>{0===r.length?o.add(m(e,{h:t.lineHeight})):(o.start(g,{direction:"row"}),r.forEach(({char:r,mode:n})=>{const[a,s]=function(e,t){switch(t){case"default":return[e.getValue("color").foreground,e.getValue("color").background];case"focus":return[e.getValue("color").primary,e.getValue("color").background];case"error":return["red",e.getValue("color").background];default:throw new Error(`Unknown console text mode: "${t}"`)}}(e,n);o.add(Ae(e,{char:r,foreground:a,background:s,font:t}))}),o.end())}),o.add(L(e,{w:200},G(e.store(),{value:n,onChange:e=>{a(e)},onSubmit:()=>{!function(){if(r.print(`${r.prompt}${n}\n`),""===n)return;let e;if(e=n.match(/^(\w+)( (.*))?$/),null===e)return void r.print(`Unknown Query: "${n}"\n`);const t=e[1],a=void 0===e[3]?"":e[3];void 0===u[t]?r.print(`Unknown Command: "${t}"\n`):u[t](a)}(),a("")}}))),o.end();const{w:s,h:i}=e.getSize();e.place(0,0,Object(f.b)(U(e,{all:10},q(e.store(),o.elem)),s,i));const u={help:e=>{r.print("help...\n"),r.print("  This is a simple command prompt.\n"),r.print("  Commands have the structure: [command] [payload?].\n"),r.print("\n"),r.print("Examples:\n"),r.print("help\n"),r.print("echo hey there\n")},echo:e=>{r.print(e+"\n")},stars:e=>{const t=parseInt(e);if(isNaN(t))r.print("usage: stars [N]\n");else for(let e=0;e<t;e++){for(let t=0;t<e+1;t++)t>0&&r.print(" "),r.print("*");r.print("\n")}},ls:()=>{r.print("TODO: Make OS\n"),r.print("TODO: Make file system\n")},fail:e=>{r.mode="error",r.print("ERROR:"),r.mode="default",r.print(" "+e)},prompt:e=>{r.prompt=e},g:t=>{""===t?r.print("usage: g [page]\n"):e.getValue("page").dispatch({type:"set page",value:t})}}}),Ae=Object(f.a)((e,{char:t,foreground:r,background:n,font:a})=>{const o=Object(f.b)(x(e,t,a,r),0,0),s=o.w+o.marginLeft+o.marginRight,i=a.lineHeight;e.setSize(s,i),e.fillRect(0,0,s,i,n),e.place(o.marginLeft,o.lineAscent-o.ascent,o)});class Ie{constructor(e,t){this.char=e,this.mode=t}}class je{constructor(){this.lines=[[]],this.mode="default",this.prompt="--\x3e "}print(e){for(const t of e)"\n"===t?this.lines.push([]):this.lines[this.lines.length-1].push(new Ie(t,this.mode))}}const Pe=Object(f.a)(e=>{const[t]=e.useState({width:100,height:100});function r(e){switch(e.type){case"change width":t.width=e.value;break;case"change height":t.height=e.value;break;default:throw new Error(`Unknown action type="${e.type}"`)}}let[n,a]=e.useState(void 0);void 0===n&&(n=Fe);const[o,s]=e.useState(""),i=n.getChoices(o);let[c,u]=e.useState(0);c=A.a.clamp(c,0,i instanceof Ne?0:i.length-1);const{w:l,h:h}=e.getSize(),p=new ee(e);p.start(g,{direction:"col",gap:15,size:"max"}),p.add(P(e,"Commands")),p.add(j(e,`Dimensions: ${t.width} x ${t.height}`)),p.add(B(e,n.name)),p.add(L(e,{w:200},G(e.store(),{value:o,onChange:e=>{s(e)},onSubmit:()=>{if(!(i instanceof Ne)&&0<=c&&c<i.length){s("");const e=i[c].action(r);a(e)}},onKeyDown:e=>{"ArrowUp"===e?u(c-1):"ArrowDown"===e&&u(c+1)}}))),i instanceof Ne?p.add(j(e,"Error: "+i.message)):i.forEach((t,r)=>{p.add(Be(e.store("choices").store(r),{name:t.name,highlighted:r===c}))}),p.end(),e.place(0,0,Object(f.b)(q(e.store(),U(e,{all:10},p.elem)),l,h))}),Be=Object(f.a)((e,{name:t,onMouseEnter:r,onClick:n,highlighted:a})=>(r&&e.addEvent("mouseEnter",()=>{r()}),n&&e.addEvent("mouseClick",()=>{n()}),j(e,t,{primary:a})));class Ne{constructor(e){this.message=e}}const Fe={name:"What do you want to do?",tags:["run","command"],getChoices:e=>{const t=[];return[Ge].forEach(r=>{for(const n of r.tags)if(""!==e&&n.startsWith(e)){t.push(r);break}}),0===t.length?new Ne("Unable to find matches"):t.map(e=>({name:"Run: "+e.name,action:()=>e}))}},Ge={name:"Change Width",description:"changes the width to something else",tags:["change","width"],getChoices:e=>{const t=parseInt(e);return isNaN(t)?new Ne("Width must be a number"):[{name:`Change width to ${t}px`,action:e=>{e({type:"change width",value:t})}},{name:"Change other thing",action:e=>{console.log("other thing")}}]}};var ze="Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas non hendrerit dui. Duis luctus aliquet neque ac euismod. Cras tincidunt consequat nibh, placerat maximus ex facilisis sit amet. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Duis ut sem ac elit sagittis tincidunt a in tortor. Mauris cursus in arcu sit amet pulvinar. Aenean vel varius est, ac faucibus sapien. In sed mauris nisl. Proin accumsan, leo in luctus vestibulum, purus est dictum nulla, at iaculis urna lectus eu tellus. Vivamus quis magna risus. Ut eu lorem vestibulum, luctus quam et, auctor nisl. Duis tristique elit at tortor dignissim, eget efficitur risus consequat.\r\n";const _e=Object(f.a)(e=>{const{w:t,h:r}=e.getSize(),n=new ee(e);n.start(g,{direction:"col",gap:15,size:"max"}),n.add(P(e,"Demo Page"));const[a,o]=e.useState(50),[s,i]=e.useState(5),[c,u]=e.useState(.5);n.add(B(e,"Fade Paragraph"),H(e.store(),{label:`Start Font Size: (${Math.round(a)}pt)`,min:5,max:70,value:a,onChange:o}),H(e.store(),{label:`End Font Size: (${Math.round(s)}pt)`,min:5,max:70,value:s,onChange:i}),H(e.store(),{label:`Approach Rate: (${A.a.round(c,2)})`,min:.1,max:2,value:c,onChange:u})),n.add(L(e,{h:200},He(e,{points:A.a.range(0,10).map(e=>({x:e,y:(a-s)/(1+c*e)+s})),referenceLines:[{label:Math.round(a)+"pt",value:a},{label:Math.round(s)+"pt",value:s},{label:"70pt",value:70,style:"solid"},{label:"0pt",value:0,style:"solid"}]}))),n.add(X(e,{text:ze,fontFace:"OpenSans",startSize:a,endSize:s,approachRate:c,color:e.getValue("color").foreground})),n.add(X(e,{text:ze,fontFace:"OpenSans",startSize:15,endSize:50,approachRate:.05,color:e.getValue("color").foreground})),n.end(),e.place(0,0,Object(f.b)(q(e.store(),te(e,re(e,{w:700},U(e,{all:10},n.elem)))),t,r))}),He=Object(f.a)((e,{points:t,referenceLines:r=[],pointSize:n=5})=>{const a=e.getSize(),o=e.getValue("color"),s=r.map(t=>Object(f.b)(j(e,t.label),0,0)),i=A.a.max(s.map(e=>e.w))+n+5,c=n,u=Math.max(a.w,i+c),l=u-i-c,h=e.getValue("bodyFont"),p=Math.max(n,h.lineAscent/2),d=Math.max(n,h.lineAscent/2+(h.lineHeight-h.lineAscent)),g=Math.max(a.h,p+d),v=g-p-d;e.setSize(u,g);const m=[...t.map(e=>e.y),...r.map(e=>e.value)],b=A.a.min(m),y=A.a.max(m)-b,w=A.a.min(t.map(e=>e.x)),x=A.a.max(t.map(e=>e.x))-w;function S(e){return 0===y?p+v/2:p+v-(e-b)/y*v}r.forEach(({value:t,style:r="dotted"})=>{switch(r){case"solid":e.line(i,S(t),i+l,S(t),o.foreground);break;case"dotted":e.dashedLine(i,S(t),i+l,S(t),o.foreground,[5,5])}}),t.forEach(t=>{var r;e.fillCircle((r=t.x,0===x?i+l/2:(r-w)/x*l+i),S(t.y),5,o.primary)}),s.forEach((t,n)=>{e.place(0,S(r[n].value)-h.lineHeight/2,t)})});const Ve=Object(f.a)(e=>{const{w:t,h:r}=e.getSize(),n=e.getValue("color"),[a]=e.useState(()=>{const e=new Xe;return e.addBot(0,0),e.addWriter(1,1),e}),[o]=e.useState(new Ye(-t/2/50,-r/2/50,50)),s=function(e){const[t]=e.useState({});return e.addEvent("keyDown",e=>{t[e]=!0}),e.addEvent("keyUp",e=>{t[e]=!1}),t}(e);e.addEvent("paint",()=>{e.focus()});const i=function(e){const[t]=e.useState({x:0,y:0});return e.addEvent("mouseMove",(e,r)=>{t.x=e,t.y=r}),t}(e);e.addEvent("paint",()=>{a.step();const e=7/o.zoom;s.w&&(o.y-=e),s.s&&(o.y+=e),s.a&&(o.x-=e),s.d&&(o.x+=e)}),e.addEvent("mouseScroll",e=>{const t=o.zoom*Math.pow(1.002,-e);o.changeZoomAbout(i.x,i.y,t)});const c=a.getEntitiesNear(o.nx(i.x),o.ny(i.y)),u=new Set(c),[l,h]=e.useState([]);e.addEvent("mouseClick",()=>{h(c)});for(let t=-5;t<=5;t++)for(let r=-5;r<=5;r++)e.fillCircle(o.rx(t),o.ry(r),o.scale(.05),"green");for(let t=-4;t<=5;t++)e.fillRect(o.rx(t-.5),o.ry(-5.5),1,o.scale(11),"green");for(let t=-4;t<=5;t++)e.fillRect(o.rx(-5.5),o.ry(t-.5),o.scale(11),1,"green");for(const t of a.bots){const r=a.entities[t];e.fillCircle(o.rx(r.x),o.ry(r.y),o.scale(.3),n.background),e.strokeCircle(o.rx(r.x),o.ry(r.y),o.scale(.3),u.has(t)?"orange":"red");const s=Object(f.b)(j(e,""+r.cmds.length),0,0);e.place(o.rx(r.x)-s.w/2,o.ry(r.y)-s.h/2,s)}for(const t of a.writers){const r=a.entities[t];e.strokeRoundedRect(o.rx(r.x-.4),o.ry(r.y-.4),o.scale(.8),o.scale(.8),o.scale(.2),u.has(t)?"orange":"blue")}e.place(t-250,0,Object(f.b)(qe(e.store(),{game:a,view:o,selectedEntities:l}),250,r))}),qe=Object(f.a)((e,{game:t,view:r,selectedEntities:n})=>{const{w:a,h:o}=e.getSize(),s=e.getValue("color");e.fillRect(0,0,a,o,s.background),e.strokeRect(0,0,a,o,s.primary),e.addEvent("mouseClick",()=>{});const i=new ee(e);if(i.start(g,{direction:"col"}),n.length>0){i.add(j(e,`${n.length} selected  ${1===n.length?"entity":"entities"}:`)),i.start(Z,{});for(const r of n)i.add(We(e.store(r),{id:r,game:t}));i.end()}i.end(),e.place(0,0,Object(f.b)(U(e,{all:5},i.elem),a,o))}),We=Object(f.a)((e,{id:t,game:r})=>{const n=e.getSize(),a=e.getValue("color"),[o,s]=e.useState(!0);e.addEvent("mouseClick",()=>{s(!o)});const i=R(e);let c;if(o)c=j(e,t);else{const n=r.entities[t],a=new ee(e);switch(a.start(g,{direction:"col"}),a.add(j(e,t)),a.add(j(e,n.type)),a.add(j(e,`x: ${n.x}, y: ${n.y}`)),n.type){case"writer":case"bot":if(a.add(j(e,`${n.cmds.length} ${1===n.cmds.length?"command":"commands"}`)),n.cmds.length>0){a.start(Z,{});for(const t of n.cmds){switch(a.start(g,{direction:"row"}),t.type){case"move to":a.add(j(e,`Move to ${t.x}, ${t.y}`)),a.add(N(e.store(t),"Delete"))}a.end()}a.end()}a.add(N(e.store(t),"Add Command"))}a.end(),c=a.elem}c=Object(f.b)(c,n.w,n.h);const{w:u,h:l}=c;e.setSize(u,l),e.strokeRect(0,0,u,l,i?a.primary:a.foreground),e.place(0,0,c)});class Ye{constructor(e,t,r){this.x=e,this.y=t,this.zoom=r}rx(e){return(e-this.x)*this.zoom}ry(e){return(e-this.y)*this.zoom}nx(e){return this.x+e/this.zoom}ny(e){return this.y+e/this.zoom}scale(e){return e*this.zoom}changeZoomAbout(e,t,r){const n=this.x+e*(1/this.zoom-1/r),a=this.y+t*(1/this.zoom-1/r);this.x=n,this.y=a,this.zoom=r}}class Xe{constructor(){this.entities={},this.bots=[],this.writers=[]}getEntitiesNear(e,t,r=.5){const n=[];for(const a in this.entities){const o=this.entities[a],s=o.x-e,i=o.y-t;Math.abs(s)<r&&Math.abs(i)<r&&n.push(a)}return n}step(){for(const e of this.bots){const t=this.entities[e];if(t.cmds.length>0){const e=t.cmds[0];switch(e.type){case"move to":{const r=e.x-t.x,n=e.y-t.y,a=Math.sqrt(r*r+n*n);if(a<=t.stepDist){t.x=e.x,t.y=e.y,t.cmds=t.cmds.slice(1);for(const e of this.writers){const r=this.entities[e];r.x===t.x&&r.y===t.y&&t.cmds.push(...r.cmds)}}else{const e=r/a,o=n/a;t.x+=t.stepDist*e,t.y+=t.stepDist*o}break}default:throw new Error(`Unknown bot cmd type: "${e.type}"`)}}}}addBot(e,t){const r=this.makeId();return this.entities[r]={type:"bot",x:e,y:t,cmds:[{type:"move to",x:5,y:6},{type:"move to",x:-5,y:-2},{type:"move to",x:1,y:1}],stepDist:.1},this.bots.push(r),r}addWriter(e,t){const r=this.makeId();return this.entities[r]={type:"writer",x:e,y:t,cmds:[{type:"move to",x:0,y:3}]},this.writers.push(r),r}makeId(){for(;;){const t=(e=16,A.a.range(e).map(()=>"0123456789abcdef"[Math.floor(16*Math.random())]).join(""));if(!this.entities.hasOwnProperty(t))return t}var e}}const Ze=Object(f.a)(e=>{e.provideValue("titleFont",new c("OpenSans",50,"bold")),e.provideValue("headerFont",new c("OpenSans",25,"bold")),e.provideValue("bodyFont",new c("OpenSans",16));const t=function(e){const[t,r]=Oe("darkMode",!1),[n,a]=Oe("hue",33),[o,s]=Oe("saturation",1),i=t?xe.a.gl(0,0,0):xe.a.gl(1,1,1),c=t?xe.a.gl(1,1,1):xe.a.gl(0,0,0),u=xe.a.hsl(n,o,.5),l=xe.a.average([u,c],"rgb",[10,1]),h=xe.a.average([c,u],"rgb",[15,1]),f=xe.a.average([i,u],"rgb",[20,1]),p={hue:n,saturation:o,darkMode:t,background:f.hex(),foreground:h.hex(),primary:l.hex(),dispatch:function(e){switch(e.type){case"set dark mode":r(e.value);break;case"set hue":a(e.value);break;case"set saturation":s(e.value)}},getHueGradient:function(e,t){return xe.a.average([i,c,xe.a.hsl(n+360*e,o,.5)],"rgb",[t,1-t,1]).hex()}};return e.provideValue("color",p),p}(e),r=[["Home",Ue],["Info",Le],["Color",Ee],["Sorting",Re],["Animation",se],["Console",De],["Command",Pe],["Demo",_e],["Design",fe],["Logistics",Ve]],n={};r.forEach(([t,r])=>{n[t]=r(e.store())});const[a,o]=Oe("page","Home");e.provideValue("page",{page:a,pages:r,dispatch:e=>{switch(e.type){case"set page":o(e.value)}}}),e.addEvent("mouseClick",()=>{e.focus()});const s=r.map(([e])=>[e,e]),{w:i,h:u}=e.getSize();e.fillRect(0,0,i,u,t.background),e.place(0,0,Object(f.b)(g(e,{direction:"col",size:"max"},[Y(e.store(),s),Te(e.store(),n,n.Home,a)]),i,u))});window.addEventListener("load",()=>{Object(A.b)(),o("OpenSans",{default:pe.a,bold:de.a,italic:ge.a}),o("RobotoMono",{default:ve.a,bold:me.a,italic:be.a}),p(Ze())})},function(e,t,r){"use strict";r.r(t);var n=r(0);class a{invalidateUsers(){const e=[];for(const t of this._users()){const r=t.deref();r?r.invalidate():e.push(t)}for(const t of e)console.log("GARBAGE COLLECTING!!!"),this.users.delete(t)}}let o;function s(e){return e instanceof a?(o&&o.add(e),e._get()):e}class i extends a{constructor(e){super(),this.val=e,this.users=new Set}set(e){e!==this.val&&this.invalidateUsers(),this.val=e}_users(){return this.users}_get(){return this.val}}const c=e=>new i(e);class u extends a{constructor(e){super(),this.fcn=e,this.valid=!1,this.users=new Set,this.deps=new Set,this.weakRef=new WeakRef(this)}invalidate(){this.valid&&(this.valid=!1,this.invalidateUsers())}_users(){return this.users}_get(){if(this.valid)return this.val;const e=o;for(const e of this.deps)e._users().delete(this.weakRef);o=new Set,this.val=this.fcn();for(const e of o)e._users().add(this.weakRef);return o=e,this.valid=!0,this.val}}const l=e=>new u(e);class h extends a{constructor(){super(),this.listFcnNode=l(()=>{const e=s(this.length),t=new Array(e);for(let r=0;r<e;r++)t[r]=s(this.at(r));return t})}_users(){return this.listFcnNode._users()}_get(){return this.listFcnNode._get()}map(e){return new p(this,e)}filter(e){return new d(this,e)}}class f extends h{constructor(e){super(),this.list=e.map(e=>c(e)),this.length=c(e.length)}at(e){return this.list[e]}set(e,t){this.list[e].set(t)}push(e){this.list.push(e),this.length.set(this.list.length)}pop(){this.list.pop(),this.length.set(this.list.length)}}class p extends h{constructor(e,t){super(),this.arrayNode=e,this.fcn=t,this.length=e.length}at(e){return l(()=>this.fcn(s(this.arrayNode.at(e)),e))}}class d extends h{constructor(e,t){super(),this.list=l(()=>{const r=[];for(let n=0;n<s(e.length);n++){const a=s(e.at(n));t(a,n)&&r.push(a)}return r}),this.length=l(()=>s(this.list).length)}at(e){return l(()=>s(this.list)[e])}}class g extends a{constructor(e){super(),void 0===e&&(e={}),this.map=new Map;const t=Object.keys(e);for(const r of t)this.map.set(r,c(e[r]));this.size=c(this.map.size),this.objectFcnNode=l(()=>{const e={};for(const t of this.map.keys())e[t]=s(this.at(t));return e})}_get(){return this.objectFcnNode._get()}_users(){return this.objectFcnNode._users()}at(e){return this.map.get(e)}set(e,t){this.map.has(e)?this.map.get(e).set(t):(this.size.set(this.map.size+1),this.map.set(e,c(t)))}delete(e){this.map.has(e)&&(this.map.delete(e),this.size.set(this.map.size))}}Object(n.d)("basic vars",()=>{const e=c(5);Object(n.b)(s(e),5),e.set(42),Object(n.b)(s(e),42)}),Object(n.d)("basic fcn",()=>{const e=c(7),t=l(()=>s(e)+2);Object(n.b)(s(t),9),e.set(42),Object(n.b)(s(t),44)}),Object(n.d)("fcn that uses a fcn",()=>{let e=0,t=c(7),r=l(()=>(e++,s(t)+2));Object(n.a)(0===e),Object(n.a)(9===s(r)),Object(n.a)(1===e),t.set(9),t.set(11),Object(n.a)(1===e),Object(n.a)(13===s(r))}),Object(n.d)("function on a function",()=>{let e=c(3),t=l(()=>s(e)+1),r=l(()=>s(t)+2);Object(n.a)(6===s(r)),Object(n.a)(4===s(t)),e.set(42),Object(n.a)(43===s(t)),Object(n.a)(45===s(r))}),Object(n.d)("function that changes dependencies",()=>{let e=c(!0),t=c(7),r=c(11),a=l(()=>s(e)?s(t):s(r));Object(n.a)(7===s(a)),e.set(!1),Object(n.a)(11===s(a))}),Object(n.d)("UI element test",()=>{const e=c(10),t=c(20),r=function(e,t){const r=l(()=>s(e)),n=l(()=>s(t));let a=l(()=>{const e=[];return e.push("fill white"),e.push(`rect 0 0 ${s(r)} ${s(n)}`),e[0]+", "+e[1]});return{w:r,h:n,draw:a}}(e,t);Object(n.a)(10===s(r.w)),Object(n.a)(20===s(r.h)),Object(n.a)("fill white, rect 0 0 10 20"===s(r.draw)),e.set(13),t.set(42),Object(n.a)(13===s(r.w)),Object(n.a)(42===s(r.h)),Object(n.a)("fill white, rect 0 0 13 42"===s(r.draw))}),Object(n.d)("basic array node",()=>{const e=new f([1,2,3]),t=e.at(0),r=e.at(1),a=e.at(2);Object(n.b)(s(t),1),Object(n.b)(s(r),2),Object(n.b)(s(a),3),e.set(1,42),Object(n.b)(s(r),42)}),Object(n.d)("array node push",()=>{const e=new f([1,2,3]);Object(n.b)(s(e.length),3),e.push(4),Object(n.b)(s(e.length),4),Object(n.b)(s(e.at(3)),4)}),Object(n.d)("array node map",()=>{const e=new f([4,5,6]),t=e.map(e=>e+2);Object(n.b)(s(t.at(0)),6),Object(n.b)(s(t.at(1)),7),Object(n.b)(s(t.at(2)),8),e.push(42),Object(n.b)(s(t.at(3)),44),e.set(1,13),Object(n.b)(s(t.at(1)),15)}),Object(n.d)("array node filter",()=>{const e=new f([0,1,2,3]),t=e.filter(e=>e%2==0);Object(n.b)(s(t.length),2),Object(n.b)(s(t),[0,2]),e.set(1,42),Object(n.b)(s(t),[0,42,2])}),Object(n.d)("ObjectNode constructor",()=>{const e=new g({a:1,b:2});Object(n.b)(s(e),{a:1,b:2}),Object(n.b)(s(e.at("a")),1),Object(n.b)(s(e.at("b")),2)}),Object(n.d)("ObjectNode empty constructor",()=>{const e=new g;Object(n.b)(s(e),{})}),Object(n.d)("ObjectNode change value",()=>{const e=new g({q:42,w:57});Object(n.b)(s(e.at("q")),42),e.set("q",43),Object(n.b)(s(e.at("q")),43)}),Object(n.d)("ObjectNode change trickles up",()=>{const e=new g({q:42,w:57}),t=l(()=>s(e.at("q"))+5);Object(n.b)(s(t),47),e.set("q",11),Object(n.b)(s(t),16)}),Object(n.d)("Triangle object",()=>{const e=function(e,t,r){const n=l(()=>Math.min(s(e.x),s(t.x),s(r.x))),a=l(()=>Math.max(s(e.x),s(t.x),s(r.x))),o=l(()=>Math.min(s(e.y),s(t.y),s(r.y))),i=l(()=>Math.max(s(e.y),s(t.y),s(r.y))),c=l(()=>s(a)-s(n)),u=l(()=>s(i)-s(o)),h=l(()=>{const n=s(t.x)-s(e.x),a=s(t.y)-s(e.y),o=s(r.x)-s(e.x),i=s(r.y)-s(e.y);return Math.abs(n*i-a*o)/2});return{x:n,y:o,width:c,height:u,area:h}}({x:c(1),y:c(3)},{x:c(-1),y:c(0)},{x:c(3),y:c(-7)});Object(n.b)(s(e.width),4),Object(n.b)(s(e.height),10),Object(n.b)(s(e.area),13)})},function(e,t,r){"use strict";r.r(t);var n=r(0);let a=void 0;class o{constructor(e,t){this.val=e,this.cmpFcn=t,this.users=new Set,this.deleted=!1}delete(){this.invalidateUsers(),this.users=void 0,this.val=void 0,this.deleted=!0}eq(e,t){return void 0===this.cmpFcn?e===t:this.cmpFcn(e,t)}addUser(e){this.users.add(e)}deleteUser(e){this.users.delete(e)}invalidateUsers(){for(const e of this.users)e.invalidate()}get(){return Object(n.a)(!this.deleted),a&&(a.addUsed(this,this.val),this.addUser(a)),this.val}set(e){this.eq(this.val,e)||(this.invalidateUsers(),this.val=e)}}class s{constructor(e,t){this.fcn=e,this.cmpFcn=t,this.valid=!1,this.deleted=!1,this.new=!0,this.users=new Set,this.used=new Map}delete(){this.invalidateUsers(),this.fcn=void 0;for(const e of this.users)e.deleteUsed(this);this.users=void 0;for(const e of this.used.keys())e.deleteUser(this);this.used=void 0,this.deleted=!0}eq(e,t){return void 0===this.cmpFcn?e===t:this.cmpFcn(e,t)}addUser(e){this.users.add(e)}deleteUser(e){this.users.delete(e)}addUsed(e,t){this.used.set(e,t)}deleteUsed(e){this.used.delete(e)}invalidate(){if(this.valid){this.valid=!1;for(const e of this.users)e.invalidate()}}runFcn(){for(const e of this.used.keys())e.deleteUser(this);this.used=new Map;const e=a;a=this,this.val=this.fcn(),a=e}needsRun(){const e=a;a=void 0;const t=[...this.used.entries()].some(([e,t])=>e.deleted||!e.eq(e.get(),t));return a=e,t}get(){return this.new?(this.runFcn(),this.new=!1):this.valid||(this.needsRun()&&this.runFcn(),this.valid=!0),a&&(a.addUsed(this,this.val),this.addUser(a)),this.val}}Object(n.d)("Basic Node",()=>{const e=new o(5);Object(n.b)(e.get(),5),e.set(7),Object(n.b)(e.get(),7)}),Object(n.d)("Basic FcnNode",()=>{const e=new o(7),t=Object(n.c)(()=>e.get()+10),r=new s(t);Object(n.b)(t.nCalls,0),Object(n.b)(r.get(),17),Object(n.b)(t.nCalls,1),e.set(7),Object(n.b)(t.nCalls,1),Object(n.b)(r.get(),17),Object(n.b)(t.nCalls,1),e.set(8),Object(n.b)(t.nCalls,1),Object(n.b)(r.get(),18),Object(n.b)(t.nCalls,2)}),Object(n.d)("Chained FcnNodes",()=>{const e=new o(14),t=Object(n.c)(()=>e.get()+10),r=new s(t),a=Object(n.c)(()=>r.get()+20),i=new s(a);Object(n.b)(t.nCalls,0),Object(n.b)(a.nCalls,0),Object(n.b)(i.get(),44),Object(n.b)(t.nCalls,1),Object(n.b)(a.nCalls,1),Object(n.b)(r.get(),24),Object(n.b)(t.nCalls,1),Object(n.b)(a.nCalls,1),e.set(14),Object(n.b)(i.get(),44),Object(n.b)(t.nCalls,1),Object(n.b)(a.nCalls,1),Object(n.b)(r.get(),24),Object(n.b)(t.nCalls,1),Object(n.b)(a.nCalls,1),e.set(15),Object(n.b)(r.get(),25),Object(n.b)(t.nCalls,2),Object(n.b)(a.nCalls,1),Object(n.b)(i.get(),45),Object(n.b)(t.nCalls,2),Object(n.b)(a.nCalls,2)}),Object(n.d)("FcnNode with multiple dependencies",()=>{const e=new o(7),t=new o(10),r=Object(n.c)(()=>e.get()+t.get()),a=new s(r);Object(n.b)(r.nCalls,0),Object(n.b)(a.get(),17),Object(n.b)(r.nCalls,1),e.set(7),Object(n.b)(a.get(),17),Object(n.b)(r.nCalls,1),t.set(10),Object(n.b)(a.get(),17),Object(n.b)(r.nCalls,1),e.set(8),Object(n.b)(a.get(),18),Object(n.b)(r.nCalls,2),t.set(20),Object(n.b)(a.get(),28),Object(n.b)(r.nCalls,3),e.set(40),t.set(60),Object(n.b)(a.get(),100),Object(n.b)(r.nCalls,4)}),Object(n.d)("Fcn doesn't run when FcnNode dependency doesn't change",()=>{const e=new o(14),t=new o(15),r=Object(n.c)(()=>Math.max(e.get(),t.get())),a=new s(r),i=Object(n.c)(()=>a.get()+20),c=new s(i);Object(n.b)(c.get(),35),Object(n.b)(r.nCalls,1),Object(n.b)(i.nCalls,1),e.set(10),Object(n.b)(c.get(),35),Object(n.b)(r.nCalls,2),Object(n.b)(i.nCalls,1),e.set(16),Object(n.b)(c.get(),36),Object(n.b)(r.nCalls,3),Object(n.b)(i.nCalls,2),t.set(13),Object(n.b)(c.get(),36),Object(n.b)(r.nCalls,4),Object(n.b)(i.nCalls,2)})},function(e,t,r){"use strict";r.r(t);var n=r(0);function a(e,t){return(e=(e<<5)-e+t)&e}function o(e){if(void 0===e)return s("undefined");if(null===e)return s("null");if("number"==typeof e)return a(s("number"),e);if("string"==typeof e)return a(s("string"),s(e));if("object"==typeof e)return a(s("object"),function(e){let t=0;const r=Object.keys(e);r.sort();for(const i of r)Object(n.a)("string"==typeof i),t=a(t,s(i)),t=a(t,o(e[i]));return t}(e));throw new Error(`Unable to hash variable with type "${typeof e}"`)}function s(e){let t=0;for(let r=0;r<e.length;r++)t=a(t,e.charCodeAt(r));return t}Object(n.d)("Basic test",()=>{Object(n.b)(o("a"),o("a")),Object(n.a)(o("a")!==o("b")),Object(n.a)(o({a:"stuff",b:"things"})!==o({a:"stufg",b:"things"})),Object(n.a)(o({a:"stuff",b:"things"})!==o({c:"stuff",b:"things"})),Object(n.a)(o({a:"stuff"})!==o({a:"stufg",b:"things"})),Object(n.a)(o([1,2,3])!==o([2,2,3])),Object(n.a)(o([1,2,3])==o([1,2,3])),Object(n.a)(o(void 0)!==o(null)),Object(n.a)(o(void 0)!==o("undefined"))}),Object(n.d)("with a class",()=>{class e{constructor(e,t,r){this.a=e,this.b=t,this.c=r}}Object(n.a)(o(new e(1,2,3))==o(new e(1,2,3))),Object(n.a)(o(new e(1,2,3))!==o(new e(1,"2",3)))})},function(e,t,r){"use strict";r.r(t);var n=r(0);class a{constructor(e){this.capacity=e,this.size=0,this.list=new Array(e+1),this.indexMap=new Map}add(e,t){Object(n.a)(this.size<this.capacity),Object(n.a)(!this.indexMap.has(e)),this.list[this.size+1]={key:e,value:t},this.indexMap.set(e,this.size+1),this.size++,this.heapifyUp(this.size)}update(e,t){Object(n.a)(this.indexMap.has(e));const r=this.indexMap.get(e);this.list[r].value=t,this.size>1&&(this.swap(r,this.size),this.heapifyUp(this.size))}popMin(){Object(n.a)(this.size>0);const e=this.list[1];return this.size--,this.size>0&&(this.swap(1,this.size+1),this.heapifyDown(1)),this.indexMap.delete(e.key),this.list[this.size+1]=void 0,e}swap(e,t){this.indexMap.set(this.list[e].key,t),this.indexMap.set(this.list[t].key,e);const r=this.list[e];this.list[e]=this.list[t],this.list[t]=r}heapifyUp(e){if(e<1||e>this.size)return;if(1===e)return;const t=Math.floor(e/2);this.list[e].value<this.list[t].value&&(this.swap(e,t),this.heapifyUp(t))}heapifyDown(e){if(e<1||e>this.size)return;const t=2*e;if(t<=this.size){const r=2*e+1;r<=this.size?this.list[t].value<this.list[r].value?this.list[t].value<this.list[e].value&&(this.swap(e,t),this.heapifyDown(t)):this.list[r].value<this.list[e].value&&(this.swap(e,r),this.heapifyDown(r)):this.list[t].value<this.list[e].value&&(this.swap(e,t),this.heapifyDown(t))}}}Object(n.d)("basic MinHeapMap test",()=>{const e=new a(10);Object(n.b)(e.size,0),Object(n.b)(e.list.length,11),e.add("k1",10),Object(n.b)(e.size,1);const t=e.popMin();Object(n.b)(t,{key:"k1",value:10}),Object(n.b)(e.size,0)}),Object(n.d)("push smaller element",()=>{const e=new a(10);e.add("k1",10),e.add("k2",9),Object(n.b)(e.size,2),Object(n.b)(e.list[1],{key:"k2",value:9}),Object(n.b)(e.list[2],{key:"k1",value:10}),Object(n.b)(e.indexMap.get("k1"),2),Object(n.b)(e.indexMap.get("k2"),1)}),Object(n.d)("push larger element",()=>{const e=new a(10);e.add("k1",10),e.add("k2",11),Object(n.b)(e.size,2),Object(n.b)(e.list[1],{key:"k1",value:10}),Object(n.b)(e.list[2],{key:"k2",value:11}),Object(n.b)(e.indexMap.get("k1"),1),Object(n.b)(e.indexMap.get("k2"),2)}),Object(n.d)("push many values",()=>{const e=new a(10);e.add("k1",5),e.add("k2",6),e.add("k3",4),e.add("k4",7),e.add("k5",4),e.add("k6",10),e.add("k7",1),Object(n.b)(e.popMin(),{key:"k7",value:1}),Object(n.b)(e.popMin(),{key:"k3",value:4}),Object(n.b)(e.popMin(),{key:"k5",value:4}),Object(n.b)(e.popMin(),{key:"k1",value:5}),Object(n.b)(e.popMin(),{key:"k2",value:6}),Object(n.b)(e.popMin(),{key:"k4",value:7}),Object(n.b)(e.popMin(),{key:"k6",value:10}),Object(n.b)(e.size,0)}),Object(n.d)("randomized push/pop",()=>{function e(){const e=new a(10),t=new Map;for(let r=0;r<10;r++){const n=Math.round(100*Math.random());t.set(r,n),e.add(r,n)}const r=[];for(;e.size>0;)r.push(e.popMin());r.forEach(({key:e,value:r})=>{Object(n.a)(t.get(e)===r)});for(let e=0;e<r.length-1;e++)Object(n.a)(r[e].value<=r[e+1].value)}for(let t=0;t<1e3;t++)e()}),Object(n.d)("update",()=>{const e=new a(10);e.add("k1",5),e.add("k2",10),e.update("k2",4),Object(n.b)(e.popMin(),{key:"k2",value:4}),Object(n.b)(e.popMin(),{key:"k1",value:5}),Object(n.b)(e.size,0)})}]);