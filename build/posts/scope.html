<!DOCTYPE html><html lang="en"><head><title>Scope Based Programming</title><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" type="image" href="../rec/favicon/16x16.png" sizes="16x16"/><link rel="icon" type="image" href="../rec/favicon/32x32.png" sizes="32x32"/><link rel="icon" type="image" href="../rec/favicon/96x96.png" sizes="96x96"/><link rel="stylesheet" href="../rec/styles.css"/><link rel="stylesheet" href="../rec/highlight.css"/></head><body><div class="main"><div class="title">Scope Based Programming</div><div class="navbar"><span><a href="../index.html">Home</a></span><span><a style="margin-left:3em;" href="../resume.html">Resume</a></span><span><a style="margin-left:3em;" href="../postsList.html">Posts</a></span></div><h3>An experiment about a single language object and making it easier to pass information around an application.</h3>

<h2>The Problem</h2>

<p>I was recently writing some software with a lot of densely connected data structures.</p>

<div class="code"><pre><span></span><code><span class="kr">public</span> <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="p">{</span>
    <span class="nx">points</span><span class="p">,</span>
    <span class="nx">width</span><span class="p">,</span>
    <span class="nx">height</span><span class="p">,</span>
    <span class="nx">xUnit</span><span class="p">,</span>
    <span class="nx">yUnit</span><span class="p">,</span>
    <span class="nx">colors</span> <span class="o">=</span> <span class="nx">DEFAULT_COLORS</span>
  <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span>

  <span class="kr">const</span> <span class="nx">xVals</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span>
  <span class="kr">const</span> <span class="nx">xScale</span> <span class="o">=</span> <span class="nx">getScale</span><span class="p">(</span><span class="nx">xVals</span><span class="p">,</span> <span class="nx">xUnit</span><span class="p">)</span>

  <span class="kr">const</span> <span class="nx">yVals</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">d</span> <span class="p">=&gt;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span>
  <span class="kr">const</span> <span class="nx">yScale</span> <span class="o">=</span> <span class="nx">getScale</span><span class="p">(</span><span class="nx">yVals</span><span class="p">,</span> <span class="nx">yUnit</span><span class="p">)</span>

  <span class="kr">const</span> <span class="nx">scaledPoints</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">p</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">x</span><span class="o">:</span> <span class="nx">xScale</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span>
      <span class="nx">y</span><span class="o">:</span> <span class="nx">yScale</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">})</span>
<span class="p">}</span>
</code></pre></div>

<p>It quickly becomes difficult to manage how all the functions manipulate variables and writing/reading/changing the code becomes near impossible without writing out a dependency graph.</p>

<p>In addition, as the manipulations become more complicated, functions need lots of arguments and perhaps even multiple outputs to efficiently share and compute data. These large functions are difficult to write/read/maintain.</p>

<h2>The Intuition</h2>

<p>It would be nice to access variables without passing individual arguments to a function. It would also be nice to pass variables down without passing them as variables. While this does make code a little less readable, it makes it much simpler to pass variables around.</p>

<p>In other words, it sacrifices readability of low level functions for the readability of high level functions. This isn't too bad because most low lever functions are written by a small group of people who are familiar with the code.</p>

<h2>The Language: Scope</h2>

<p>I came up with a language that solves these problems. I'll first explain what this language might look like and then I'll explain why making this language doesn't make sense.</p>

<p>While I was at it, I unified a bunch of things (functions, classes) into a single object: A scope.</p>

<h3>Scopes as mutators</h3>

<p>The main idea behind Scope is that function scope extends to child functions.</p>

<div class="code"><pre><span></span><code><span class="nx">scope</span> <span class="nx">add</span> <span class="p">{</span>
  <span class="nx">a</span> <span class="o">+=</span> <span class="mi">5</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">5</span>
<span class="nx">add</span><span class="p">()</span>
<span class="nx">print</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="c1">// 5</span>
</code></pre></div>

<p>Functions inherit their parent's scope which makes it possible to pass variables by scope instead of by argument.</p>

<p>While this increases the change of side effects, it decreases the visual complexity of code. I'm not sure if the increase of side effects is a good or a bad thing.</p>

<h3>Scopes as functions</h3>

<p>You can use a scope as an ordinary function with the following syntax:</p>

<div class="code"><pre><span></span><code><span class="nx">scope</span> <span class="nx">myFunction</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span>
<span class="p">}</span>

<span class="nx">print</span><span class="p">(</span><span class="nx">myFunction</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span> <span class="c1">// 11</span>
</code></pre></div>

<h3>Scopes as objects</h3>

<p>Scopes can also be declared as objects, similar to javascript objects.</p>

<div class="code"><pre><span></span><code><span class="nx">scope</span> <span class="nx">myObj</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span>
  <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">2</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">myObj</span><span class="p">()</span>
<span class="nx">print</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span> <span class="c1">// a</span>

<span class="nx">scope</span> <span class="nx">mySecondObj</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">+</span> <span class="mi">10</span>
<span class="p">}</span>
<span class="kd">var</span> <span class="nx">secondObj</span> <span class="o">=</span> <span class="nx">mySecondObj</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="nx">print</span><span class="p">(</span><span class="nx">secondObj</span><span class="p">.</span><span class="nx">b</span><span class="p">)</span> <span class="err">#</span> <span class="mi">20</span>
</code></pre></div>

<p>You can also use a js-like shorthand for objects:</p>

<div class="code"><pre><span></span><code><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">b</span><span class="o">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="nx">print</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span> <span class="c1">// 1</span>
</code></pre></div>

<h3>Scopes as object mutators</h3>

<p>Scopes can be applied to an object using the dot operator:</p>

<div class="code"><pre><span></span><code><span class="nx">scope</span> <span class="nx">add</span> <span class="p">{</span>
  <span class="nx">a</span> <span class="o">+=</span> <span class="mi">5</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="nx">a</span><span class="o">:</span> <span class="mi">5</span><span class="p">}</span>

<span class="nx">obj</span><span class="p">.</span><span class="nx">add</span><span class="p">()</span>

<span class="nx">print</span><span class="p">(</span><span class="nx">obj</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span> <span class="c1">// 10</span>
</code></pre></div>

<p>This naturally leads right into classes.</p>

<h3>Scopes as classes</h3>

<div class="code"><pre><span></span><code><span class="nx">scope</span> <span class="nx">myClass</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">a</span>

  <span class="nx">scope</span> <span class="nx">add</span> <span class="p">{</span>
    <span class="nx">b</span> <span class="o">+=</span> <span class="mi">5</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">instance</span> <span class="o">=</span> <span class="nx">myClass</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="nx">print</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">b</span><span class="p">)</span> <span class="c1">// 5</span>
<span class="nx">instance</span><span class="p">.</span><span class="nx">add</span><span class="p">()</span>
<span class="nx">print</span><span class="p">(</span><span class="nx">instance</span><span class="p">.</span><span class="nx">b</span><span class="p">)</span> <span class="c1">// 10</span>
</code></pre></div>

<h2>Conclusion (For Now)</h2>

<p>I've showed how a single object (scope) can be used to represent most features of modern programming. While this demo lacks inheritance, there is probably a way to expose a scope's variables and add private variables to add this functionality.</p>

<p>Scopes let the programmer do a lot because most variables are accessible from strange places. This is good because it leads to concise code but it is bad because it encourages side-effects that complicate code.</p>

<p>This gets into why I don't think this is a viable language. For a programming language to be successful, it has to:</p>

<ul>
<li>Solve a problem. Scope does this.</li>
<li>Be stress tested with real-world applications. Scope doesn't even exist.</li>
<li>Have support ($$ and people). I'm the only person who knows about scope so definitely not this.</li>
</ul>

<p>For these reasons, Scope is fun to think about but impractical to actually implement. I am thinking about adding some of Scope's features to javascript as a library instead of a brand-new language.</p>
</div></body></html>