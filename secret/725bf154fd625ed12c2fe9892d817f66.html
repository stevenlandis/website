<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Encrypted Page</title>
  <script type="text/javascript" src="aes.js"></script>
</head>
<body>
  <script type="text/javascript">
    const page = '84bac84ed8f8dd6b1aa9e40db8f64813d61c2955ae98a6d63a3a5701f98c13e9cc8466f58095d21f324bf30282453fb1851553075c6229c8f3e5462e1152c292b948acf8f86f611880c7d7c365e6eaf529ed37c3606812b2b4fece7ee1d41218cd4f0a4f3c2e34aa3a58f72c059d87e7e946bdb717677fe031db1dc2d4b167db63cea9627d05fdd1049177be64dfb0c6476dd0458beb3d';
    window.onload = () => {
      const url = window.location.href;
      const hexKey = window.localStorage.getItem('password hash');
      console.assert(hexKey !== null);
      console.assert(hexKey.length == 32);
      const byteKey = aesjs.utils.hex.toBytes(hexKey);
      const aes = new aesjs.ModeOfOperation.ctr(byteKey, new aesjs.Counter(1));
      const pageBytes = aesjs.utils.hex.toBytes(page);
      const decryptedBytes = aes.decrypt(pageBytes);
      const decryptedPage = aesjs.utils.utf8.fromBytes(decryptedBytes);
      document.body.innerHTML = decryptedPage;
    }
  </script>
</body>
</html>
