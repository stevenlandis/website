<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Encrypted Page</title>
  <script type="text/javascript" src="aes.js"></script>
</head>
<body>
  <script type="text/javascript">
    const page = '2e85fbda8957977a58beefbae8209a5d79f26a76ef440333636da54bd3568167227b28438a5c1c93d4178525081f2ef4558fb19e94400b59b582d84b4886270f6d3543a98598ca7bcffcd09d87d924108369878b09afda725e7e74f49df5482f41767cef7a336b34491383c963c651f7634c007a597be23550323a5917e382c170fedbe7b0f26a9a2b38d73ae000327324f716c0e83684a8c5cb7359041646374000610e482753e264ae731bedfbb234c541e84895b763c1738f11acea013b3b847b4ef7647b98496e1ad77837763e0cf202561f25785f2ce65245e263c808f75b1e0e922cbeae66aa6cff44b1f148f31445f183bfcabcfe78b4cb15f334fe94ea8b74e64924d0aa6d78d9954e624d18e19ac3b748b279e80b7d65abfda9f5d3';
    window.onload = () => {
      const url = window.location.href;
      const hexKey = window.localStorage.getItem('password hash');
      console.assert(hexKey !== null);
      console.assert(hexKey.length == 32);
      const byteKey = aesjs.utils.hex.toBytes(hexKey);
      const aes = new aesjs.ModeOfOperation.ctr(byteKey, new aesjs.Counter(1));
      const pageBytes = aesjs.utils.hex.toBytes(page);
      const decryptedBytes = aes.decrypt(pageBytes);
      const decryptedPage = aesjs.utils.utf8.fromBytes(decryptedBytes);
      document.body.innerHTML = decryptedPage;
    }
  </script>
</body>
</html>
