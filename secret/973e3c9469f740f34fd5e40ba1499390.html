<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Encrypted Page</title>
  <script type="text/javascript" src="aes.js"></script>
</head>
<body>
  <script type="text/javascript">
    const page = '84bac84ec1f1d125758ded0fafea371a80471f46b697cfb96a290638f4c514a685832ee4c895911e345ae604c7517ea681530a09107353ca89e77e753a5890c1f85be9b4f964785dc2c4d1cb24e7f6b07dfc3d967c6453b4a7fccd27e3994a0bdc051913287163ec7904a26a55c693f1b940fda705673da77f8d5c9fcaa320df30a8b72c2e2cf1cd41c665f960c3f3ce1728cc1e94f543ebeb376f7c7289e3a8afc8d05136358ff1f6597c462459b21831e109f3afaff62406a65dcc1013edd1ec3f6150a73184571985de214abc7de41ab627a638de5c4f69a58581a4116fe83b24ee94ad5d8cad32f852eb72ef8246a31ea7f4c08463c1dfe097cb202419dc37eaa8842d4aca86a253682bfd0bac3bf1a6a0edfbfb9ec4bc382cb3d0a4e9d2';
    window.onload = () => {
      const url = window.location.href;
      const hexKey = window.localStorage.getItem('password hash');
      console.assert(hexKey !== null);
      console.assert(hexKey.length == 32);
      const byteKey = aesjs.utils.hex.toBytes(hexKey);
      const aes = new aesjs.ModeOfOperation.ctr(byteKey, new aesjs.Counter(1));
      const pageBytes = aesjs.utils.hex.toBytes(page);
      const decryptedBytes = aes.decrypt(pageBytes);
      const decryptedPage = aesjs.utils.utf8.fromBytes(decryptedBytes);
      document.body.innerHTML = decryptedPage;
    }
  </script>
</body>
</html>
