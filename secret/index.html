<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Encrypted Page</title>
  <script type="text/javascript" src="aes.js"></script>
  <script type="text/javascript" src="sha256.js"></script>
</head>
<body>
  <script type="text/javascript">
    const link = '9de4d32001c64c4483e02a0da640b234';
    const salt = '0e9af0f8c7b0dc3922adeb74add50ec3';
    function login() {
      const pass = document.getElementsByTagName('input')[0].value;
      const m = sha256.create();
      m.update(pass);
      m.update(salt);
      const hexPass = m.hex().substr(0,32);
      window.localStorage.setItem('password hash', hexPass);
      const byteKey = aesjs.utils.hex.toBytes(hexPass);
      const aes = new aesjs.ModeOfOperation.ctr(byteKey, new aesjs.Counter(1));
      const linkBytes = aesjs.utils.hex.toBytes(link);
      const decryptedLink = aesjs.utils.hex.fromBytes(aes.decrypt(linkBytes));
      const url = `${decryptedLink}.html`;
      window.location.href = url;
    }
    window.onload = () => {
      const input = document.getElementsByTagName('input')[0];
      input.addEventListener('keydown', event => {
        if (event.key === 'Enter') {
          login();
        }
      });
    }
  </script>
  <h3>Password:</h3>
  <input type="password">
  <div>
    <button onclick="login()">Click to login</button>
  </div>
</body>
</html>
