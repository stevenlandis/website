<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Encrypted Page</title>
  <script type="text/javascript" src="aes.js"></script>
</head>
<body>
  <script type="text/javascript">
    const page = '2e85fbda905e9b34379ae6b8ff3ce5542fa95c65f74b6a5c337ef472de1f86286b7c6052c25c5f92d20690234d0b6fe351c9e890d851715bcf80e010638c755c2c2606e58493d33e8dffd695c6d83855d7788dde15a39b744d7c77ad9fe54637063839e86a3f67275c19d1d1329a14b03016176f1c2af024173b2a045ff1c5c52398c5a9e3db66866e6fc57de41c717b74b20a9bf728fa';
    window.onload = () => {
      const url = window.location.href;
      const hexKey = window.localStorage.getItem('password hash');
      console.assert(hexKey !== null);
      console.assert(hexKey.length == 32);
      const byteKey = aesjs.utils.hex.toBytes(hexKey);
      const aes = new aesjs.ModeOfOperation.ctr(byteKey, new aesjs.Counter(1));
      const pageBytes = aesjs.utils.hex.toBytes(page);
      const decryptedBytes = aes.decrypt(pageBytes);
      const decryptedPage = aesjs.utils.utf8.fromBytes(decryptedBytes);
      document.body.innerHTML = decryptedPage;
    }
  </script>
</body>
</html>
