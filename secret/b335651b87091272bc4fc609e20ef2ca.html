<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Encrypted Page</title>
  <script type="text/javascript" src="aes.js"></script>
</head>
<body>
  <script type="text/javascript">
    const page = '4d0106f9bd593d2715700697b074673c8b120186057b938fa61cbbcd497e9308ff1b18df604358fefe116bf62f50dc28420be26c1675dc598c1372768a63583b7a9ad0060136958603b128951f28312df061ba94df173448bb3318dec9d68f27cbb56e122cfaa79c339f4e5cc129e2caafc24689c0f341d21c56c73e2a1eb4c05bb6f7e25a72c5793a88e49559e4fb7d7ea9c8f54f289e611a199ef8017ca14c51c3d6deba51fa236065e9fd9bfcdc3d569eb6be7ce33236d9085b2dd7166f94b040c3ec9d4b4a54cc85bd4cb1dcdc378878c0c66dd64775db6c65f14069511d835077aac0630316bae342b70df8e97ebaf3bc138a8d29d320fb10b9fa405bfbf0b3c5b14beb1417cc88c11d0fcdf1b65535aad00606a3d1385cc3f353bb90c31ce8c438daaa342f42ddd6e738d4039c78b914d43cfcd5ab7e38650312cbd65413a93d67de779d2dc5bc746b758b4bcf5fe813029debf8d9bb71736355b0da437b5e1750beae6cf1ee34d8a632ba0f405f38999967f0d35a9442fc674ecfeb9ef910eb55c70187b20b4df28ab287a6dc2cc193e022f4';
    window.onload = () => {
      const url = window.location.href;
      const hexKey = window.localStorage.getItem('password hash');
      console.assert(hexKey !== null);
      console.assert(hexKey.length == 32);
      const byteKey = aesjs.utils.hex.toBytes(hexKey);
      const aes = new aesjs.ModeOfOperation.ctr(byteKey, new aesjs.Counter(1));
      const pageBytes = aesjs.utils.hex.toBytes(page);
      const decryptedBytes = aes.decrypt(pageBytes);
      const decryptedPage = aesjs.utils.utf8.fromBytes(decryptedBytes);
      document.body.innerHTML = decryptedPage;
    }
  </script>
</body>
</html>
