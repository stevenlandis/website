<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Encrypted Page</title>
  <script type="text/javascript" src="aes.js"></script>
</head>
<body>
  <script type="text/javascript">
    const page = '4d0d5eb1c9422c7e366153d0af354f709b1e59dd05708db2aa5cf5e10329ea14fe5906fe600637f9a6597aec66539d26540ab33a463bb702990d5575d8751a2b289e84194664d1ce50ee41c24f620a65e129b0da8f0f3457a82f5e9784938a7694b32d0722aab7d920ce1c088026f08cee9c4dd7d7b41ded1558cf321510fc885ab3eb97597cdb376e90e0d254b9a77425e3d4aa5e65e7';
    window.onload = () => {
      const url = window.location.href;
      const hexKey = window.localStorage.getItem('password hash');
      console.assert(hexKey !== null);
      console.assert(hexKey.length == 32);
      const byteKey = aesjs.utils.hex.toBytes(hexKey);
      const aes = new aesjs.ModeOfOperation.ctr(byteKey, new aesjs.Counter(1));
      const pageBytes = aesjs.utils.hex.toBytes(page);
      const decryptedBytes = aes.decrypt(pageBytes);
      const decryptedPage = aesjs.utils.utf8.fromBytes(decryptedBytes);
      document.body.innerHTML = decryptedPage;
    }
  </script>
</body>
</html>
